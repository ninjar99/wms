
select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:27:14]

column:2 ; row:1  [2015-10-26 09:27:14]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:27:28]

column:2 ; row:1  [2015-10-26 09:27:28]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:27:33]

column:6 ; row:1  [2015-10-26 09:27:33]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:27:35]

column:1 ; row:1  [2015-10-26 09:27:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:27:36]

column:23 ; row:0  [2015-10-26 09:27:36]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1130578586006','1130578600906','5193427810703','5193427828803','5193428787703','1130578580806','1130578581106','1130578578506','1130578575406','5193427819003') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1130578586006','1130578600906','5193427810703','5193427828803','5193428787703','1130578580806','1130578581106','1130578578506','1130578575406','5193427819003') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:27:38]

updated row:0  [2015-10-26 09:27:38]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1130578586006','1130578600906','5193427810703','5193427828803','5193428787703','1130578580806','1130578581106','1130578578506','1130578575406','5193427819003') order by osh.shipment_no   [2015-10-26 09:27:38]

column:23 ; row:0  [2015-10-26 09:27:38]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1130578586006','1130578600906','5193427810703','5193427828803','5193428787703','1130578580806','1130578581106','1130578578506','1130578575406','5193427819003') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1130578586006','1130578600906','5193427810703','5193427828803','5193428787703','1130578580806','1130578581106','1130578578506','1130578575406','5193427819003') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:27:42]

updated row:0  [2015-10-26 09:27:42]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1130578586006','1130578600906','5193427810703','5193427828803','5193428787703','1130578580806','1130578581106','1130578578506','1130578575406','5193427819003') order by osh.shipment_no   [2015-10-26 09:27:42]

column:23 ; row:0  [2015-10-26 09:27:42]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:27:58]

column:1 ; row:1  [2015-10-26 09:27:58]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:27:58]

column:23 ; row:0  [2015-10-26 09:27:58]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1130578599206') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1130578599206') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:27:59]

updated row:0  [2015-10-26 09:27:59]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1130578599206') order by osh.shipment_no   [2015-10-26 09:27:59]

column:23 ; row:0  [2015-10-26 09:27:59]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:31:39]

column:1 ; row:1  [2015-10-26 09:31:40]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:31:40]

column:23 ; row:0  [2015-10-26 09:31:40]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:31:41]

updated row:2  [2015-10-26 09:31:41]

insert into oub_shipment_detail(shipment_no,shipment_line_no,status,create_order_date,erp_order_no,erp_order_line_no,warehouse_code,storer_code,item_code,req_qty,is_gift,price,item_retail_price,item_net_price,tax_rate,tax,created_dtm_loc,created_by_user,USER_DEF8) select o.order_sn,(@rowNum:=@rowNum+1) as rowNo,'100',o.created_date,o.external_order,(@rowNum:=@rowNum) as rowNo,'hz',o.supplier_id ,p.part_number,od.commodity_amount,od.is_gift,od.market_price,od.market_price,od.unit_price,od.tax_rate,od.tax,now(),'admin',o.order_id from sandwich.ag_order o ,(Select (@rowNum :=0) ) r  ,sandwich.ag_order_commodity od ,sandwich.ag_product p where o.order_id=od.order_id and p.product_id=od.product_id and o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_detail osd where osd.shipment_no=o.order_sn)  union all select eoi.order_sn,@rowNum := if(@orderID = eog.order_id, @rowNum + 1, 1) as rowNo,'100',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.external_order,(@rowNum:=@rowNum) as rowNo2,'hz',eoi.shop_no,eg.MATRRIAL_NUM,eog.goods_number,eog.is_gift,eog.goods_price,eog.market_price,eog.goods_price,eog.tax_rate,eog.tax,now(),'admin',@orderID := eog.order_id as dummy from namacity.ecs_order_info eoi, namacity.ecs_order_goods eog,namacity.ecs_goods eg,(Select @rowNum :=0,@orderID :='' ) r where eoi.order_id=eog.order_id and eog.goods_id=eg.goods_id and eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_detail osd where osd.shipment_no=eoi.order_sn)   [2015-10-26 09:31:41]

updated row:4  [2015-10-26 09:31:42]

update oub_shipment_header osh inner join bas_storer bs on osh.storer_code=bs.EXTERN_STORER_CODE set osh.STORER_CODE=case when bs.STORER_CODE is not null then bs.STORER_CODE else osh.STORER_CODE end where osh.TRANSFER_ORDER_NO in  ('1128879652506')  [2015-10-26 09:31:42]

updated row:2  [2015-10-26 09:31:42]

update oub_shipment_detail osd inner join bas_storer bs on osd.storer_code=bs.EXTERN_STORER_CODE inner join oub_shipment_header osh on osh.SHIPMENT_NO=osd.SHIPMENT_NO set osd.STORER_CODE=case when bs.STORER_CODE is not null then bs.STORER_CODE else osd.STORER_CODE end where osh.TRANSFER_ORDER_NO in  ('1128879652506')  [2015-10-26 09:31:42]

updated row:4  [2015-10-26 09:31:42]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:31:42]

column:23 ; row:2  [2015-10-26 09:31:42]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:31:42]

column:18 ; row:2  [2015-10-26 09:31:42]

select * from sys_process_history where 1<>1  [2015-10-26 09:31:42]

column:48 ; row:0  [2015-10-26 09:31:42]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','ShipmentImport','订单导入','','','','','','','','','','','','','','','','','','','','','','','','',now(),'','','','','','','1128879652506','admin','',now(),'','','',now(),'',''  [2015-10-26 09:31:42]

updated row:1  [2015-10-26 09:31:42]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:31:44]

column:18 ; row:2  [2015-10-26 09:31:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:31:45]

column:18 ; row:2  [2015-10-26 09:31:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:31:49]

column:18 ; row:2  [2015-10-26 09:31:49]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:32:34]

column:2 ; row:1  [2015-10-26 09:32:34]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:32:38]

column:6 ; row:1  [2015-10-26 09:32:38]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:32:41]

column:1 ; row:1  [2015-10-26 09:32:41]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:32:41]

column:22 ; row:0  [2015-10-26 09:32:42]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 09:32:46]

column:22 ; row:1436  [2015-10-26 09:32:50]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:32:51]

column:20 ; row:1  [2015-10-26 09:32:51]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101367493' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:32:52]

column:20 ; row:1  [2015-10-26 09:32:52]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101344982' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:32:52]

column:20 ; row:1  [2015-10-26 09:32:53]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101367493' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:32:53]

column:20 ; row:1  [2015-10-26 09:32:53]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:32:57]

column:22 ; row:30  [2015-10-26 09:32:57]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:32:57]

column:20 ; row:1  [2015-10-26 09:32:57]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100863694' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:32:58]

column:20 ; row:1  [2015-10-26 09:32:58]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:33:06]

column:22 ; row:30  [2015-10-26 09:33:07]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:33:07]

column:20 ; row:1  [2015-10-26 09:33:08]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015102328345' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:33:08]

column:20 ; row:1  [2015-10-26 09:33:09]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:33:14]

column:22 ; row:30  [2015-10-26 09:33:14]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:33:14]

column:20 ; row:1  [2015-10-26 09:33:14]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 09:33:25]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015102374203' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:33:27]

column:20 ; row:1  [2015-10-26 09:33:31]

column:22 ; row:1436  [2015-10-26 09:33:31]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:33:32]

column:20 ; row:1  [2015-10-26 09:33:32]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:33:49]

column:2 ; row:1  [2015-10-26 09:33:49]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:33:52]

column:6 ; row:1  [2015-10-26 09:33:52]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:33:56]

column:1 ; row:1  [2015-10-26 09:33:56]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:33:56]

column:22 ; row:0  [2015-10-26 09:33:56]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:33:57]

column:22 ; row:30  [2015-10-26 09:33:57]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:33:57]

column:20 ; row:1  [2015-10-26 09:33:57]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:34:37]

column:2 ; row:1  [2015-10-26 09:34:37]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:34:40]

column:6 ; row:1  [2015-10-26 09:34:40]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:34:43]

column:1 ; row:1  [2015-10-26 09:34:43]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:34:43]

column:22 ; row:0  [2015-10-26 09:34:43]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:34:44]

column:22 ; row:30  [2015-10-26 09:34:45]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:34:45]

column:20 ; row:1  [2015-10-26 09:34:45]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100884463' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:34:46]

column:20 ; row:1  [2015-10-26 09:34:46]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:39:23]

column:2 ; row:1  [2015-10-26 09:39:23]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:39:28]

column:6 ; row:1  [2015-10-26 09:39:28]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:39:31]

column:1 ; row:1  [2015-10-26 09:39:31]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:39:31]

column:22 ; row:0  [2015-10-26 09:39:31]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:39:33]

column:22 ; row:30  [2015-10-26 09:39:33]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:39:33]

column:20 ; row:1  [2015-10-26 09:39:33]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:40:07]

column:2 ; row:1  [2015-10-26 09:40:07]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:40:11]

column:6 ; row:1  [2015-10-26 09:40:11]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:40:14]

column:1 ; row:1  [2015-10-26 09:40:14]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:40:14]

column:22 ; row:0  [2015-10-26 09:40:14]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:40:15]

column:22 ; row:30  [2015-10-26 09:40:15]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:40:46]

column:2 ; row:1  [2015-10-26 09:40:46]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:40:49]

column:6 ; row:1  [2015-10-26 09:40:49]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:40:52]

column:1 ; row:1  [2015-10-26 09:40:52]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:40:52]

column:22 ; row:0  [2015-10-26 09:40:52]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:40:53]

column:22 ; row:30  [2015-10-26 09:40:53]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:40:53]

column:20 ; row:1  [2015-10-26 09:40:53]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100834408' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:40:54]

column:20 ; row:1  [2015-10-26 09:40:54]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 09:40:55]

column:22 ; row:1436  [2015-10-26 09:40:56]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:40:56]

column:20 ; row:1  [2015-10-26 09:40:56]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:40:56]

column:20 ; row:1  [2015-10-26 09:40:56]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:41:15]

column:1 ; row:1  [2015-10-26 09:41:15]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:41:15]

column:23 ; row:0  [2015-10-26 09:41:15]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('5193427810703') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('5193427810703') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:41:16]

updated row:0  [2015-10-26 09:41:17]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('5193427810703') order by osh.shipment_no   [2015-10-26 09:41:17]

column:23 ; row:0  [2015-10-26 09:41:17]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('5193427810703') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('5193427810703') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:41:24]

updated row:0  [2015-10-26 09:41:24]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('5193427810703') order by osh.shipment_no   [2015-10-26 09:41:24]

column:23 ; row:0  [2015-10-26 09:41:24]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:42:00]

column:2 ; row:1  [2015-10-26 09:42:00]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:42:07]

column:2 ; row:1  [2015-10-26 09:42:07]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:42:10]

column:6 ; row:1  [2015-10-26 09:42:10]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:42:14]

column:1 ; row:1  [2015-10-26 09:42:14]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:42:14]

column:22 ; row:0  [2015-10-26 09:42:14]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:42:15]

column:22 ; row:30  [2015-10-26 09:42:15]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:42:15]

column:20 ; row:1  [2015-10-26 09:42:15]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:47:22]

column:2 ; row:1  [2015-10-26 09:47:22]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:47:26]

column:6 ; row:1  [2015-10-26 09:47:26]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='出库复核'   [2015-10-26 09:47:27]

column:1 ; row:1  [2015-10-26 09:47:28]

select osh.TRANSFER_ORDER_NO 运单号,osd.shipment_no 出库单号,osd.shipment_line_no 行号,bs.storer_name 货主,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' end 状态,bi.item_bar_code 条码,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,osd.PICKED_QTY 拣货数量,osd.OQC_QTY 复核数量,biu.unit_name 单位,bi.item_name 商品名称,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code inner join bas_storer bs on osh.storer_code=bs.storer_code where osh.CHECK_BY_USER='admin' and osh.WAREHOUSE_CODE='hz' and osh.STATUS<'800'   order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:28]

column:19 ; row:0  [2015-10-26 09:47:28]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 09:47:28]

column:1 ; row:1  [2015-10-26 09:47:28]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 09:47:28]

column:22 ; row:0  [2015-10-26 09:47:29]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:47:29]

column:22 ; row:30  [2015-10-26 09:47:29]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:30]

column:20 ; row:1  [2015-10-26 09:47:30]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 09:47:36]

column:22 ; row:1436  [2015-10-26 09:47:37]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:37]

column:20 ; row:1  [2015-10-26 09:47:37]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101376272' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:42]

column:20 ; row:1  [2015-10-26 09:47:42]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 09:47:43]

column:22 ; row:1436  [2015-10-26 09:47:45]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:45]

column:20 ; row:1  [2015-10-26 09:47:45]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101355880' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:49]

column:20 ; row:1  [2015-10-26 09:47:49]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 09:47:50]

column:22 ; row:1436  [2015-10-26 09:47:52]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:52]

column:20 ; row:1  [2015-10-26 09:47:52]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 09:47:54]

column:22 ; row:30  [2015-10-26 09:47:54]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:54]

column:20 ; row:1  [2015-10-26 09:47:54]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015101315944' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:47:57]

column:20 ; row:1  [2015-10-26 09:47:57]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:49:12]

column:2 ; row:1  [2015-10-26 09:49:12]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:49:16]

column:6 ; row:1  [2015-10-26 09:49:16]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='库存查询'   [2015-10-26 09:49:19]

column:1 ; row:1  [2015-10-26 09:49:19]

select ii.WAREHOUSE_CODE 仓库编码,bw.WAREHOUSE_NAME 仓库名称,ii.STORER_CODE 货主编码,bs.STORER_NAME 货主名称,ii.LOCATION_CODE 库位编码,ii.CONTAINER_CODE 箱号,ii.ITEM_CODE 商品编码,bi.ITEM_BAR_CODE 商品条码,bi.ITEM_NAME 商品名称,bi.ITEM_SPEC 商品规格,ii.ON_HAND_QTY 库存总数,ii.ALLOCATED_QTY 已分配数量,ii.PICKED_QTY 已拣货数量,ii.INACTIVE_QTY 冻结数量,biu.unit_name 单位,ii.lot_no 批次号,il.LOTTABLE01 批次属性1,il.LOTTABLE02 批次属性2,il.LOTTABLE03 批次属性3,il.LOTTABLE04 批次属性4,il.LOTTABLE05 批次属性5,il.LOTTABLE06 批次属性6,il.LOTTABLE07 批次属性7,il.LOTTABLE08 批次属性8,il.LOTTABLE09 批次属性9,il.LOTTABLE10 批次属性10 ,ii.`STATUS` 库存状态,ii.QUALITY 库存质量,ii.INV_INVENTORY_ID 库存ID  from inv_inventory ii inner join bas_location bl on ii.LOCATION_CODE=bl.LOCATION_CODE and ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE inner join bas_item bi on ii.ITEM_CODE=bi.ITEM_CODE and ii.STORER_CODE=bi.STORER_CODE inner join bas_item_unit biu on bi.UNIT_CODE = biu.unit_code inner join inv_lot il on ii.LOT_NO=il.LOT_NO inner join bas_storer bs on ii.STORER_CODE=bs.STORER_CODE inner join bas_warehouse bw on ii.WAREHOUSE_CODE=bw.WAREHOUSE_CODE where 1=1 and ii.warehouse_code='hz'  and 1<>1   [2015-10-26 09:49:19]

column:29 ; row:0  [2015-10-26 09:49:19]

select * from tmp_jd_inv  [2015-10-26 09:49:20]

column:19 ; row:659  [2015-10-26 09:49:21]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='库存查询'   [2015-10-26 09:50:31]

column:1 ; row:1  [2015-10-26 09:50:31]

select ii.WAREHOUSE_CODE 仓库编码,bw.WAREHOUSE_NAME 仓库名称,ii.STORER_CODE 货主编码,bs.STORER_NAME 货主名称,ii.LOCATION_CODE 库位编码,ii.CONTAINER_CODE 箱号,ii.ITEM_CODE 商品编码,bi.ITEM_BAR_CODE 商品条码,bi.ITEM_NAME 商品名称,bi.ITEM_SPEC 商品规格,ii.ON_HAND_QTY 库存总数,ii.ALLOCATED_QTY 已分配数量,ii.PICKED_QTY 已拣货数量,ii.INACTIVE_QTY 冻结数量,biu.unit_name 单位,ii.lot_no 批次号,il.LOTTABLE01 批次属性1,il.LOTTABLE02 批次属性2,il.LOTTABLE03 批次属性3,il.LOTTABLE04 批次属性4,il.LOTTABLE05 批次属性5,il.LOTTABLE06 批次属性6,il.LOTTABLE07 批次属性7,il.LOTTABLE08 批次属性8,il.LOTTABLE09 批次属性9,il.LOTTABLE10 批次属性10 ,ii.`STATUS` 库存状态,ii.QUALITY 库存质量,ii.INV_INVENTORY_ID 库存ID  from inv_inventory ii inner join bas_location bl on ii.LOCATION_CODE=bl.LOCATION_CODE and ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE inner join bas_item bi on ii.ITEM_CODE=bi.ITEM_CODE and ii.STORER_CODE=bi.STORER_CODE inner join bas_item_unit biu on bi.UNIT_CODE = biu.unit_code inner join inv_lot il on ii.LOT_NO=il.LOT_NO inner join bas_storer bs on ii.STORER_CODE=bs.STORER_CODE inner join bas_warehouse bw on ii.WAREHOUSE_CODE=bw.WAREHOUSE_CODE where 1=1 and ii.warehouse_code='hz'  and 1<>1   [2015-10-26 09:50:32]

column:29 ; row:0  [2015-10-26 09:50:32]

select * from tmp_jd_inv  [2015-10-26 09:50:37]

column:19 ; row:659  [2015-10-26 09:50:37]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='库存查询'   [2015-10-26 09:50:45]

column:1 ; row:1  [2015-10-26 09:50:45]

select ii.WAREHOUSE_CODE 仓库编码,bw.WAREHOUSE_NAME 仓库名称,ii.STORER_CODE 货主编码,bs.STORER_NAME 货主名称,ii.LOCATION_CODE 库位编码,ii.CONTAINER_CODE 箱号,ii.ITEM_CODE 商品编码,bi.ITEM_BAR_CODE 商品条码,bi.ITEM_NAME 商品名称,bi.ITEM_SPEC 商品规格,ii.ON_HAND_QTY 库存总数,ii.ALLOCATED_QTY 已分配数量,ii.PICKED_QTY 已拣货数量,ii.INACTIVE_QTY 冻结数量,biu.unit_name 单位,ii.lot_no 批次号,il.LOTTABLE01 批次属性1,il.LOTTABLE02 批次属性2,il.LOTTABLE03 批次属性3,il.LOTTABLE04 批次属性4,il.LOTTABLE05 批次属性5,il.LOTTABLE06 批次属性6,il.LOTTABLE07 批次属性7,il.LOTTABLE08 批次属性8,il.LOTTABLE09 批次属性9,il.LOTTABLE10 批次属性10 ,ii.`STATUS` 库存状态,ii.QUALITY 库存质量,ii.INV_INVENTORY_ID 库存ID  from inv_inventory ii inner join bas_location bl on ii.LOCATION_CODE=bl.LOCATION_CODE and ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE inner join bas_item bi on ii.ITEM_CODE=bi.ITEM_CODE and ii.STORER_CODE=bi.STORER_CODE inner join bas_item_unit biu on bi.UNIT_CODE = biu.unit_code inner join inv_lot il on ii.LOT_NO=il.LOT_NO inner join bas_storer bs on ii.STORER_CODE=bs.STORER_CODE inner join bas_warehouse bw on ii.WAREHOUSE_CODE=bw.WAREHOUSE_CODE where 1=1 and ii.warehouse_code='hz'  and 1<>1   [2015-10-26 09:50:45]

column:29 ; row:0  [2015-10-26 09:50:45]

select * from tmp_jd_inv  [2015-10-26 09:50:46]

column:19 ; row:659  [2015-10-26 09:50:46]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:51:39]

column:1 ; row:1  [2015-10-26 09:51:39]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:51:39]

column:23 ; row:0  [2015-10-26 09:51:39]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:52:39]

column:2 ; row:1  [2015-10-26 09:52:39]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:52:44]

column:6 ; row:1  [2015-10-26 09:52:44]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:52:46]

column:1 ; row:1  [2015-10-26 09:52:46]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:52:46]

column:23 ; row:0  [2015-10-26 09:52:46]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:52:54]

updated row:0  [2015-10-26 09:52:55]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:52:55]

column:23 ; row:2  [2015-10-26 09:52:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:52:55]

column:18 ; row:2  [2015-10-26 09:52:55]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 09:53:04]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 09:53:04]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000145','Normal Wave','hz','admin',now()  [2015-10-26 09:53:04]

updated row:1  [2015-10-26 09:53:06]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000145'),'W000000145','hz','NAMA2015102329279','admin',now()   [2015-10-26 09:53:06]

updated row:1  [2015-10-26 09:53:07]

update oub_shipment_header set status='150', wave_no='W000000145' where shipment_no='NAMA2015102329279'   [2015-10-26 09:53:07]

updated row:1  [2015-10-26 09:53:08]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:53:08]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:53:08]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000145','0000003770',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:08]

updated row:1  [2015-10-26 09:53:08]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 09:53:08]

column:15 ; row:2  [2015-10-26 09:53:08]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:08]

column:10 ; row:1  [2015-10-26 09:53:08]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 09:53:08]

updated row:1  [2015-10-26 09:53:08]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003770'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003770',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:53:08]

updated row:1  [2015-10-26 09:53:09]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:53:09]

updated row:1  [2015-10-26 09:53:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:09]

column:10 ; row:4  [2015-10-26 09:53:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 09:53:09]

updated row:1  [2015-10-26 09:53:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003770'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003770',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:53:09]

updated row:1  [2015-10-26 09:53:09]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:53:09]

updated row:1  [2015-10-26 09:53:09]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000145'),'W000000145','hz','NAMA2015102345659','admin',now()   [2015-10-26 09:53:09]

updated row:1  [2015-10-26 09:53:09]

update oub_shipment_header set status='150', wave_no='W000000145' where shipment_no='NAMA2015102345659'   [2015-10-26 09:53:09]

updated row:1  [2015-10-26 09:53:10]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:53:10]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:53:10]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000145','0000003771',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:10]

updated row:1  [2015-10-26 09:53:10]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 09:53:10]

column:15 ; row:2  [2015-10-26 09:53:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:10]

column:10 ; row:1  [2015-10-26 09:53:10]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 09:53:10]

updated row:1  [2015-10-26 09:53:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003771'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003771',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:53:10]

updated row:1  [2015-10-26 09:53:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:53:10]

updated row:1  [2015-10-26 09:53:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:10]

column:10 ; row:2  [2015-10-26 09:53:10]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 09:53:10]

updated row:1  [2015-10-26 09:53:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003771'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003771',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:53:10]

updated row:1  [2015-10-26 09:53:11]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:53:11]

updated row:1  [2015-10-26 09:53:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 09:53:12]

column:2 ; row:2  [2015-10-26 09:53:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 09:53:12]

updated row:1  [2015-10-26 09:53:12]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:12]

updated row:0  [2015-10-26 09:53:12]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:12]

updated row:0  [2015-10-26 09:53:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:53:13]

column:23 ; row:2  [2015-10-26 09:53:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:13]

column:18 ; row:2  [2015-10-26 09:53:13]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 09:53:13]

column:2 ; row:2  [2015-10-26 09:53:13]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 09:53:13]

updated row:1  [2015-10-26 09:53:13]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:13]

updated row:0  [2015-10-26 09:53:13]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:13]

updated row:0  [2015-10-26 09:53:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:53:13]

column:23 ; row:2  [2015-10-26 09:53:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:14]

column:18 ; row:2  [2015-10-26 09:53:14]

select * from sys_process_history where 1<>1  [2015-10-26 09:53:14]

column:48 ; row:0  [2015-10-26 09:53:14]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000145','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 09:53:14]

updated row:1  [2015-10-26 09:53:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:24]

column:18 ; row:2  [2015-10-26 09:53:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:25]

column:18 ; row:2  [2015-10-26 09:53:25]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000145') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:28]

column:9 ; row:2  [2015-10-26 09:53:28]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:53:28]

updated row:1  [2015-10-26 09:53:28]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:53:28]

updated row:1  [2015-10-26 09:53:28]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:53:28]

updated row:1  [2015-10-26 09:53:28]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:53:28]

updated row:0  [2015-10-26 09:53:28]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:28]

updated row:1  [2015-10-26 09:53:29]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:53:29]

updated row:1  [2015-10-26 09:53:29]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:53:29]

updated row:1  [2015-10-26 09:53:29]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:53:29]

updated row:1  [2015-10-26 09:53:29]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:53:29]

updated row:1  [2015-10-26 09:53:29]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:29]

updated row:0  [2015-10-26 09:53:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:31]

column:18 ; row:2  [2015-10-26 09:53:31]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000145') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:33]

column:9 ; row:2  [2015-10-26 09:53:33]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:33]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:33]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:33]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:53:33]

updated row:0  [2015-10-26 09:53:33]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:33]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:33]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:33]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:53:33]

updated row:1  [2015-10-26 09:53:34]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:53:34]

updated row:1  [2015-10-26 09:53:34]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:34]

updated row:0  [2015-10-26 09:53:34]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 09:53:41]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 09:53:42]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000146','Normal Wave','hz','admin',now()  [2015-10-26 09:53:42]

updated row:1  [2015-10-26 09:53:42]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000146'),'W000000146','hz','NAMA2015102329279','admin',now()   [2015-10-26 09:53:42]

updated row:1  [2015-10-26 09:53:42]

update oub_shipment_header set status='150', wave_no='W000000146' where shipment_no='NAMA2015102329279'   [2015-10-26 09:53:42]

updated row:1  [2015-10-26 09:53:42]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:53:42]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:53:42]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000146','0000003772',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:42]

updated row:1  [2015-10-26 09:53:42]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 09:53:42]

column:15 ; row:2  [2015-10-26 09:53:43]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:43]

column:10 ; row:1  [2015-10-26 09:53:43]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003772'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003772',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:43]

column:10 ; row:4  [2015-10-26 09:53:43]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003772'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003772',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000146'),'W000000146','hz','NAMA2015102345659','admin',now()   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:43]

update oub_shipment_header set status='150', wave_no='W000000146' where shipment_no='NAMA2015102345659'   [2015-10-26 09:53:43]

updated row:1  [2015-10-26 09:53:44]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:53:44]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:53:44]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000146','0000003773',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:44]

updated row:1  [2015-10-26 09:53:44]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 09:53:44]

column:15 ; row:2  [2015-10-26 09:53:44]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:44]

column:10 ; row:1  [2015-10-26 09:53:44]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 09:53:44]

updated row:1  [2015-10-26 09:53:44]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003773'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003773',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:53:44]

updated row:1  [2015-10-26 09:53:44]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:53:44]

updated row:1  [2015-10-26 09:53:44]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:53:45]

column:10 ; row:2  [2015-10-26 09:53:45]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 09:53:45]

updated row:1  [2015-10-26 09:53:45]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003773'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003773',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:53:45]

updated row:1  [2015-10-26 09:53:45]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:53:45]

updated row:1  [2015-10-26 09:53:45]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 09:53:45]

column:2 ; row:2  [2015-10-26 09:53:45]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 09:53:45]

updated row:1  [2015-10-26 09:53:45]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:45]

updated row:0  [2015-10-26 09:53:45]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:53:45]

updated row:0  [2015-10-26 09:53:45]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:53:45]

column:23 ; row:2  [2015-10-26 09:53:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:45]

column:18 ; row:2  [2015-10-26 09:53:46]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 09:53:46]

column:2 ; row:2  [2015-10-26 09:53:46]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 09:53:46]

updated row:1  [2015-10-26 09:53:46]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:46]

updated row:0  [2015-10-26 09:53:46]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:53:46]

updated row:0  [2015-10-26 09:53:46]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:53:46]

column:23 ; row:2  [2015-10-26 09:53:46]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:53:46]

column:18 ; row:2  [2015-10-26 09:53:46]

select * from sys_process_history where 1<>1  [2015-10-26 09:53:46]

column:48 ; row:0  [2015-10-26 09:53:46]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000146','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 09:53:46]

updated row:1  [2015-10-26 09:53:46]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 09:54:42]

column:2 ; row:1  [2015-10-26 09:54:42]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 09:54:46]

column:6 ; row:1  [2015-10-26 09:54:46]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 09:54:48]

column:1 ; row:1  [2015-10-26 09:54:48]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 09:54:48]

column:23 ; row:0  [2015-10-26 09:54:48]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 09:54:50]

updated row:0  [2015-10-26 09:54:51]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:54:51]

column:23 ; row:2  [2015-10-26 09:54:51]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:54:51]

column:18 ; row:2  [2015-10-26 09:54:51]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000146') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:54:56]

column:9 ; row:2  [2015-10-26 09:54:56]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:54:56]

updated row:1  [2015-10-26 09:54:56]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:54:56]

updated row:1  [2015-10-26 09:54:56]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:54:56]

updated row:1  [2015-10-26 09:54:57]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:54:57]

updated row:0  [2015-10-26 09:54:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:54:57]

updated row:1  [2015-10-26 09:54:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:54:57]

updated row:1  [2015-10-26 09:54:57]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:54:57]

updated row:1  [2015-10-26 09:54:57]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:54:57]

updated row:1  [2015-10-26 09:54:57]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:54:57]

updated row:1  [2015-10-26 09:54:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:54:57]

updated row:0  [2015-10-26 09:54:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:55:01]

column:18 ; row:2  [2015-10-26 09:55:01]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000146') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:03]

column:9 ; row:2  [2015-10-26 09:55:03]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:03]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:03]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:03]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:55:03]

updated row:0  [2015-10-26 09:55:03]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:03]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:03]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:03]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:55:03]

updated row:1  [2015-10-26 09:55:04]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:55:04]

updated row:1  [2015-10-26 09:55:04]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:04]

updated row:0  [2015-10-26 09:55:04]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 09:55:09]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 09:55:09]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000147','Normal Wave','hz','admin',now()  [2015-10-26 09:55:10]

updated row:1  [2015-10-26 09:55:10]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000147'),'W000000147','hz','NAMA2015102329279','admin',now()   [2015-10-26 09:55:10]

updated row:1  [2015-10-26 09:55:10]

update oub_shipment_header set status='150', wave_no='W000000147' where shipment_no='NAMA2015102329279'   [2015-10-26 09:55:10]

updated row:1  [2015-10-26 09:55:10]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:55:10]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:55:10]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000147','0000003774',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:55:10]

updated row:1  [2015-10-26 09:55:10]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 09:55:10]

column:15 ; row:2  [2015-10-26 09:55:11]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:55:11]

column:10 ; row:1  [2015-10-26 09:55:11]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 09:55:11]

updated row:1  [2015-10-26 09:55:11]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003774'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003774',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:55:11]

updated row:1  [2015-10-26 09:55:11]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:55:11]

updated row:1  [2015-10-26 09:55:11]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:55:11]

column:10 ; row:4  [2015-10-26 09:55:11]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 09:55:11]

updated row:1  [2015-10-26 09:55:11]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003774'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003774',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:55:11]

updated row:1  [2015-10-26 09:55:12]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:55:12]

updated row:1  [2015-10-26 09:55:12]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000147'),'W000000147','hz','NAMA2015102345659','admin',now()   [2015-10-26 09:55:12]

updated row:1  [2015-10-26 09:55:13]

update oub_shipment_header set status='150', wave_no='W000000147' where shipment_no='NAMA2015102345659'   [2015-10-26 09:55:13]

updated row:1  [2015-10-26 09:55:13]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:55:13]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:55:13]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000147','0000003775',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:13]

updated row:1  [2015-10-26 09:55:13]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 09:55:13]

column:15 ; row:2  [2015-10-26 09:55:13]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:55:13]

column:10 ; row:1  [2015-10-26 09:55:13]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 09:55:13]

updated row:1  [2015-10-26 09:55:13]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003775'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003775',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:55:13]

updated row:1  [2015-10-26 09:55:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:55:13]

updated row:1  [2015-10-26 09:55:13]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:55:13]

column:10 ; row:2  [2015-10-26 09:55:13]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 09:55:14]

updated row:1  [2015-10-26 09:55:14]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003775'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003775',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:55:14]

updated row:1  [2015-10-26 09:55:14]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:55:14]

updated row:1  [2015-10-26 09:55:14]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 09:55:14]

column:2 ; row:2  [2015-10-26 09:55:14]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 09:55:14]

updated row:1  [2015-10-26 09:55:14]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:55:14]

updated row:0  [2015-10-26 09:55:14]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:55:14]

updated row:0  [2015-10-26 09:55:14]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:55:14]

column:23 ; row:2  [2015-10-26 09:55:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:55:14]

column:18 ; row:2  [2015-10-26 09:55:14]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 09:55:14]

column:2 ; row:2  [2015-10-26 09:55:15]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 09:55:15]

updated row:1  [2015-10-26 09:55:15]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:15]

updated row:0  [2015-10-26 09:55:15]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:15]

updated row:0  [2015-10-26 09:55:15]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:55:15]

column:23 ; row:2  [2015-10-26 09:55:15]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:55:15]

column:18 ; row:2  [2015-10-26 09:55:15]

select * from sys_process_history where 1<>1  [2015-10-26 09:55:15]

column:48 ; row:0  [2015-10-26 09:55:16]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000147','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 09:55:16]

updated row:1  [2015-10-26 09:55:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:55:49]

column:18 ; row:2  [2015-10-26 09:55:50]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000147') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:55:51]

column:9 ; row:2  [2015-10-26 09:55:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:55:51]

updated row:1  [2015-10-26 09:55:52]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:55:52]

updated row:1  [2015-10-26 09:55:52]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:55:52]

updated row:1  [2015-10-26 09:55:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:55:53]

updated row:0  [2015-10-26 09:55:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:55:53]

updated row:1  [2015-10-26 09:55:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:55:53]

updated row:1  [2015-10-26 09:55:53]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:55:53]

updated row:1  [2015-10-26 09:55:53]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:55:53]

updated row:1  [2015-10-26 09:55:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:55:53]

updated row:1  [2015-10-26 09:55:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:55:53]

updated row:0  [2015-10-26 09:55:53]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:55:55]

column:18 ; row:2  [2015-10-26 09:55:55]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000147') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:57]

column:9 ; row:2  [2015-10-26 09:55:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:55:57]

updated row:1  [2015-10-26 09:55:57]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:55:57]

updated row:1  [2015-10-26 09:55:57]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:55:58]

updated row:1  [2015-10-26 09:55:58]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:55:58]

updated row:0  [2015-10-26 09:55:58]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:58]

updated row:1  [2015-10-26 09:55:58]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:55:58]

updated row:1  [2015-10-26 09:55:58]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:55:58]

updated row:1  [2015-10-26 09:55:58]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:55:58]

updated row:1  [2015-10-26 09:55:58]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:55:58]

updated row:1  [2015-10-26 09:55:59]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:55:59]

updated row:0  [2015-10-26 09:55:59]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 09:56:07]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 09:56:07]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000148','Normal Wave','hz','admin',now()  [2015-10-26 09:56:07]

updated row:1  [2015-10-26 09:56:07]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000148'),'W000000148','hz','NAMA2015102329279','admin',now()   [2015-10-26 09:56:07]

updated row:1  [2015-10-26 09:56:07]

update oub_shipment_header set status='150', wave_no='W000000148' where shipment_no='NAMA2015102329279'   [2015-10-26 09:56:07]

updated row:1  [2015-10-26 09:56:07]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:56:07]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:56:07]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000148','0000003776',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:56:07]

updated row:1  [2015-10-26 09:56:07]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 09:56:07]

column:15 ; row:2  [2015-10-26 09:56:07]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:56:08]

column:10 ; row:1  [2015-10-26 09:56:08]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003776'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003776',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:56:08]

column:10 ; row:4  [2015-10-26 09:56:08]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003776'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003776',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000148'),'W000000148','hz','NAMA2015102345659','admin',now()   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:08]

update oub_shipment_header set status='150', wave_no='W000000148' where shipment_no='NAMA2015102345659'   [2015-10-26 09:56:08]

updated row:1  [2015-10-26 09:56:09]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:56:09]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:56:09]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000148','0000003777',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:56:09]

updated row:1  [2015-10-26 09:56:09]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 09:56:09]

column:15 ; row:2  [2015-10-26 09:56:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:56:09]

column:10 ; row:1  [2015-10-26 09:56:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 09:56:09]

updated row:1  [2015-10-26 09:56:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003777'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003777',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:56:09]

updated row:1  [2015-10-26 09:56:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:56:10]

updated row:1  [2015-10-26 09:56:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:56:10]

column:10 ; row:2  [2015-10-26 09:56:10]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 09:56:10]

updated row:1  [2015-10-26 09:56:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003777'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003777',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:56:10]

updated row:1  [2015-10-26 09:56:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:56:10]

updated row:1  [2015-10-26 09:56:10]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 09:56:10]

column:2 ; row:2  [2015-10-26 09:56:10]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 09:56:10]

updated row:1  [2015-10-26 09:56:10]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:56:10]

updated row:0  [2015-10-26 09:56:10]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:56:10]

updated row:0  [2015-10-26 09:56:11]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:56:11]

column:23 ; row:2  [2015-10-26 09:56:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:56:11]

column:18 ; row:2  [2015-10-26 09:56:11]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 09:56:11]

column:2 ; row:2  [2015-10-26 09:56:11]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 09:56:11]

updated row:1  [2015-10-26 09:56:11]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:56:11]

updated row:0  [2015-10-26 09:56:11]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:56:11]

updated row:0  [2015-10-26 09:56:11]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:56:11]

column:23 ; row:2  [2015-10-26 09:56:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:56:11]

column:18 ; row:2  [2015-10-26 09:56:11]

select * from sys_process_history where 1<>1  [2015-10-26 09:56:11]

column:48 ; row:0  [2015-10-26 09:56:12]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000148','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 09:56:12]

updated row:1  [2015-10-26 09:56:12]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000148') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:57:03]

column:9 ; row:2  [2015-10-26 09:57:03]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:57:03]

updated row:1  [2015-10-26 09:57:04]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:57:04]

updated row:0  [2015-10-26 09:57:04]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 09:57:04]

updated row:1  [2015-10-26 09:57:04]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:57:04]

updated row:0  [2015-10-26 09:57:04]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:57:06]

column:18 ; row:2  [2015-10-26 09:57:06]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000148') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:57:08]

column:9 ; row:2  [2015-10-26 09:57:08]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:57:08]

updated row:1  [2015-10-26 09:57:08]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 09:57:08]

updated row:1  [2015-10-26 09:57:08]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:57:08]

updated row:1  [2015-10-26 09:57:09]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:57:09]

updated row:0  [2015-10-26 09:57:09]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:57:09]

updated row:1  [2015-10-26 09:57:09]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:57:09]

updated row:1  [2015-10-26 09:57:09]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 09:57:09]

updated row:1  [2015-10-26 09:57:09]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:57:09]

updated row:1  [2015-10-26 09:57:09]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 09:57:09]

updated row:1  [2015-10-26 09:57:09]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:57:09]

updated row:0  [2015-10-26 09:57:09]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 09:57:16]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 09:57:16]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000149','Normal Wave','hz','admin',now()  [2015-10-26 09:57:16]

updated row:1  [2015-10-26 09:57:16]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000149'),'W000000149','hz','NAMA2015102329279','admin',now()   [2015-10-26 09:57:16]

updated row:1  [2015-10-26 09:57:16]

update oub_shipment_header set status='150', wave_no='W000000149' where shipment_no='NAMA2015102329279'   [2015-10-26 09:57:16]

updated row:1  [2015-10-26 09:57:17]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:57:17]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:57:17]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000149','0000003778',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:57:17]

updated row:1  [2015-10-26 09:57:17]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 09:57:17]

column:15 ; row:2  [2015-10-26 09:57:17]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:57:17]

column:10 ; row:1  [2015-10-26 09:57:17]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 09:57:17]

updated row:1  [2015-10-26 09:57:17]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003778'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003778',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:57:17]

updated row:1  [2015-10-26 09:57:18]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 09:57:18]

updated row:1  [2015-10-26 09:57:18]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:57:18]

column:10 ; row:4  [2015-10-26 09:57:18]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 09:57:18]

updated row:1  [2015-10-26 09:57:19]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003778'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003778',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:57:19]

updated row:1  [2015-10-26 09:57:19]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 09:57:19]

updated row:1  [2015-10-26 09:57:19]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000149'),'W000000149','hz','NAMA2015102345659','admin',now()   [2015-10-26 09:57:19]

updated row:1  [2015-10-26 09:57:19]

update oub_shipment_header set status='150', wave_no='W000000149' where shipment_no='NAMA2015102345659'   [2015-10-26 09:57:19]

updated row:1  [2015-10-26 09:57:19]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 09:57:19]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 09:57:19]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000149','0000003779',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:57:19]

updated row:1  [2015-10-26 09:57:19]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 09:57:19]

column:15 ; row:2  [2015-10-26 09:57:19]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:57:19]

column:10 ; row:1  [2015-10-26 09:57:19]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003779'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003779',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 09:57:20]

column:10 ; row:2  [2015-10-26 09:57:20]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003779'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003779',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 09:57:20]

column:2 ; row:2  [2015-10-26 09:57:20]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 09:57:20]

updated row:1  [2015-10-26 09:57:20]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:57:20]

updated row:0  [2015-10-26 09:57:21]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 09:57:21]

updated row:0  [2015-10-26 09:57:21]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:57:21]

column:23 ; row:2  [2015-10-26 09:57:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:57:21]

column:18 ; row:2  [2015-10-26 09:57:21]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 09:57:21]

column:2 ; row:2  [2015-10-26 09:57:21]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 09:57:21]

updated row:1  [2015-10-26 09:57:22]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:57:22]

updated row:0  [2015-10-26 09:57:22]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 09:57:22]

updated row:0  [2015-10-26 09:57:22]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 09:57:22]

column:23 ; row:2  [2015-10-26 09:57:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:57:22]

column:18 ; row:2  [2015-10-26 09:57:22]

select * from sys_process_history where 1<>1  [2015-10-26 09:57:22]

column:48 ; row:0  [2015-10-26 09:57:22]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000149','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 09:57:22]

updated row:1  [2015-10-26 09:57:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:59:30]

column:18 ; row:2  [2015-10-26 09:59:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 09:59:31]

column:18 ; row:2  [2015-10-26 09:59:32]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:04]

column:18 ; row:2  [2015-10-26 10:00:04]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:05]

column:18 ; row:2  [2015-10-26 10:00:05]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:06]

column:18 ; row:2  [2015-10-26 10:00:07]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:07]

column:18 ; row:2  [2015-10-26 10:00:07]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:08]

column:18 ; row:2  [2015-10-26 10:00:08]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:09]

column:18 ; row:2  [2015-10-26 10:00:09]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:10]

column:18 ; row:2  [2015-10-26 10:00:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:00:11]

column:18 ; row:2  [2015-10-26 10:00:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:17:49]

column:18 ; row:2  [2015-10-26 10:17:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:17:50]

column:18 ; row:2  [2015-10-26 10:17:50]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:17:51]

column:18 ; row:2  [2015-10-26 10:17:51]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000149') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:17:53]

column:9 ; row:2  [2015-10-26 10:17:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:17:53]

updated row:0  [2015-10-26 10:17:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:17:53]

updated row:1  [2015-10-26 10:17:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:17:53]

updated row:0  [2015-10-26 10:17:53]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:17:55]

column:18 ; row:2  [2015-10-26 10:17:55]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000149') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:17:57]

column:9 ; row:2  [2015-10-26 10:17:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:17:57]

updated row:1  [2015-10-26 10:17:57]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:17:57]

updated row:1  [2015-10-26 10:17:57]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:17:57]

updated row:1  [2015-10-26 10:17:57]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:17:57]

updated row:0  [2015-10-26 10:17:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:17:57]

updated row:1  [2015-10-26 10:17:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:17:57]

updated row:1  [2015-10-26 10:17:58]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:17:58]

updated row:1  [2015-10-26 10:17:58]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:17:58]

updated row:1  [2015-10-26 10:17:58]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:17:58]

updated row:1  [2015-10-26 10:17:58]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:17:58]

updated row:0  [2015-10-26 10:17:58]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:18:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:18:00]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000150','Normal Wave','hz','admin',now()  [2015-10-26 10:18:00]

updated row:1  [2015-10-26 10:18:00]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000150'),'W000000150','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:18:00]

updated row:1  [2015-10-26 10:18:00]

update oub_shipment_header set status='150', wave_no='W000000150' where shipment_no='NAMA2015102329279'   [2015-10-26 10:18:00]

updated row:1  [2015-10-26 10:18:00]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:18:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:18:00]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000150','0000003780',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:18:00]

updated row:1  [2015-10-26 10:18:00]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:18:00]

column:15 ; row:2  [2015-10-26 10:18:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:18:01]

column:10 ; row:1  [2015-10-26 10:18:01]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003780'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003780',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:18:01]

column:10 ; row:4  [2015-10-26 10:18:01]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003780'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003780',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000150'),'W000000150','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:01]

update oub_shipment_header set status='150', wave_no='W000000150' where shipment_no='NAMA2015102345659'   [2015-10-26 10:18:01]

updated row:1  [2015-10-26 10:18:02]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:18:02]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:18:02]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000150','0000003781',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:18:02]

column:15 ; row:2  [2015-10-26 10:18:02]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:18:02]

column:10 ; row:1  [2015-10-26 10:18:02]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003781'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003781',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:18:02]

column:10 ; row:2  [2015-10-26 10:18:02]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003781'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003781',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:18:02]

column:2 ; row:2  [2015-10-26 10:18:02]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:18:02]

updated row:1  [2015-10-26 10:18:02]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:18:02]

updated row:0  [2015-10-26 10:18:03]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:18:03]

updated row:0  [2015-10-26 10:18:03]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:18:03]

column:23 ; row:2  [2015-10-26 10:18:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:18:03]

column:18 ; row:2  [2015-10-26 10:18:03]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:18:03]

column:2 ; row:2  [2015-10-26 10:18:03]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:18:03]

updated row:1  [2015-10-26 10:18:03]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:18:03]

updated row:0  [2015-10-26 10:18:03]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:18:03]

updated row:0  [2015-10-26 10:18:03]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:18:03]

column:23 ; row:2  [2015-10-26 10:18:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:18:03]

column:18 ; row:2  [2015-10-26 10:18:03]

select * from sys_process_history where 1<>1  [2015-10-26 10:18:03]

column:48 ; row:0  [2015-10-26 10:18:03]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000150','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:18:03]

updated row:1  [2015-10-26 10:18:03]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:19:03]

column:2 ; row:1  [2015-10-26 10:19:03]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:19:06]

column:6 ; row:1  [2015-10-26 10:19:06]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:19:09]

column:1 ; row:1  [2015-10-26 10:19:09]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:19:09]

column:23 ; row:0  [2015-10-26 10:19:09]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:19:15]

updated row:0  [2015-10-26 10:19:16]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:19:16]

column:23 ; row:2  [2015-10-26 10:19:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:16]

column:18 ; row:2  [2015-10-26 10:19:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:17]

column:18 ; row:2  [2015-10-26 10:19:17]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000150') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:19]

column:9 ; row:2  [2015-10-26 10:19:19]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:19]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:19]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:19:19]

updated row:0  [2015-10-26 10:19:19]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:19]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:19]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:19:19]

updated row:1  [2015-10-26 10:19:20]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:19:20]

updated row:1  [2015-10-26 10:19:20]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:20]

updated row:0  [2015-10-26 10:19:20]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:22]

column:18 ; row:2  [2015-10-26 10:19:22]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000150') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:23]

column:9 ; row:2  [2015-10-26 10:19:23]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:19:23]

updated row:1  [2015-10-26 10:19:23]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:19:23]

updated row:1  [2015-10-26 10:19:23]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:19:23]

updated row:1  [2015-10-26 10:19:23]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:19:23]

updated row:0  [2015-10-26 10:19:23]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:23]

updated row:1  [2015-10-26 10:19:24]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:19:24]

updated row:1  [2015-10-26 10:19:24]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:19:24]

updated row:1  [2015-10-26 10:19:24]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:19:24]

updated row:1  [2015-10-26 10:19:24]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:19:24]

updated row:1  [2015-10-26 10:19:24]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:24]

updated row:0  [2015-10-26 10:19:24]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:19:28]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:19:28]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000151','Normal Wave','hz','admin',now()  [2015-10-26 10:19:28]

updated row:1  [2015-10-26 10:19:28]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000151'),'W000000151','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:19:28]

updated row:1  [2015-10-26 10:19:28]

update oub_shipment_header set status='150', wave_no='W000000151' where shipment_no='NAMA2015102329279'   [2015-10-26 10:19:28]

updated row:1  [2015-10-26 10:19:28]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:19:28]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:19:28]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000151','0000003782',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:28]

updated row:1  [2015-10-26 10:19:28]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:19:28]

column:15 ; row:2  [2015-10-26 10:19:29]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:19:29]

column:10 ; row:1  [2015-10-26 10:19:29]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003782'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003782',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:19:29]

column:10 ; row:4  [2015-10-26 10:19:29]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003782'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003782',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000151'),'W000000151','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

update oub_shipment_header set status='150', wave_no='W000000151' where shipment_no='NAMA2015102345659'   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:19:29]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:19:29]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000151','0000003783',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:29]

updated row:1  [2015-10-26 10:19:29]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:19:29]

column:15 ; row:2  [2015-10-26 10:19:29]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:19:29]

column:10 ; row:1  [2015-10-26 10:19:30]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003783'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003783',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:19:30]

column:10 ; row:2  [2015-10-26 10:19:30]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003783'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003783',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:19:30]

column:2 ; row:2  [2015-10-26 10:19:30]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:19:30]

updated row:1  [2015-10-26 10:19:30]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:30]

updated row:0  [2015-10-26 10:19:30]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:30]

updated row:0  [2015-10-26 10:19:30]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:19:30]

column:23 ; row:2  [2015-10-26 10:19:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:30]

column:18 ; row:2  [2015-10-26 10:19:30]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:19:30]

column:2 ; row:2  [2015-10-26 10:19:31]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:19:31]

updated row:1  [2015-10-26 10:19:31]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:31]

updated row:0  [2015-10-26 10:19:31]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:31]

updated row:0  [2015-10-26 10:19:31]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:19:31]

column:23 ; row:2  [2015-10-26 10:19:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:31]

column:18 ; row:2  [2015-10-26 10:19:31]

select * from sys_process_history where 1<>1  [2015-10-26 10:19:31]

column:48 ; row:0  [2015-10-26 10:19:31]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000151','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:19:31]

updated row:1  [2015-10-26 10:19:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:43]

column:18 ; row:2  [2015-10-26 10:19:44]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000151') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:50]

column:9 ; row:2  [2015-10-26 10:19:50]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:19:50]

updated row:0  [2015-10-26 10:19:50]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:19:50]

updated row:1  [2015-10-26 10:19:50]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:50]

updated row:0  [2015-10-26 10:19:50]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:19:52]

column:18 ; row:2  [2015-10-26 10:19:52]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000151') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:54]

column:9 ; row:2  [2015-10-26 10:19:55]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:19:55]

updated row:0  [2015-10-26 10:19:55]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:19:55]

updated row:1  [2015-10-26 10:19:55]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:19:55]

updated row:0  [2015-10-26 10:19:55]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:19:58]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:19:58]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000152','Normal Wave','hz','admin',now()  [2015-10-26 10:19:58]

updated row:1  [2015-10-26 10:19:58]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000152'),'W000000152','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:19:58]

updated row:1  [2015-10-26 10:19:58]

update oub_shipment_header set status='150', wave_no='W000000152' where shipment_no='NAMA2015102329279'   [2015-10-26 10:19:58]

updated row:1  [2015-10-26 10:19:59]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:19:59]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:19:59]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000152','0000003784',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:19:59]

column:15 ; row:2  [2015-10-26 10:19:59]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:19:59]

column:10 ; row:1  [2015-10-26 10:19:59]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003784'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003784',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:19:59]

column:10 ; row:4  [2015-10-26 10:19:59]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003784'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003784',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000152'),'W000000152','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:19:59]

updated row:1  [2015-10-26 10:19:59]

update oub_shipment_header set status='150', wave_no='W000000152' where shipment_no='NAMA2015102345659'   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:20:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:20:00]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000152','0000003785',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:20:00]

column:15 ; row:2  [2015-10-26 10:20:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:20:00]

column:10 ; row:1  [2015-10-26 10:20:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003785'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003785',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:20:00]

column:10 ; row:2  [2015-10-26 10:20:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003785'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003785',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:20:00]

updated row:1  [2015-10-26 10:20:00]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:20:00]

column:2 ; row:2  [2015-10-26 10:20:01]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:20:01]

updated row:1  [2015-10-26 10:20:01]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:20:01]

updated row:0  [2015-10-26 10:20:01]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:20:01]

updated row:0  [2015-10-26 10:20:01]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:20:01]

column:23 ; row:2  [2015-10-26 10:20:01]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:20:01]

column:18 ; row:2  [2015-10-26 10:20:01]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:20:01]

column:2 ; row:2  [2015-10-26 10:20:01]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:20:01]

updated row:1  [2015-10-26 10:20:01]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:20:01]

updated row:0  [2015-10-26 10:20:01]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:20:01]

updated row:0  [2015-10-26 10:20:01]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:20:01]

column:23 ; row:2  [2015-10-26 10:20:01]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:20:01]

column:18 ; row:2  [2015-10-26 10:20:01]

select * from sys_process_history where 1<>1  [2015-10-26 10:20:01]

column:48 ; row:0  [2015-10-26 10:20:01]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000152','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:20:01]

updated row:1  [2015-10-26 10:20:01]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:20:38]

column:2 ; row:1  [2015-10-26 10:20:38]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:20:42]

column:6 ; row:1  [2015-10-26 10:20:42]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:20:43]

column:1 ; row:1  [2015-10-26 10:20:44]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:20:44]

column:23 ; row:0  [2015-10-26 10:20:44]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:20:47]

updated row:0  [2015-10-26 10:20:47]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:20:47]

column:23 ; row:2  [2015-10-26 10:20:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:20:47]

column:18 ; row:2  [2015-10-26 10:20:47]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000152') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:20:52]

column:9 ; row:2  [2015-10-26 10:20:52]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:20:52]

updated row:1  [2015-10-26 10:20:52]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:20:52]

updated row:1  [2015-10-26 10:20:52]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:20:53]

updated row:1  [2015-10-26 10:20:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:20:53]

updated row:0  [2015-10-26 10:20:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:20:53]

updated row:1  [2015-10-26 10:20:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:20:53]

updated row:1  [2015-10-26 10:20:53]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:20:53]

updated row:1  [2015-10-26 10:20:53]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:20:53]

updated row:1  [2015-10-26 10:20:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:20:53]

updated row:1  [2015-10-26 10:20:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:20:53]

updated row:0  [2015-10-26 10:20:53]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:20:55]

column:18 ; row:2  [2015-10-26 10:20:55]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000152') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:20:57]

column:9 ; row:2  [2015-10-26 10:20:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:20:57]

updated row:0  [2015-10-26 10:20:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:20:57]

updated row:1  [2015-10-26 10:20:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:20:57]

updated row:0  [2015-10-26 10:20:57]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:21:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:21:00]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000153','Normal Wave','hz','admin',now()  [2015-10-26 10:21:00]

updated row:1  [2015-10-26 10:21:00]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000153'),'W000000153','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:21:00]

updated row:1  [2015-10-26 10:21:00]

update oub_shipment_header set status='150', wave_no='W000000153' where shipment_no='NAMA2015102329279'   [2015-10-26 10:21:00]

updated row:1  [2015-10-26 10:21:00]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:21:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:21:00]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000153','0000003786',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:00]

updated row:1  [2015-10-26 10:21:00]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:21:00]

column:15 ; row:2  [2015-10-26 10:21:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:00]

column:10 ; row:1  [2015-10-26 10:21:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:21:00]

updated row:1  [2015-10-26 10:21:00]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003786'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003786',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:21:00]

updated row:1  [2015-10-26 10:21:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:01]

column:10 ; row:4  [2015-10-26 10:21:01]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003786'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003786',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000153'),'W000000153','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

update oub_shipment_header set status='150', wave_no='W000000153' where shipment_no='NAMA2015102345659'   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:21:01]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:21:01]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000153','0000003787',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:01]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:21:01]

column:15 ; row:2  [2015-10-26 10:21:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:01]

column:10 ; row:1  [2015-10-26 10:21:01]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:21:01]

updated row:1  [2015-10-26 10:21:02]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003787'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003787',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:21:02]

updated row:1  [2015-10-26 10:21:02]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:21:02]

updated row:1  [2015-10-26 10:21:02]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:02]

column:10 ; row:2  [2015-10-26 10:21:02]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:21:02]

updated row:1  [2015-10-26 10:21:02]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003787'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003787',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:21:02]

updated row:1  [2015-10-26 10:21:02]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:21:02]

updated row:1  [2015-10-26 10:21:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:21:02]

column:2 ; row:2  [2015-10-26 10:21:02]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:21:02]

updated row:1  [2015-10-26 10:21:02]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:02]

updated row:0  [2015-10-26 10:21:02]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:02]

updated row:0  [2015-10-26 10:21:02]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:21:02]

column:23 ; row:2  [2015-10-26 10:21:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:02]

column:18 ; row:2  [2015-10-26 10:21:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:21:02]

column:2 ; row:2  [2015-10-26 10:21:03]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:21:03]

updated row:1  [2015-10-26 10:21:03]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:03]

updated row:0  [2015-10-26 10:21:03]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:03]

updated row:0  [2015-10-26 10:21:03]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:21:03]

column:23 ; row:2  [2015-10-26 10:21:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:03]

column:18 ; row:2  [2015-10-26 10:21:03]

select * from sys_process_history where 1<>1  [2015-10-26 10:21:03]

column:48 ; row:0  [2015-10-26 10:21:03]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000153','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:21:03]

updated row:1  [2015-10-26 10:21:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:15]

column:18 ; row:2  [2015-10-26 10:21:15]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000153') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:17]

column:9 ; row:2  [2015-10-26 10:21:17]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:21:17]

updated row:0  [2015-10-26 10:21:17]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:21:17]

updated row:1  [2015-10-26 10:21:17]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:17]

updated row:0  [2015-10-26 10:21:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:20]

column:18 ; row:2  [2015-10-26 10:21:20]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:20]

column:18 ; row:2  [2015-10-26 10:21:20]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000153') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:22]

column:9 ; row:2  [2015-10-26 10:21:22]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:22]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:22]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:22]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:21:22]

updated row:0  [2015-10-26 10:21:22]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:22]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:22]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:22]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:21:22]

updated row:1  [2015-10-26 10:21:23]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:21:23]

updated row:1  [2015-10-26 10:21:23]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:23]

updated row:0  [2015-10-26 10:21:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:25]

column:18 ; row:2  [2015-10-26 10:21:25]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:21:31]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:21:31]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000154','Normal Wave','hz','admin',now()  [2015-10-26 10:21:31]

updated row:1  [2015-10-26 10:21:31]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000154'),'W000000154','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:21:31]

updated row:1  [2015-10-26 10:21:31]

update oub_shipment_header set status='150', wave_no='W000000154' where shipment_no='NAMA2015102329279'   [2015-10-26 10:21:31]

updated row:1  [2015-10-26 10:21:31]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:21:31]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:21:31]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000154','0000003788',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:31]

updated row:1  [2015-10-26 10:21:31]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:21:31]

column:15 ; row:2  [2015-10-26 10:21:31]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:31]

column:10 ; row:1  [2015-10-26 10:21:31]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:21:31]

updated row:1  [2015-10-26 10:21:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003788'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003788',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:32]

column:10 ; row:4  [2015-10-26 10:21:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003788'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003788',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000154'),'W000000154','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

update oub_shipment_header set status='150', wave_no='W000000154' where shipment_no='NAMA2015102345659'   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:21:32]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:21:32]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000154','0000003789',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:32]

updated row:1  [2015-10-26 10:21:32]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:21:32]

column:15 ; row:2  [2015-10-26 10:21:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:33]

column:10 ; row:1  [2015-10-26 10:21:33]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003789'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003789',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:21:33]

column:10 ; row:2  [2015-10-26 10:21:33]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003789'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003789',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:21:33]

column:2 ; row:2  [2015-10-26 10:21:33]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:21:33]

updated row:1  [2015-10-26 10:21:33]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:33]

updated row:0  [2015-10-26 10:21:33]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:33]

updated row:0  [2015-10-26 10:21:34]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:21:34]

column:23 ; row:2  [2015-10-26 10:21:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:34]

column:18 ; row:2  [2015-10-26 10:21:34]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:21:34]

column:2 ; row:2  [2015-10-26 10:21:34]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:21:34]

updated row:1  [2015-10-26 10:21:34]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:34]

updated row:0  [2015-10-26 10:21:34]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:34]

updated row:0  [2015-10-26 10:21:34]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:21:34]

column:23 ; row:2  [2015-10-26 10:21:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:34]

column:18 ; row:2  [2015-10-26 10:21:34]

select * from sys_process_history where 1<>1  [2015-10-26 10:21:34]

column:48 ; row:0  [2015-10-26 10:21:34]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000154','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:21:34]

updated row:1  [2015-10-26 10:21:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:51]

column:18 ; row:2  [2015-10-26 10:21:51]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000154') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:54]

column:9 ; row:2  [2015-10-26 10:21:54]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 10:21:54]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 10:21:54]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 10:21:54]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:21:54]

updated row:0  [2015-10-26 10:21:54]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 10:21:54]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 10:21:54]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 10:21:54]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:21:54]

updated row:1  [2015-10-26 

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:04:02]
ader osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:21:56]

column:18 ; row:2  [2015-10-26 10:21:57]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000154') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:58]

column:9 ; row:2  [2015-10-26 10:21:58]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:21:58]

updated row:1  [2015-10-26 10:21:58]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:21:58]

updated row:1  [2015-10-26 10:21:58]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:21:58]

updated row:1  [2015-10-26 10:21:59]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:21:59]

updated row:0  [2015-10-26 10:21:59]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:59]

updated row:1  [2015-10-26 10:21:59]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:21:59]

updated row:1  [2015-10-26 10:21:59]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:21:59]

updated row:1  [2015-10-26 10:21:59]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:21:59]

updated row:1  [2015-10-26 10:21:59]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:21:59]

updated row:1  [2015-10-26 10:21:59]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:21:59]

updated row:0  [2015-10-26 10:21:59]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:22:09]

column:18 ; row:2  [2015-10-26 10:22:09]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:22:09]

column:18 ; row:2  [2015-10-26 10:22:09]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:24:07]

column:2 ; row:1  [2015-10-26 10:24:07]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:24:11]

column:6 ; row:1  [2015-10-26 10:24:11]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:24:13]

column:1 ; row:1  [2015-10-26 10:24:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:24:13]

column:23 ; row:0  [2015-10-26 10:24:13]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:24:15]

updated row:0  [2015-10-26 10:24:15]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:24:15]

column:23 ; row:2  [2015-10-26 10:24:15]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:24:15]

column:18 ; row:2  [2015-10-26 10:24:15]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:24:29]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:24:29]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000155','Normal Wave','hz','admin',now()  [2015-10-26 10:24:29]

updated row:1  [2015-10-26 10:24:29]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000155'),'W000000155','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:24:29]

updated row:1  [2015-10-26 10:24:29]

update oub_shipment_header set status='150', wave_no='W000000155' where shipment_no='NAMA2015102329279'   [2015-10-26 10:24:29]

updated row:1  [2015-10-26 10:24:29]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:24:29]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:24:29]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000155','0000003790',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:24:29]

updated row:1  [2015-10-26 10:24:29]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:24:29]

column:15 ; row:2  [2015-10-26 10:24:29]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:24:29]

column:10 ; row:1  [2015-10-26 10:24:29]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:24:29]

updated row:1  [2015-10-26 10:24:29]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003790'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003790',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:24:29]

updated row:1  [2015-10-26 10:24:29]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:24:30]

column:10 ; row:4  [2015-10-26 10:24:30]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003790'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003790',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000155'),'W000000155','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

update oub_shipment_header set status='150', wave_no='W000000155' where shipment_no='NAMA2015102345659'   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:24:30]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:24:30]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000155','0000003791',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:24:30]

column:15 ; row:2  [2015-10-26 10:24:30]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:24:30]

column:10 ; row:1  [2015-10-26 10:24:30]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:30]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003791'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003791',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:24:30]

updated row:1  [2015-10-26 10:24:31]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:24:31]

updated row:1  [2015-10-26 10:24:31]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:24:31]

column:10 ; row:2  [2015-10-26 10:24:31]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:24:31]

updated row:1  [2015-10-26 10:24:31]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003791'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003791',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:24:31]

updated row:1  [2015-10-26 10:24:31]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:24:31]

updated row:1  [2015-10-26 10:24:31]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:24:31]

column:2 ; row:2  [2015-10-26 10:24:31]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:24:31]

updated row:1  [2015-10-26 10:24:31]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:24:31]

updated row:0  [2015-10-26 10:24:31]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:24:31]

updated row:0  [2015-10-26 10:24:31]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:24:31]

column:23 ; row:2  [2015-10-26 10:24:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:24:31]

column:18 ; row:2  [2015-10-26 10:24:31]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:24:31]

column:2 ; row:2  [2015-10-26 10:24:31]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:24:31]

updated row:1  [2015-10-26 10:24:32]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:24:32]

updated row:0  [2015-10-26 10:24:32]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:24:32]

updated row:0  [2015-10-26 10:24:32]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:24:32]

column:23 ; row:2  [2015-10-26 10:24:32]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:24:32]

column:18 ; row:2  [2015-10-26 10:24:32]

select * from sys_process_history where 1<>1  [2015-10-26 10:24:32]

column:48 ; row:0  [2015-10-26 10:24:32]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000155','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:24:32]

updated row:1  [2015-10-26 10:24:32]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:24:37]

column:18 ; row:2  [2015-10-26 10:24:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:24:37]

column:18 ; row:2  [2015-10-26 10:24:37]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:25:26]

column:2 ; row:1  [2015-10-26 10:25:26]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:25:30]

column:6 ; row:1  [2015-10-26 10:25:30]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:25:31]

column:1 ; row:1  [2015-10-26 10:25:31]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:25:31]

column:23 ; row:0  [2015-10-26 10:25:31]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:25:34]

updated row:0  [2015-10-26 10:25:34]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:25:34]

column:23 ; row:2  [2015-10-26 10:25:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:25:34]

column:18 ; row:2  [2015-10-26 10:25:34]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000155') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:25:46]

column:9 ; row:2  [2015-10-26 10:25:46]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:25:46]

updated row:1  [2015-10-26 10:25:46]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:25:46]

updated row:1  [2015-10-26 10:25:46]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:25:46]

updated row:1  [2015-10-26 10:25:46]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:25:46]

updated row:0  [2015-10-26 10:25:47]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:25:47]

updated row:1  [2015-10-26 10:25:47]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:25:47]

updated row:1  [2015-10-26 10:25:47]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:25:47]

updated row:1  [2015-10-26 10:25:47]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:25:47]

updated row:1  [2015-10-26 10:25:47]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:25:47]

updated row:1  [2015-10-26 10:25:47]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:25:47]

updated row:0  [2015-10-26 10:25:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:25:49]

column:18 ; row:2  [2015-10-26 10:25:49]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000155') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:25:51]

column:9 ; row:2  [2015-10-26 10:25:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:25:51]

updated row:1  [2015-10-26 10:25:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:25:51]

updated row:1  [2015-10-26 10:25:51]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:25:51]

updated row:1  [2015-10-26 10:25:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:25:51]

updated row:0  [2015-10-26 10:25:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:25:51]

updated row:1  [2015-10-26 10:25:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:25:51]

updated row:1  [2015-10-26 10:25:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:25:51]

updated row:1  [2015-10-26 10:25:52]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:25:52]

updated row:1  [2015-10-26 10:25:52]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:25:52]

updated row:1  [2015-10-26 10:25:52]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:25:52]

updated row:0  [2015-10-26 10:25:52]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:25:59]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:25:59]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000156','Normal Wave','hz','admin',now()  [2015-10-26 10:25:59]

updated row:1  [2015-10-26 10:25:59]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000156'),'W000000156','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:25:59]

updated row:1  [2015-10-26 10:26:00]

update oub_shipment_header set status='150', wave_no='W000000156' where shipment_no='NAMA2015102329279'   [2015-10-26 10:26:00]

updated row:1  [2015-10-26 10:26:00]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:26:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:26:00]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000156','0000003792',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:26:00]

updated row:1  [2015-10-26 10:26:00]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:26:00]

column:15 ; row:2  [2015-10-26 10:26:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:26:00]

column:10 ; row:1  [2015-10-26 10:26:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:26:00]

updated row:1  [2015-10-26 10:26:00]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003792'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003792',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:26:00]

updated row:1  [2015-10-26 10:26:00]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:26:00]

updated row:1  [2015-10-26 10:26:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:26:00]

column:10 ; row:4  [2015-10-26 10:26:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:26:00]

updated row:1  [2015-10-26 10:26:00]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003792'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003792',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000156'),'W000000156','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

update oub_shipment_header set status='150', wave_no='W000000156' where shipment_no='NAMA2015102345659'   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:26:01]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:26:01]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000156','0000003793',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:26:01]

column:15 ; row:2  [2015-10-26 10:26:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:26:01]

column:10 ; row:1  [2015-10-26 10:26:01]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003793'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003793',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:26:01]

updated row:1  [2015-10-26 10:26:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:26:01]

column:10 ; row:2  [2015-10-26 10:26:02]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:26:02]

updated row:1  [2015-10-26 10:26:02]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003793'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003793',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:26:02]

updated row:1  [2015-10-26 10:26:02]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:26:02]

updated row:1  [2015-10-26 10:26:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:26:02]

column:2 ; row:2  [2015-10-26 10:26:02]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:26:02]

updated row:1  [2015-10-26 10:26:02]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:26:02]

updated row:0  [2015-10-26 10:26:02]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:26:02]

updated row:0  [2015-10-26 10:26:02]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:26:02]

column:23 ; row:2  [2015-10-26 10:26:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:26:02]

column:18 ; row:2  [2015-10-26 10:26:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:26:02]

column:2 ; row:2  [2015-10-26 10:26:02]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:26:02]

updated row:1  [2015-10-26 10:26:02]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:26:02]

updated row:0  [2015-10-26 10:26:03]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:26:03]

updated row:0  [2015-10-26 10:26:03]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:26:03]

column:23 ; row:2  [2015-10-26 10:26:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:26:03]

column:18 ; row:2  [2015-10-26 10:26:03]

select * from sys_process_history where 1<>1  [2015-10-26 10:26:03]

column:48 ; row:0  [2015-10-26 10:26:03]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000156','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:26:03]

updated row:1  [2015-10-26 10:26:03]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:27:01]

column:2 ; row:1  [2015-10-26 10:27:01]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:27:04]

column:6 ; row:1  [2015-10-26 10:27:04]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:27:07]

column:1 ; row:1  [2015-10-26 10:27:07]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:27:07]

column:23 ; row:0  [2015-10-26 10:27:07]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:27:10]

updated row:0  [2015-10-26 10:27:11]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:27:11]

column:23 ; row:2  [2015-10-26 10:27:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:27:11]

column:18 ; row:2  [2015-10-26 10:27:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:27:15]

column:18 ; row:2  [2015-10-26 10:27:16]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000156') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:27:17]

column:9 ; row:2  [2015-10-26 10:27:17]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:27:17]

updated row:1  [2015-10-26 10:27:17]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:27:17]

updated row:1  [2015-10-26 10:27:17]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:27:17]

updated row:1  [2015-10-26 10:27:17]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:27:17]

updated row:0  [2015-10-26 10:27:17]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:27:18]

updated row:1  [2015-10-26 10:27:18]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:27:18]

updated row:1  [2015-10-26 10:27:18]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:27:18]

updated row:1  [2015-10-26 10:27:18]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:27:18]

updated row:1  [2015-10-26 10:27:18]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:27:18]

updated row:1  [2015-10-26 10:27:18]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:27:18]

updated row:0  [2015-10-26 10:27:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:27:20]

column:18 ; row:2  [2015-10-26 10:27:20]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000156') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:27:21]

column:9 ; row:2  [2015-10-26 10:27:22]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:27:22]

updated row:0  [2015-10-26 10:27:22]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:27:22]

updated row:1  [2015-10-26 10:27:22]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:27:22]

updated row:0  [2015-10-26 10:27:22]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:27:30]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:27:30]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000157','Normal Wave','hz','admin',now()  [2015-10-26 10:27:30]

updated row:1  [2015-10-26 10:27:30]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000157'),'W000000157','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:27:30]

updated row:1  [2015-10-26 10:27:30]

update oub_shipment_header set status='150', wave_no='W000000157' where shipment_no='NAMA2015102329279'   [2015-10-26 10:27:30]

updated row:1  [2015-10-26 10:27:30]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:27:30]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:27:30]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000157','0000003794',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:27:30]

updated row:1  [2015-10-26 10:27:30]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:27:30]

column:15 ; row:2  [2015-10-26 10:27:31]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:27:31]

column:10 ; row:1  [2015-10-26 10:27:31]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003794'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003794',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:27:31]

column:10 ; row:4  [2015-10-26 10:27:31]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003794'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003794',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000157'),'W000000157','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

update oub_shipment_header set status='150', wave_no='W000000157' where shipment_no='NAMA2015102345659'   [2015-10-26 10:27:31]

updated row:1  [2015-10-26 10:27:31]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:27:32]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:27:32]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000157','0000003795',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:27:32]

column:15 ; row:2  [2015-10-26 10:27:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:27:32]

column:10 ; row:1  [2015-10-26 10:27:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003795'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003795',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:27:32]

column:10 ; row:2  [2015-10-26 10:27:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003795'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003795',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:27:32]

updated row:1  [2015-10-26 10:27:32]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:27:33]

column:2 ; row:2  [2015-10-26 10:27:33]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:27:33]

updated row:1  [2015-10-26 10:27:33]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:27:33]

updated row:0  [2015-10-26 10:27:33]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:27:33]

updated row:0  [2015-10-26 10:27:33]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:27:33]

column:23 ; row:2  [2015-10-26 10:27:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:27:33]

column:18 ; row:2  [2015-10-26 10:27:33]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:27:33]

column:2 ; row:2  [2015-10-26 10:27:33]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:27:33]

updated row:1  [2015-10-26 10:27:33]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:27:33]

updated row:0  [2015-10-26 10:27:33]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:27:33]

updated row:0  [2015-10-26 10:27:33]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:27:33]

column:23 ; row:2  [2015-10-26 10:27:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:27:34]

column:18 ; row:2  [2015-10-26 10:27:34]

select * from sys_process_history where 1<>1  [2015-10-26 10:27:34]

column:48 ; row:0  [2015-10-26 10:27:34]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000157','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:27:34]

updated row:1  [2015-10-26 10:27:34]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:28:05]

column:2 ; row:1  [2015-10-26 10:28:05]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:28:08]

column:6 ; row:1  [2015-10-26 10:28:08]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:28:14]

column:1 ; row:1  [2015-10-26 10:28:14]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:28:14]

column:23 ; row:0  [2015-10-26 10:28:14]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:28:16]

updated row:0  [2015-10-26 10:28:16]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:28:16]

column:23 ; row:2  [2015-10-26 10:28:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:16]

column:18 ; row:2  [2015-10-26 10:28:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:17]

column:18 ; row:2  [2015-10-26 10:28:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:17]

column:18 ; row:2  [2015-10-26 10:28:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:22]

column:18 ; row:2  [2015-10-26 10:28:22]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000157') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:28:24]

column:9 ; row:2  [2015-10-26 10:28:24]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:28:24]

updated row:0  [2015-10-26 10:28:24]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:24]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:28:24]

updated row:1  [2015-10-26 10:28:25]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:28:25]

updated row:0  [2015-10-26 10:28:25]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:27]

column:18 ; row:2  [2015-10-26 10:28:27]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000157') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:28:28]

column:9 ; row:2  [2015-10-26 10:28:28]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:28:28]

updated row:1  [2015-10-26 10:28:28]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:28:28]

updated row:1  [2015-10-26 10:28:29]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:28:29]

updated row:1  [2015-10-26 10:28:29]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:28:29]

updated row:0  [2015-10-26 10:28:29]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:28:29]

updated row:1  [2015-10-26 10:28:29]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:28:29]

updated row:1  [2015-10-26 10:28:29]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:28:29]

updated row:1  [2015-10-26 10:28:29]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:28:29]

updated row:1  [2015-10-26 10:28:29]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:28:29]

updated row:1  [2015-10-26 10:28:29]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:28:29]

updated row:0  [2015-10-26 10:28:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:33]

column:18 ; row:2  [2015-10-26 10:28:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:37]

column:18 ; row:2  [2015-10-26 10:28:37]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:28:39]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:28:39]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000158','Normal Wave','hz','admin',now()  [2015-10-26 10:28:39]

updated row:1  [2015-10-26 10:28:39]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000158'),'W000000158','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:28:39]

updated row:1  [2015-10-26 10:28:39]

update oub_shipment_header set status='150', wave_no='W000000158' where shipment_no='NAMA2015102329279'   [2015-10-26 10:28:39]

updated row:1  [2015-10-26 10:28:39]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:28:39]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:28:39]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000158','0000003796',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:28:40]

column:15 ; row:2  [2015-10-26 10:28:40]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:28:40]

column:10 ; row:1  [2015-10-26 10:28:40]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003796'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003796',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:28:40]

column:10 ; row:4  [2015-10-26 10:28:40]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003796'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003796',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:40]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:28:40]

column:2 ; row:0  [2015-10-26 10:28:40]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:28:40]

updated row:1  [2015-10-26 10:28:41]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:28:41]

updated row:2  [2015-10-26 10:28:41]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:28:41]

updated row:0  [2015-10-26 10:28:41]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:28:41]

updated row:0  [2015-10-26 10:28:41]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:28:41]

updated row:13  [2015-10-26 10:28:41]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 10:28:41]

updated row:0  [2015-10-26 10:28:41]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:28:41]

column:2 ; row:2  [2015-10-26 10:28:41]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:28:41]

updated row:1  [2015-10-26 10:28:41]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:28:41]

updated row:0  [2015-10-26 10:28:41]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:28:41]

updated row:0  [2015-10-26 10:28:41]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:28:41]

column:23 ; row:2  [2015-10-26 10:28:41]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:28:41]

column:18 ; row:2  [2015-10-26 10:28:41]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:30:17]

column:2 ; row:1  [2015-10-26 10:30:17]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:30:20]

column:6 ; row:1  [2015-10-26 10:30:20]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:30:22]

column:1 ; row:1  [2015-10-26 10:30:22]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:30:22]

column:23 ; row:0  [2015-10-26 10:30:22]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:30:24]

updated row:0  [2015-10-26 10:30:24]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:30:24]

column:23 ; row:2  [2015-10-26 10:30:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:24]

column:18 ; row:2  [2015-10-26 10:30:24]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000158') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:30:27]

column:9 ; row:2  [2015-10-26 10:30:27]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:30:27]

updated row:1  [2015-10-26 10:30:27]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:30:27]

updated row:1  [2015-10-26 10:30:27]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:30:27]

updated row:1  [2015-10-26 10:30:27]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:30:27]

updated row:0  [2015-10-26 10:30:28]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:30:28]

updated row:1  [2015-10-26 10:30:28]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:30:28]

updated row:1  [2015-10-26 10:30:28]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:30:28]

updated row:1  [2015-10-26 10:30:28]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:30:28]

updated row:1  [2015-10-26 10:30:28]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:30:28]

updated row:1  [2015-10-26 10:30:28]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:30:28]

updated row:0  [2015-10-26 10:30:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:31]

column:18 ; row:2  [2015-10-26 10:30:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:31]

column:18 ; row:2  [2015-10-26 10:30:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:36]

column:18 ; row:2  [2015-10-26 10:30:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:37]

column:18 ; row:2  [2015-10-26 10:30:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:38]

column:18 ; row:2  [2015-10-26 10:30:38]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:39]

column:18 ; row:2  [2015-10-26 10:30:39]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:39]

column:18 ; row:2  [2015-10-26 10:30:39]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:39]

column:18 ; row:2  [2015-10-26 10:30:39]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:30:45]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:30:45]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000159','Normal Wave','hz','admin',now()  [2015-10-26 10:30:45]

updated row:1  [2015-10-26 10:30:45]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000159'),'W000000159','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:30:45]

updated row:1  [2015-10-26 10:30:45]

update oub_shipment_header set status='150', wave_no='W000000159' where shipment_no='NAMA2015102329279'   [2015-10-26 10:30:45]

updated row:1  [2015-10-26 10:30:45]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:30:45]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:30:45]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000159','0000003797',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:30:45]

updated row:1  [2015-10-26 10:30:45]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:30:45]

column:15 ; row:2  [2015-10-26 10:30:45]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:30:45]

column:10 ; row:1  [2015-10-26 10:30:45]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:30:45]

updated row:1  [2015-10-26 10:30:46]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003797'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003797',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:30:46]

column:10 ; row:4  [2015-10-26 10:30:46]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003797'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003797',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000159'),'W000000159','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

update oub_shipment_header set status='150', wave_no='W000000159' where shipment_no='NAMA2015102345659'   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:30:46]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:30:46]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000159','0000003798',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:30:46]

updated row:1  [2015-10-26 10:30:46]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:30:47]

column:15 ; row:2  [2015-10-26 10:30:47]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:30:47]

column:10 ; row:1  [2015-10-26 10:30:47]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003798'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003798',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:30:47]

column:10 ; row:2  [2015-10-26 10:30:47]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003798'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003798',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:30:47]

column:2 ; row:2  [2015-10-26 10:30:47]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:30:47]

updated row:1  [2015-10-26 10:30:47]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:30:47]

updated row:0  [2015-10-26 10:30:48]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:30:48]

updated row:0  [2015-10-26 10:30:48]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:30:48]

column:23 ; row:2  [2015-10-26 10:30:48]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:48]

column:18 ; row:2  [2015-10-26 10:30:48]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:30:48]

column:2 ; row:2  [2015-10-26 10:30:48]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:30:48]

updated row:1  [2015-10-26 10:30:48]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:30:48]

updated row:0  [2015-10-26 10:30:48]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:30:48]

updated row:0  [2015-10-26 10:30:48]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:30:48]

column:23 ; row:2  [2015-10-26 10:30:48]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:30:48]

column:18 ; row:2  [2015-10-26 10:30:48]

select * from sys_process_history where 1<>1  [2015-10-26 10:30:48]

column:48 ; row:0  [2015-10-26 10:30:49]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000159','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:30:49]

updated row:1  [2015-10-26 10:30:49]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:31:35]

column:2 ; row:1  [2015-10-26 10:31:35]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:31:38]

column:6 ; row:1  [2015-10-26 10:31:38]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:31:40]

column:1 ; row:1  [2015-10-26 10:31:40]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:31:40]

column:23 ; row:0  [2015-10-26 10:31:41]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:31:42]

updated row:0  [2015-10-26 10:31:42]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:31:42]

column:23 ; row:2  [2015-10-26 10:31:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:31:43]

column:18 ; row:2  [2015-10-26 10:31:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:31:45]

column:18 ; row:2  [2015-10-26 10:31:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:31:45]

column:18 ; row:2  [2015-10-26 10:31:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:31:47]

column:18 ; row:2  [2015-10-26 10:31:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:31:48]

column:18 ; row:2  [2015-10-26 10:31:48]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000159') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:31:55]

column:9 ; row:2  [2015-10-26 10:31:55]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:31:55]

updated row:1  [2015-10-26 10:31:55]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:31:55]

updated row:1  [2015-10-26 10:31:55]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:31:55]

updated row:1  [2015-10-26 10:31:55]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:31:55]

updated row:0  [2015-10-26 10:31:55]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:31:55]

updated row:1  [2015-10-26 10:31:56]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:31:56]

updated row:1  [2015-10-26 10:31:56]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:31:56]

updated row:1  [2015-10-26 10:31:56]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:31:56]

updated row:1  [2015-10-26 10:31:56]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:31:56]

updated row:1  [2015-10-26 10:31:56]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:31:56]

updated row:0  [2015-10-26 10:31:56]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:31:58]

column:18 ; row:2  [2015-10-26 10:31:58]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000159') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:31:59]

column:9 ; row:2  [2015-10-26 10:31:59]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:31:59]

updated row:1  [2015-10-26 10:31:59]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:32:00]

updated row:0  [2015-10-26 10:32:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:32:00]

updated row:1  [2015-10-26 10:32:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:32:00]

updated row:0  [2015-10-26 10:32:00]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:02]

column:18 ; row:2  [2015-10-26 10:32:02]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:32:09]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:32:09]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000160','Normal Wave','hz','admin',now()  [2015-10-26 10:32:09]

updated row:1  [2015-10-26 10:32:10]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000160'),'W000000160','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

update oub_shipment_header set status='150', wave_no='W000000160' where shipment_no='NAMA2015102329279'   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:32:10]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:32:10]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000160','0000003799',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:32:10]

column:15 ; row:2  [2015-10-26 10:32:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:32:10]

column:10 ; row:1  [2015-10-26 10:32:10]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003799'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003799',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:32:10]

column:10 ; row:4  [2015-10-26 10:32:10]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:32:10]

updated row:1  [2015-10-26 10:32:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003799'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003799',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000160'),'W000000160','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

update oub_shipment_header set status='150', wave_no='W000000160' where shipment_no='NAMA2015102345659'   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:32:11]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:32:11]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000160','0000003800',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:32:11]

column:15 ; row:2  [2015-10-26 10:32:11]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:32:11]

column:10 ; row:1  [2015-10-26 10:32:11]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003800'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003800',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:32:11]

updated row:1  [2015-10-26 10:32:11]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:32:12]

updated row:1  [2015-10-26 10:32:12]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:32:12]

column:10 ; row:2  [2015-10-26 10:32:12]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:32:12]

updated row:1  [2015-10-26 10:32:12]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003800'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003800',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:32:12]

updated row:1  [2015-10-26 10:32:12]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:32:12]

updated row:1  [2015-10-26 10:32:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:32:12]

column:2 ; row:2  [2015-10-26 10:32:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:32:12]

updated row:1  [2015-10-26 10:32:12]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:32:12]

updated row:0  [2015-10-26 10:32:12]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:32:12]

updated row:0  [2015-10-26 10:32:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:32:12]

column:23 ; row:2  [2015-10-26 10:32:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:12]

column:18 ; row:2  [2015-10-26 10:32:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:32:13]

column:2 ; row:2  [2015-10-26 10:32:13]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:32:13]

updated row:1  [2015-10-26 10:32:13]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:32:13]

updated row:0  [2015-10-26 10:32:13]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:32:13]

updated row:0  [2015-10-26 10:32:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:32:13]

column:23 ; row:2  [2015-10-26 10:32:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:13]

column:18 ; row:2  [2015-10-26 10:32:13]

select * from sys_process_history where 1<>1  [2015-10-26 10:32:13]

column:48 ; row:0  [2015-10-26 10:32:13]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000160','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:32:13]

updated row:1  [2015-10-26 10:32:13]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:32:35]

column:1 ; row:1  [2015-10-26 10:32:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:32:35]

column:23 ; row:0  [2015-10-26 10:32:35]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:32:37]

updated row:0  [2015-10-26 10:32:37]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:32:37]

column:23 ; row:2  [2015-10-26 10:32:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:37]

column:18 ; row:2  [2015-10-26 10:32:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:42]

column:18 ; row:2  [2015-10-26 10:32:42]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:43]

column:18 ; row:2  [2015-10-26 10:32:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:45]

column:18 ; row:2  [2015-10-26 10:32:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:32:46]

column:18 ; row:2  [2015-10-26 10:32:46]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:16]

column:18 ; row:2  [2015-10-26 10:34:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:16]

column:18 ; row:2  [2015-10-26 10:34:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:17]

column:18 ; row:2  [2015-10-26 10:34:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:18]

column:18 ; row:2  [2015-10-26 10:34:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:18]

column:18 ; row:2  [2015-10-26 10:34:18]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:34:24]

column:2 ; row:1  [2015-10-26 10:34:24]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='26d0c201d3c1f295149e285b20c0bb53'   [2015-10-26 10:34:28]

column:6 ; row:0  [2015-10-26 10:34:28]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:34:32]

column:6 ; row:1  [2015-10-26 10:34:32]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:34:33]

column:1 ; row:1  [2015-10-26 10:34:34]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:34:34]

column:23 ; row:0  [2015-10-26 10:34:34]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:34:35]

updated row:0  [2015-10-26 10:34:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:34:35]

column:23 ; row:2  [2015-10-26 10:34:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:36]

column:18 ; row:2  [2015-10-26 10:34:36]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000160') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:34:43]

column:9 ; row:2  [2015-10-26 10:34:43]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:34:43]

updated row:1  [2015-10-26 10:34:43]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:34:43]

updated row:1  [2015-10-26 10:34:43]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:34:43]

updated row:1  [2015-10-26 10:34:43]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:34:43]

updated row:0  [2015-10-26 10:34:43]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:34:43]

updated row:1  [2015-10-26 10:34:43]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:34:44]

updated row:1  [2015-10-26 10:34:44]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:34:44]

updated row:1  [2015-10-26 10:34:44]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:34:44]

updated row:1  [2015-10-26 10:34:44]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:34:44]

updated row:1  [2015-10-26 10:34:44]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:34:44]

updated row:0  [2015-10-26 10:34:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:46]

column:18 ; row:2  [2015-10-26 10:34:46]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000160') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:34:48]

column:9 ; row:2  [2015-10-26 10:34:48]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:34:48]

updated row:1  [2015-10-26 10:34:48]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:34:48]

updated row:1  [2015-10-26 10:34:48]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:34:48]

updated row:1  [2015-10-26 10:34:48]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:34:48]

updated row:0  [2015-10-26 10:34:48]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:34:48]

updated row:1  [2015-10-26 10:34:48]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:34:48]

updated row:1  [2015-10-26 10:34:49]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:34:49]

updated row:1  [2015-10-26 10:34:49]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:34:49]

updated row:1  [2015-10-26 10:34:49]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:34:49]

updated row:1  [2015-10-26 10:34:49]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:34:49]

updated row:0  [2015-10-26 10:34:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:50]

column:18 ; row:2  [2015-10-26 10:34:51]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:34:52]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:34:52]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000161','Normal Wave','hz','admin',now()  [2015-10-26 10:34:52]

updated row:1  [2015-10-26 10:34:52]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000161'),'W000000161','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:34:52]

updated row:1  [2015-10-26 10:34:52]

update oub_shipment_header set status='150', wave_no='W000000161' where shipment_no='NAMA2015102329279'   [2015-10-26 10:34:52]

updated row:1  [2015-10-26 10:34:52]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:34:52]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:34:52]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000161','0000003801',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:34:52]

updated row:1  [2015-10-26 10:34:53]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:34:53]

column:15 ; row:2  [2015-10-26 10:34:53]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:34:53]

column:10 ; row:1  [2015-10-26 10:34:53]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003801'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003801',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:34:53]

column:10 ; row:4  [2015-10-26 10:34:53]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003801'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003801',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000161'),'W000000161','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:53]

update oub_shipment_header set status='150', wave_no='W000000161' where shipment_no='NAMA2015102345659'   [2015-10-26 10:34:53]

updated row:1  [2015-10-26 10:34:54]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:34:54]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:34:54]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000161','0000003802',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:34:54]

updated row:1  [2015-10-26 10:34:54]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:34:54]

column:15 ; row:2  [2015-10-26 10:34:54]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:34:54]

column:10 ; row:1  [2015-10-26 10:34:54]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:34:54]

updated row:1  [2015-10-26 10:34:54]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003802'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003802',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:34:54]

updated row:1  [2015-10-26 10:34:54]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:34:54]

updated row:1  [2015-10-26 10:34:54]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:34:54]

column:10 ; row:2  [2015-10-26 10:34:54]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:34:54]

updated row:1  [2015-10-26 10:34:54]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003802'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003802',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:34:54]

updated row:1  [2015-10-26 10:34:55]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:34:55]

updated row:1  [2015-10-26 10:34:55]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:34:55]

column:2 ; row:2  [2015-10-26 10:34:55]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:34:55]

updated row:1  [2015-10-26 10:34:55]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:34:55]

updated row:0  [2015-10-26 10:34:55]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:34:55]

updated row:0  [2015-10-26 10:34:55]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:34:55]

column:23 ; row:2  [2015-10-26 10:34:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:55]

column:18 ; row:2  [2015-10-26 10:34:55]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:34:55]

column:2 ; row:2  [2015-10-26 10:34:56]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:34:56]

updated row:1  [2015-10-26 10:34:56]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:34:56]

updated row:0  [2015-10-26 10:34:56]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:34:56]

updated row:0  [2015-10-26 10:34:56]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:34:56]

column:23 ; row:2  [2015-10-26 10:34:56]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:34:56]

column:18 ; row:2  [2015-10-26 10:34:56]

select * from sys_process_history where 1<>1  [2015-10-26 10:34:56]

column:48 ; row:0  [2015-10-26 10:34:56]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000161','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:34:56]

updated row:1  [2015-10-26 10:34:56]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000161') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:35:10]

column:9 ; row:2  [2015-10-26 10:35:10]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:35:10]

updated row:1  [2015-10-26 10:35:10]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:35:10]

updated row:1  [2015-10-26 10:35:10]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:35:10]

updated row:1  [2015-10-26 10:35:10]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:35:10]

updated row:0  [2015-10-26 10:35:10]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:35:10]

updated row:1  [2015-10-26 10:35:11]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:35:11]

updated row:1  [2015-10-26 10:35:11]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:35:11]

updated row:1  [2015-10-26 10:35:11]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:35:11]

updated row:1  [2015-10-26 10:35:11]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:35:11]

updated row:1  [2015-10-26 10:35:11]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:35:11]

updated row:0  [2015-10-26 10:35:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:35:13]

column:18 ; row:2  [2015-10-26 10:35:13]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000161') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:35:15]

column:9 ; row:2  [2015-10-26 10:35:15]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:35:15]

updated row:1  [2015-10-26 10:35:15]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:35:15]

updated row:1  [2015-10-26 10:35:15]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:35:15]

updated row:1  [2015-10-26 10:35:15]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:35:15]

updated row:0  [2015-10-26 10:35:15]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:35:15]

updated row:1  [2015-10-26 10:35:15]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:35:15]

updated row:1  [2015-10-26 10:35:15]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:35:16]

updated row:1  [2015-10-26 10:35:16]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:35:16]

updated row:1  [2015-10-26 10:35:16]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:35:16]

updated row:1  [2015-10-26 10:35:16]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:35:16]

updated row:0  [2015-10-26 10:35:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:35:18]

column:18 ; row:2  [2015-10-26 10:35:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:35:19]

column:18 ; row:2  [2015-10-26 10:35:19]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:35:19]

column:18 ; row:2  [2015-10-26 10:35:19]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:35:21]

column:18 ; row:2  [2015-10-26 10:35:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:35:21]

column:18 ; row:2  [2015-10-26 10:35:21]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:36:52]

column:2 ; row:1  [2015-10-26 10:36:52]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:36:55]

column:6 ; row:1  [2015-10-26 10:36:55]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:36:57]

column:1 ; row:1  [2015-10-26 10:36:57]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:36:57]

column:23 ; row:0  [2015-10-26 10:36:57]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:36:59]

updated row:0  [2015-10-26 10:36:59]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:36:59]

column:23 ; row:2  [2015-10-26 10:36:59]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:36:59]

column:18 ; row:2  [2015-10-26 10:36:59]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:37:01]

column:18 ; row:2  [2015-10-26 10:37:01]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:37:03]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:37:03]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000162','Normal Wave','hz','admin',now()  [2015-10-26 10:37:03]

updated row:1  [2015-10-26 10:37:03]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000162'),'W000000162','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:37:03]

updated row:1  [2015-10-26 10:37:03]

update oub_shipment_header set status='150', wave_no='W000000162' where shipment_no='NAMA2015102329279'   [2015-10-26 10:37:03]

updated row:1  [2015-10-26 10:37:03]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:37:03]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:37:03]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000162','0000003803',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:37:03]

updated row:1  [2015-10-26 10:37:03]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:37:04]

column:15 ; row:2  [2015-10-26 10:37:04]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:37:04]

column:10 ; row:1  [2015-10-26 10:37:04]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:04]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003803'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003803',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:04]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:04]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:37:04]

column:10 ; row:4  [2015-10-26 10:37:04]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:04]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003803'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003803',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:04]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:04]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000162'),'W000000162','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:37:04]

updated row:1  [2015-10-26 10:37:05]

update oub_shipment_header set status='150', wave_no='W000000162' where shipment_no='NAMA2015102345659'   [2015-10-26 10:37:05]

updated row:1  [2015-10-26 10:37:05]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:37:05]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:37:05]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000162','0000003804',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:37:05]

updated row:1  [2015-10-26 10:37:05]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:37:05]

column:15 ; row:2  [2015-10-26 10:37:05]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:37:05]

column:10 ; row:1  [2015-10-26 10:37:05]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:37:05]

updated row:1  [2015-10-26 10:37:05]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003804'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003804',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:37:05]

column:18 ; row:2  [2015-10-26 10:37:05]

updated row:1  [2015-10-26 10:37:05]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:37:05]

updated row:1  [2015-10-26 10:37:05]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:37:05]

column:10 ; row:2  [2015-10-26 10:37:05]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:37:05]

updated row:1  [2015-10-26 10:37:06]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003804'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003804',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:37:06]

updated row:1  [2015-10-26 10:37:06]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:37:06]

updated row:1  [2015-10-26 10:37:06]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:37:06]

column:2 ; row:2  [2015-10-26 10:37:06]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:37:06]

updated row:1  [2015-10-26 10:37:06]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:37:06]

updated row:0  [2015-10-26 10:37:06]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:37:06]

updated row:0  [2015-10-26 10:37:06]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:37:06]

column:23 ; row:2  [2015-10-26 10:37:06]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:37:06]

column:18 ; row:2  [2015-10-26 10:37:06]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:37:06]

column:2 ; row:2  [2015-10-26 10:37:06]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:37:06]

updated row:1  [2015-10-26 10:37:07]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:37:07]

updated row:0  [2015-10-26 10:37:07]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:37:07]

updated row:0  [2015-10-26 10:37:07]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:37:07]

column:23 ; row:2  [2015-10-26 10:37:07]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:37:07]

column:18 ; row:2  [2015-10-26 10:37:07]

select * from sys_process_history where 1<>1  [2015-10-26 10:37:07]

column:48 ; row:0  [2015-10-26 10:37:07]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000162','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:37:07]

updated row:1  [2015-10-26 10:37:07]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:39:53]

column:2 ; row:1  [2015-10-26 10:39:53]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:39:57]

column:6 ; row:1  [2015-10-26 10:39:57]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:39:58]

column:1 ; row:1  [2015-10-26 10:39:58]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:39:59]

column:23 ; row:0  [2015-10-26 10:39:59]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:40:01]

updated row:0  [2015-10-26 10:40:01]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:40:02]

column:23 ; row:2  [2015-10-26 10:40:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:40:02]

column:18 ; row:2  [2015-10-26 10:40:02]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:40:04]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:40:04]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000163','Normal Wave','hz','admin',now()  [2015-10-26 10:40:04]

updated row:1  [2015-10-26 10:40:04]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:40:04]

column:2 ; row:2  [2015-10-26 10:40:04]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:40:04]

updated row:1  [2015-10-26 10:40:04]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:40:04]

updated row:0  [2015-10-26 10:40:04]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:40:04]

updated row:0  [2015-10-26 10:40:04]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:40:04]

column:23 ; row:2  [2015-10-26 10:40:04]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:40:04]

column:18 ; row:2  [2015-10-26 10:40:05]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:40:05]

column:2 ; row:2  [2015-10-26 10:40:05]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:40:05]

updated row:1  [2015-10-26 10:40:05]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:40:05]

updated row:0  [2015-10-26 10:40:05]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:40:05]

updated row:0  [2015-10-26 10:40:05]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:40:05]

column:23 ; row:2  [2015-10-26 10:40:05]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:40:05]

column:18 ; row:2  [2015-10-26 10:40:05]

select * from sys_process_history where 1<>1  [2015-10-26 10:40:05]

column:48 ; row:0  [2015-10-26 10:40:05]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000163','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:40:05]

updated row:1  [2015-10-26 10:40:06]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000162') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:40:14]

column:9 ; row:2  [2015-10-26 10:40:14]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:40:14]

updated row:1  [2015-10-26 10:40:14]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:40:14]

updated row:1  [2015-10-26 10:40:14]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:40:14]

updated row:1  [2015-10-26 10:40:15]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:40:15]

updated row:0  [2015-10-26 10:40:15]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:40:15]

updated row:1  [2015-10-26 10:40:15]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:40:15]

updated row:1  [2015-10-26 10:40:15]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:40:15]

updated row:1  [2015-10-26 10:40:15]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:40:15]

updated row:1  [2015-10-26 10:40:15]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:40:15]

updated row:1  [2015-10-26 10:40:15]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:40:15]

updated row:0  [2015-10-26 10:40:15]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:40:18]

column:18 ; row:2  [2015-10-26 10:40:18]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000162') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:40:19]

column:9 ; row:2  [2015-10-26 10:40:19]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:40:19]

updated row:1  [2015-10-26 10:40:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:40:19]

updated row:1  [2015-10-26 10:40:20]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:40:20]

updated row:1  [2015-10-26 10:40:20]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:40:20]

updated row:0  [2015-10-26 10:40:20]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:40:20]

updated row:1  [2015-10-26 10:40:20]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:40:20]

updated row:1  [2015-10-26 10:40:20]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:40:20]

updated row:1  [2015-10-26 10:40:20]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:40:20]

updated row:1  [2015-10-26 10:40:20]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:40:20]

updated row:1  [2015-10-26 10:40:20]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:40:20]

updated row:0  [2015-10-26 10:40:20]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:40:22]

column:18 ; row:2  [2015-10-26 10:40:22]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:41:31]

column:2 ; row:1  [2015-10-26 10:41:31]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:41:34]

column:6 ; row:1  [2015-10-26 10:41:34]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:41:36]

column:1 ; row:1  [2015-10-26 10:41:36]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:41:36]

column:23 ; row:0  [2015-10-26 10:41:36]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:41:38]

updated row:0  [2015-10-26 10:41:38]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:41:38]

column:23 ; row:2  [2015-10-26 10:41:38]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:41:38]

column:18 ; row:2  [2015-10-26 10:41:38]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:41:40]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:41:40]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000164','Normal Wave','hz','admin',now()  [2015-10-26 10:41:40]

updated row:1  [2015-10-26 10:41:40]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000164'),'W000000164','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:41:40]

updated row:1  [2015-10-26 10:41:40]

update oub_shipment_header set status='150', wave_no='W000000164' where shipment_no='NAMA2015102329279'   [2015-10-26 10:41:40]

updated row:1  [2015-10-26 10:41:40]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:41:40]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:41:40]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_column:15 ; row:2  [2015-10-26 10:41:42]
_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000164','0000003805',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:41:40]

updated row:1  [2015-10-26 10:41:41]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:41:41]

column:15 ; row:2  [2015-10-26 10:41:41]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:41:41]

column:10 ; row:1  [2015-10-26 10:41:41]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:41]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003805'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003805',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:41]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:41]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:41:41]

column:10 ; row:4  [2015-10-26 10:41:41]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:41]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003805'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003805',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:41]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:41]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000164'),'W000000164','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:41:41]

updated row:1  [2015-10-26 10:41:42]

update oub_shipment_header set status='150', wave_no='W000000164' where shipment_no='NAMA2015102345659'   [2015-10-26 10:41:42]

updated row:1  [2015-10-26 10:41:42]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:41:42]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:41:42]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000164','0000003806',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:41:42]

updated row:1  [2015-10-26 10:41:42]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:41:42]

column:18 ; row:2  [2015-10-26 10:41:42]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:41:42]

column:10 ; row:1  [2015-10-26 10:41:42]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:41:42]

updated row:1  [2015-10-26 10:41:42]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003806'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003806',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:41:42]

updated row:1  [2015-10-26 10:41:42]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:41:42]

updated row:1  [2015-10-26 10:41:42]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:41:42]

column:10 ; row:2  [2015-10-26 10:41:43]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:41:43]

updated row:1  [2015-10-26 10:41:43]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003806'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003806',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:41:43]

updated row:1  [2015-10-26 10:41:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:41:43]

updated row:1  [2015-10-26 10:41:43]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:41:43]

column:2 ; row:2  [2015-10-26 10:41:43]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:41:43]

updated row:1  [2015-10-26 10:41:43]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:41:43]

updated row:0  [2015-10-26 10:41:43]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:41:43]

updated row:0  [2015-10-26 10:41:43]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:41:43]

column:23 ; row:2  [2015-10-26 10:41:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:41:44]

column:18 ; row:2  [2015-10-26 10:41:44]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:41:44]

column:2 ; row:2  [2015-10-26 10:41:44]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:41:44]

updated row:1  [2015-10-26 10:41:44]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:41:44]

updated row:0  [2015-10-26 10:41:44]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:41:44]

updated row:0  [2015-10-26 10:41:44]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:41:44]

column:23 ; row:2  [2015-10-26 10:41:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:41:44]

column:18 ; row:2  [2015-10-26 10:41:44]

select * from sys_process_history where 1<>1  [2015-10-26 10:41:44]

column:48 ; row:0  [2015-10-26 10:41:44]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000164','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:41:44]

updated row:1  [2015-10-26 10:41:44]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:42:51]

column:2 ; row:1  [2015-10-26 10:42:51]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:42:54]

column:6 ; row:1  [2015-10-26 10:42:55]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:43:04]

column:1 ; row:1  [2015-10-26 10:43:04]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:43:04]

column:23 ; row:0  [2015-10-26 10:43:04]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:43:06]

updated row:0  [2015-10-26 10:43:06]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:43:06]

column:23 ; row:2  [2015-10-26 10:43:06]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:06]

column:18 ; row:2  [2015-10-26 10:43:06]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:07]

column:18 ; row:2  [2015-10-26 10:43:07]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:43:11]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:43:11]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000165','Normal Wave','hz','admin',now()  [2015-10-26 10:43:11]

updated row:1  [2015-10-26 10:43:11]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:43:11]

column:2 ; row:2  [2015-10-26 10:43:11]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:43:11]

updated row:1  [2015-10-26 10:43:11]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:11]

updated row:0  [2015-10-26 10:43:11]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:12]

updated row:0  [2015-10-26 10:43:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:43:12]

column:23 ; row:2  [2015-10-26 10:43:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:12]

column:18 ; row:2  [2015-10-26 10:43:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:43:12]

column:2 ; row:2  [2015-10-26 10:43:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:43:12]

updated row:1  [2015-10-26 10:43:12]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:12]

updated row:0  [2015-10-26 10:43:12]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:12]

updated row:0  [2015-10-26 10:43:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:43:12]

column:23 ; row:2  [2015-10-26 10:43:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:13]

column:18 ; row:2  [2015-10-26 10:43:13]

select * from sys_process_history where 1<>1  [2015-10-26 10:43:13]

column:48 ; row:0  [2015-10-26 10:43:13]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000165','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:43:13]

updated row:1  [2015-10-26 10:43:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:16]

column:18 ; row:2  [2015-10-26 10:43:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:17]

column:18 ; row:2  [2015-10-26 10:43:17]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000164') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:19]

column:9 ; row:2  [2015-10-26 10:43:19]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:43:19]

updated row:1  [2015-10-26 10:43:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:43:19]

updated row:1  [2015-10-26 10:43:19]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:43:20]

updated row:1  [2015-10-26 10:43:20]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:43:20]

updated row:0  [2015-10-26 10:43:20]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:20]

updated row:1  [2015-10-26 10:43:20]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:43:20]

updated row:1  [2015-10-26 10:43:20]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:43:20]

updated row:1  [2015-10-26 10:43:20]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:43:20]

updated row:1  [2015-10-26 10:43:20]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:43:20]

updated row:1  [2015-10-26 10:43:20]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:20]

updated row:0  [2015-10-26 10:43:20]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:22]

column:18 ; row:2  [2015-10-26 10:43:23]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000164') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:24]

column:9 ; row:2  [2015-10-26 10:43:24]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:43:24]

updated row:1  [2015-10-26 10:43:24]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:43:24]

updated row:1  [2015-10-26 10:43:24]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:43:24]

updated row:1  [2015-10-26 10:43:24]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:43:24]

updated row:0  [2015-10-26 10:43:25]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:25]

updated row:1  [2015-10-26 10:43:25]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:43:25]

updated row:1  [2015-10-26 10:43:25]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:43:25]

updated row:1  [2015-10-26 10:43:25]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:43:25]

updated row:1  [2015-10-26 10:43:25]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:43:25]

updated row:1  [2015-10-26 10:43:25]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:25]

updated row:0  [2015-10-26 10:43:25]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:27]

column:18 ; row:2  [2015-10-26 10:43:27]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:29]

column:18 ; row:2  [2015-10-26 10:43:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:29]

column:18 ; row:2  [2015-10-26 10:43:29]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:43:30]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:43:30]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000166','Normal Wave','hz','admin',now()  [2015-10-26 10:43:31]

updated row:1  [2015-10-26 10:43:31]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000166'),'W000000166','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:43:31]

updated row:1  [2015-10-26 10:43:31]

update oub_shipment_header set status='150', wave_no='W000000166' where shipment_no='NAMA2015102329279'   [2015-10-26 10:43:31]

updated row:1  [2015-10-26 10:43:31]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:43:31]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:43:31]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000166','0000003807',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:31]

updated row:1  [2015-10-26 10:43:31]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:43:31]

column:15 ; row:2  [2015-10-26 10:43:31]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:43:31]

column:10 ; row:1  [2015-10-26 10:43:31]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:43:31]

updated row:1  [2015-10-26 10:43:31]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003807'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003807',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:43:32]

column:10 ; row:4  [2015-10-26 10:43:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003807'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003807',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000166'),'W000000166','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

update oub_shipment_header set status='150', wave_no='W000000166' where shipment_no='NAMA2015102345659'   [2015-10-26 10:43:32]

updated row:1  [2015-10-26 10:43:32]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:43:32]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:43:32]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000166','0000003808',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:33]

updated row:1  [2015-10-26 10:43:33]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:43:33]

column:15 ; row:2  [2015-10-26 10:43:33]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:43:33]

column:10 ; row:1  [2015-10-26 10:43:33]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:43:33]

updated row:1  [2015-10-26 10:43:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003808'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003808',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:43:33]

updated row:1  [2015-10-26 10:43:33]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:43:33]

updated row:1  [2015-10-26 10:43:33]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:43:33]

column:10 ; row:2  [2015-10-26 10:43:33]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:43:33]

updated row:1  [2015-10-26 10:43:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003808'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003808',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:43:33]

updated row:1  [2015-10-26 10:43:34]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:43:34]

updated row:1  [2015-10-26 10:43:34]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:43:34]

column:2 ; row:2  [2015-10-26 10:43:34]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:43:34]

updated row:1  [2015-10-26 10:43:34]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:34]

updated row:0  [2015-10-26 10:43:34]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:43:34]

updated row:0  [2015-10-26 10:43:34]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:43:34]

column:23 ; row:2  [2015-10-26 10:43:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:34]

column:18 ; row:2  [2015-10-26 10:43:34]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:43:34]

column:2 ; row:2  [2015-10-26 10:43:35]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:43:35]

updated row:1  [2015-10-26 10:43:35]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:35]

updated row:0  [2015-10-26 10:43:35]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:43:35]

updated row:0  [2015-10-26 10:43:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:43:35]

column:23 ; row:2  [2015-10-26 10:43:35]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:43:35]

column:18 ; row:2  [2015-10-26 10:43:35]

select * from sys_process_history where 1<>1  [2015-10-26 10:43:35]

column:48 ; row:0  [2015-10-26 10:43:35]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000166','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:43:35]

updated row:1  [2015-10-26 10:43:35]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:46:51]

column:2 ; row:1  [2015-10-26 10:46:51]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:46:54]

column:6 ; row:1  [2015-10-26 10:46:54]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:46:56]

column:1 ; row:1  [2015-10-26 10:46:56]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:46:56]

column:23 ; row:0  [2015-10-26 10:46:56]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:46:57]

updated row:0  [2015-10-26 10:46:58]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:46:58]

column:23 ; row:2  [2015-10-26 10:46:58]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:46:58]

column:18 ; row:2  [2015-10-26 10:46:58]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:00]

column:18 ; row:2  [2015-10-26 10:47:00]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:01]

column:18 ; row:2  [2015-10-26 10:47:01]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000166') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:09]

column:9 ; row:2  [2015-10-26 10:47:10]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:47:10]

updated row:0  [2015-10-26 10:47:10]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:10]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:47:10]

updated row:1  [2015-10-26 10:47:11]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:11]

updated row:0  [2015-10-26 10:47:11]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000166') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:18]

column:9 ; row:2  [2015-10-26 10:47:18]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:47:18]

updated row:1  [2015-10-26 10:47:18]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:47:18]

updated row:1  [2015-10-26 10:47:18]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:47:18]

updated row:1  [2015-10-26 10:47:19]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:47:19]

updated row:0  [2015-10-26 10:47:19]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:19]

updated row:1  [2015-10-26 10:47:19]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:47:19]

updated row:1  [2015-10-26 10:47:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:47:19]

updated row:1  [2015-10-26 10:47:19]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:47:19]

updated row:1  [2015-10-26 10:47:19]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:47:19]

updated row:1  [2015-10-26 10:47:19]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:19]

updated row:0  [2015-10-26 10:47:19]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:21]

column:18 ; row:2  [2015-10-26 10:47:21]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:47:22]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:47:22]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000167','Normal Wave','hz','admin',now()  [2015-10-26 10:47:22]

updated row:1  [2015-10-26 10:47:22]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000167'),'W000000167','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:47:22]

updated row:1  [2015-10-26 10:47:22]

update oub_shipment_header set status='150', wave_no='W000000167' where shipment_no='NAMA2015102329279'   [2015-10-26 10:47:22]

updated row:1  [2015-10-26 10:47:22]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:47:22]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:47:22]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000167','0000003809',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:22]

updated row:1  [2015-10-26 10:47:22]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:47:23]

column:15 ; row:2  [2015-10-26 10:47:23]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:47:23]

column:10 ; row:1  [2015-10-26 10:47:23]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:23]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003809'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003809',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:23]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:23]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:47:23]

column:10 ; row:4  [2015-10-26 10:47:23]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:23]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003809'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003809',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:23]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:23]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000167'),'W000000167','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:47:23]

updated row:1  [2015-10-26 10:47:24]

update oub_shipment_header set status='150', wave_no='W000000167' where shipment_no='NAMA2015102345659'   [2015-10-26 10:47:24]

updated row:1  [2015-10-26 10:47:24]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:47:24]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:47:24]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000167','0000003810',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:24]

updated row:1  [2015-10-26 10:47:24]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:47:24]

column:15 ; row:2  [2015-10-26 10:47:24]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:47:24]

column:10 ; row:1  [2015-10-26 10:47:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:47:24]

updated row:1  [2015-10-26 10:47:24]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003810'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003810',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:47:24]

updated row:1  [2015-10-26 10:47:24]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:47:24]

updated row:1  [2015-10-26 10:47:24]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:47:24]

column:10 ; row:2  [2015-10-26 10:47:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:47:25]

updated row:1  [2015-10-26 10:47:25]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003810'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003810',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:47:25]

updated row:1  [2015-10-26 10:47:25]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:47:25]

updated row:1  [2015-10-26 10:47:25]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:47:25]

column:2 ; row:2  [2015-10-26 10:47:25]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:47:25]

updated row:1  [2015-10-26 10:47:25]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:25]

updated row:0  [2015-10-26 10:47:25]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:25]

updated row:0  [2015-10-26 10:47:25]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:47:25]

column:23 ; row:2  [2015-10-26 10:47:25]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:25]

column:18 ; row:2  [2015-10-26 10:47:25]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:47:25]

column:2 ; row:2  [2015-10-26 10:47:25]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:47:26]

updated row:1  [2015-10-26 10:47:26]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:26]

updated row:0  [2015-10-26 10:47:26]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:26]

updated row:0  [2015-10-26 10:47:26]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:47:26]

column:23 ; row:2  [2015-10-26 10:47:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:26]

column:18 ; row:2  [2015-10-26 10:47:26]

select * from sys_process_history where 1<>1  [2015-10-26 10:47:26]

column:48 ; row:0  [2015-10-26 10:47:26]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000167','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:47:26]

updated row:1  [2015-10-26 10:47:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:29]

column:18 ; row:2  [2015-10-26 10:47:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:30]

column:18 ; row:2  [2015-10-26 10:47:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:32]

column:18 ; row:2  [2015-10-26 10:47:32]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000167') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:33]

column:9 ; row:2  [2015-10-26 10:47:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:47:34]

updated row:1  [2015-10-26 10:47:34]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:47:34]

updated row:1  [2015-10-26 10:47:34]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:47:34]

updated row:1  [2015-10-26 10:47:34]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:47:34]

updated row:0  [2015-10-26 10:47:34]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:34]

updated row:1  [2015-10-26 10:47:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:47:34]

updated row:1  [2015-10-26 10:47:34]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:47:34]

updated row:1  [2015-10-26 10:47:34]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:47:35]

updated row:1  [2015-10-26 10:47:35]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:47:35]

updated row:1  [2015-10-26 10:47:35]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:47:35]

updated row:0  [2015-10-26 10:47:35]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:47:37]

column:18 ; row:2  [2015-10-26 10:47:37]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000167') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:38]

column:9 ; row:2  [2015-10-26 10:47:38]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:47:38]

updated row:1  [2015-10-26 10:47:38]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:47:38]

updated row:1  [2015-10-26 10:47:39]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:47:39]

updated row:1  [2015-10-26 10:47:39]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:47:39]

updated row:0  [2015-10-26 10:47:39]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:39]

updated row:1  [2015-10-26 10:47:39]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:47:39]

updated row:1  [2015-10-26 10:47:39]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:47:39]

updated row:1  [2015-10-26 10:47:39]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:47:39]

updated row:1  [2015-10-26 10:47:39]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:47:39]

updated row:1  [2015-10-26 10:47:39]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:47:39]

updated row:0  [2015-10-26 10:47:40]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 10:48:03]

column:1 ; row:1  [2015-10-26 10:48:03]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 10:48:03]

column:22 ; row:0  [2015-10-26 10:48:03]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:48:10]

column:2 ; row:1  [2015-10-26 10:48:10]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:48:15]

column:6 ; row:1  [2015-10-26 10:48:15]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:48:19]

column:1 ; row:1  [2015-10-26 10:48:20]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:48:20]

column:23 ; row:0  [2015-10-26 10:48:20]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:48:23]

updated row:0  [2015-10-26 10:48:23]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:48:23]

column:23 ; row:2  [2015-10-26 10:48:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:48:23]

column:18 ; row:2  [2015-10-26 10:48:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:48:25]

column:18 ; row:2  [2015-10-26 10:48:25]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:48:26]

column:18 ; row:2  [2015-10-26 10:48:26]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 10:49:21]

column:2 ; row:1  [2015-10-26 10:49:22]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 10:49:25]

column:6 ; row:1  [2015-10-26 10:49:25]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 10:49:26]

column:1 ; row:1  [2015-10-26 10:49:26]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 10:49:26]

column:23 ; row:0  [2015-10-26 10:49:27]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 10:49:29]

updated row:0  [2015-10-26 10:49:29]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:49:29]

column:23 ; row:2  [2015-10-26 10:49:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:29]

column:18 ; row:2  [2015-10-26 10:49:30]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:49:31]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:49:31]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000168','Normal Wave','hz','admin',now()  [2015-10-26 10:49:31]

updated row:1  [2015-10-26 10:49:31]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000168'),'W000000168','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:49:31]

updated row:1  [2015-10-26 10:49:31]

update oub_shipment_header set status='150', wave_no='W000000168' where shipment_no='NAMA2015102329279'   [2015-10-26 10:49:31]

updated row:1  [2015-10-26 10:49:31]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:49:31]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:49:31]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000168','0000003811',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:32]

updated row:1  [2015-10-26 10:49:32]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:49:32]

column:15 ; row:2  [2015-10-26 10:49:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:49:32]

column:10 ; row:1  [2015-10-26 10:49:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:49:32]

updated row:1  [2015-10-26 10:49:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003811'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003811',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:49:32]

updated row:1  [2015-10-26 10:49:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:49:32]

updated row:1  [2015-10-26 10:49:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:49:32]

column:10 ; row:4  [2015-10-26 10:49:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:49:32]

updated row:1  [2015-10-26 10:49:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USEdelete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:36:26]
_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003811',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:49:33]

updated row:1  [2015-10-26 10:49:33]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:49:33]

updated row:1  [2015-10-26 10:49:33]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000168'),'W000000168','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:49:33]

updated row:1  [2015-10-26 10:49:33]

update oub_shipment_header set status='150', wave_no='W000000168' where shipment_no='NAMA2015102345659'   [2015-10-26 10:49:33]

updated row:1  [2015-10-26 10:49:33]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:49:33]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:49:33]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000168','0000003812',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:49:33]

updated row:1  [2015-10-26 10:49:33]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:49:33]

column:15 ; row:2  [2015-10-26 10:49:33]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:49:33]

column:10 ; row:1  [2015-10-26 10:49:33]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:49:33]

updated row:1  [2015-10-26 10:49:34]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003812'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003812',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:49:34]

updated row:1  [2015-10-26 10:49:34]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:49:34]

updated row:1  [2015-10-26 10:49:34]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:49:34]

column:10 ; row:2  [2015-10-26 10:49:34]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:49:34]

updated row:1  [2015-10-26 10:49:34]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003812'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003812',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:49:34]

updated row:1  [2015-10-26 10:49:34]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:49:34]

updated row:1  [2015-10-26 10:49:34]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:49:34]

column:2 ; row:2  [2015-10-26 10:49:34]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:49:34]

updated row:1  [2015-10-26 10:49:35]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:35]

updated row:0  [2015-10-26 10:49:35]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:35]

updated row:0  [2015-10-26 10:49:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:49:35]

column:23 ; row:2  [2015-10-26 10:49:35]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:35]

column:18 ; row:2  [2015-10-26 10:49:35]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 10:49:35]

column:2 ; row:2  [2015-10-26 10:49:35]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 10:49:35]

updated row:1  [2015-10-26 10:49:35]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:49:35]

updated row:0  [2015-10-26 10:49:35]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:49:35]

updated row:0  [2015-10-26 10:49:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:49:36]

column:23 ; row:2  [2015-10-26 10:49:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:36]

column:18 ; row:2  [2015-10-26 10:49:36]

select * from sys_process_history where 1<>1  [2015-10-26 10:49:36]

column:48 ; row:0  [2015-10-26 10:49:36]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000168','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:49:36]

updated row:1  [2015-10-26 10:49:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:43]

column:18 ; row:2  [2015-10-26 10:49:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:43]

column:18 ; row:2  [2015-10-26 10:49:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:46]

column:18 ; row:2  [2015-10-26 10:49:46]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000168') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:47]

column:9 ; row:2  [2015-10-26 10:49:47]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:49:48]

updated row:0  [2015-10-26 10:49:48]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:48]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 10:49:48]

updated row:1  [2015-10-26 10:49:49]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:49]

updated row:0  [2015-10-26 10:49:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:49:50]

column:18 ; row:2  [2015-10-26 10:49:51]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000168') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:49:52]

column:9 ; row:2  [2015-10-26 10:49:52]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:49:52]

updated row:1  [2015-10-26 10:49:52]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 10:49:52]

updated row:1  [2015-10-26 10:49:52]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:49:52]

updated row:1  [2015-10-26 10:49:52]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:49:53]

updated row:0  [2015-10-26 10:49:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:49:53]

updated row:1  [2015-10-26 10:49:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:49:53]

updated row:1  [2015-10-26 10:49:53]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 10:49:53]

updated row:1  [2015-10-26 10:49:53]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:49:53]

updated row:1  [2015-10-26 10:49:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 10:49:53]

updated row:1  [2015-10-26 10:49:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:49:53]

updated row:0  [2015-10-26 10:49:53]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 10:49:57]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 10:49:57]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000169','Normal Wave','hz','admin',now()  [2015-10-26 10:49:57]

updated row:1  [2015-10-26 10:49:57]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000169'),'W000000169','hz','NAMA2015102329279','admin',now()   [2015-10-26 10:49:57]

updated row:1  [2015-10-26 10:49:58]

update oub_shipment_header set status='150', wave_no='W000000169' where shipment_no='NAMA2015102329279'   [2015-10-26 10:49:58]

updated row:1  [2015-10-26 10:49:58]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:49:58]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:49:58]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000169','0000003813',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:49:58]

updated row:1  [2015-10-26 10:49:58]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 10:49:58]

column:15 ; row:2  [2015-10-26 10:49:58]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:49:58]

column:10 ; row:1  [2015-10-26 10:49:58]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 10:49:58]

updated row:1  [2015-10-26 10:49:58]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003813'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003813',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:49:58]

updated row:1  [2015-10-26 10:49:58]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 10:49:59]

updated row:1  [2015-10-26 10:49:59]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:49:59]

column:10 ; row:4  [2015-10-26 10:49:59]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 10:49:59]

updated row:1  [2015-10-26 10:49:59]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003813'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003813',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:49:59]

updated row:1  [2015-10-26 10:49:59]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 10:49:59]

updated row:1  [2015-10-26 10:49:59]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000169'),'W000000169','hz','NAMA2015102345659','admin',now()   [2015-10-26 10:49:59]

updated row:1  [2015-10-26 10:49:59]

update oub_shipment_header set status='150', wave_no='W000000169' where shipment_no='NAMA2015102345659'   [2015-10-26 10:49:59]

updated row:1  [2015-10-26 10:49:59]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 10:49:59]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 10:50:00]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000169','0000003814',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 10:50:00]

updated row:1  [2015-10-26 10:50:00]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 10:50:00]

column:15 ; row:2  [2015-10-26 10:50:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:50:00]

column:10 ; row:1  [2015-10-26 10:50:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 10:50:00]

updated row:1  [2015-10-26 10:50:00]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003814'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003814',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 10:50:00]

updated row:1  [2015-10-26 10:50:00]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 10:50:00]

updated row:1  [2015-10-26 10:50:00]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 10:50:00]

column:10 ; row:2  [2015-10-26 10:50:00]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 10:50:00]

updated row:1  [2015-10-26 10:50:01]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003814'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003814',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 10:50:01]

updated row:1  [2015-10-26 10:50:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 10:50:01]

updated row:1  [2015-10-26 10:50:01]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:50:01]

column:2 ; row:2  [2015-10-26 10:50:01]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:50:01]

updated row:1  [2015-10-26 10:50:01]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:50:01]

updated row:0  [2015-10-26 10:50:01]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:50:01]

updated row:0  [2015-10-26 10:50:01]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:50:01]

column:23 ; row:2  [2015-10-26 10:50:01]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:50:01]

column:18 ; row:2  [2015-10-26 10:50:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 10:50:02]

column:2 ; row:2  [2015-10-26 10:50:02]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 10:50:02]

updated row:1  [2015-10-26 10:50:02]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:50:02]

updated row:0  [2015-10-26 10:50:02]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 10:50:02]

updated row:0  [2015-10-26 10:50:02]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name

column:18 ; row:2  [2015-10-26 12:51:38]
ase osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 10:50:02]

column:23 ; row:2  [2015-10-26 10:50:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:50:02]

column:18 ; row:2  [2015-10-26 10:50:02]

select * from sys_process_history where 1<>1  [2015-10-26 10:50:02]

column:48 ; row:0  [2015-10-26 10:50:02]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000169','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 10:50:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:50:03]

updated row:1  [2015-10-26 10:50:03]

column:18 ; row:2  [2015-10-26 10:50:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:50:08]

column:18 ; row:2  [2015-10-26 10:50:08]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 10:50:08]

column:18 ; row:2  [2015-10-26 10:50:08]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:05:17]

column:2 ; row:1  [2015-10-26 11:05:17]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:05:21]

column:6 ; row:1  [2015-10-26 11:05:21]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:05:23]

column:1 ; row:1  [2015-10-26 11:05:23]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:05:23]

column:23 ; row:0  [2015-10-26 11:05:23]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:05:28]

updated row:0  [2015-10-26 11:05:28]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:05:29]

column:23 ; row:2  [2015-10-26 11:05:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:05:29]

column:18 ; row:2  [2015-10-26 11:05:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:05:30]

column:18 ; row:2  [2015-10-26 11:05:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:05:31]

column:18 ; row:2  [2015-10-26 11:05:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:06:44]

column:18 ; row:2  [2015-10-26 11:06:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:06:49]

column:18 ; row:2  [2015-10-26 11:06:49]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000169') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:06:51]

column:9 ; row:2  [2015-10-26 11:06:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:06:51]

updated row:1  [2015-10-26 11:06:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:06:51]

updated row:1  [2015-10-26 11:06:51]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:06:51]

updated row:1  [2015-10-26 11:06:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:06:51]

updated row:0  [2015-10-26 11:06:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:06:51]

updated row:1  [2015-10-26 11:06:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:06:51]

updated row:1  [2015-10-26 11:06:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:06:51]

updated row:1  [2015-10-26 11:06:52]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:06:52]

updated row:1  [2015-10-26 11:06:52]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:06:52]

updated row:1  [2015-10-26 11:06:52]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:06:52]

updated row:0  [2015-10-26 11:06:52]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:06:54]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:06:54]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000170','Normal Wave','hz','admin',now()  [2015-10-26 11:06:54]

updated row:1  [2015-10-26 11:06:54]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000170'),'W000000170','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:06:54]

updated row:1  [2015-10-26 11:06:55]

update oub_shipment_header set status='150', wave_no='W000000170' where shipment_no='NAMA2015102329279'   [2015-10-26 11:06:55]

updated row:1  [2015-10-26 11:06:55]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:06:55]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:06:55]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000170','0000003815',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:06:55]

updated row:1  [2015-10-26 11:06:55]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:06:55]

column:15 ; row:2  [2015-10-26 11:06:55]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:06:55]

column:10 ; row:1  [2015-10-26 11:06:55]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:06:55]

updated row:1  [2015-10-26 11:06:55]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003815'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003815',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:06:55]

updated row:1  [2015-10-26 11:06:56]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:06:56]

updated row:1  [2015-10-26 11:06:56]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:06:56]

column:10 ; row:4  [2015-10-26 11:06:56]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:06:56]

updated row:1  [2015-10-26 11:06:56]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003815'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003815',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:06:56]

updated row:1  [2015-10-26 11:06:56]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:06:56]

updated row:1  [2015-10-26 11:06:56]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:06:56]

column:2 ; row:2  [2015-10-26 11:06:56]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:06:56]

updated row:1  [2015-10-26 11:06:56]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:06:56]

updated row:0  [2015-10-26 11:06:56]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:06:56]

updated row:0  [2015-10-26 11:06:57]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:06:57]

column:23 ; row:2  [2015-10-26 11:06:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:06:57]

column:18 ; row:2  [2015-10-26 11:06:57]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:06:57]

column:2 ; row:2  [2015-10-26 11:06:57]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:06:57]

updated row:1  [2015-10-26 11:06:57]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:06:57]

updated row:0  [2015-10-26 11:06:57]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:06:57]

updated row:0  [2015-10-26 11:06:57]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:06:57]

column:23 ; row:2  [2015-10-26 11:06:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:06:58]

column:18 ; row:2  [2015-10-26 11:06:58]

select * from sys_process_history where 1<>1  [2015-10-26 11:06:58]

column:48 ; row:0  [2015-10-26 11:06:58]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000170','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:06:58]

updated row:1  [2015-10-26 11:06:58]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:07:13]

column:18 ; row:2  [2015-10-26 11:07:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:07:14]

column:18 ; row:2  [2015-10-26 11:07:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:07:14]

column:18 ; row:2  [2015-10-26 11:07:15]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:10:23]

column:2 ; row:1  [2015-10-26 11:10:23]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:10:26]

column:6 ; row:1  [2015-10-26 11:10:26]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 11:10:28]

column:1 ; row:1  [2015-10-26 11:10:28]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 11:10:29]

column:22 ; row:0  [2015-10-26 11:10:29]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 11:10:30]

column:22 ; row:28  [2015-10-26 11:10:30]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:10:30]

column:20 ; row:1  [2015-10-26 11:10:30]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 11:10:31]

column:22 ; row:1436  [2015-10-26 11:10:32]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:10:33]

column:20 ; row:1  [2015-10-26 11:10:33]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101330641' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:10:33]

column:20 ; row:1  [2015-10-26 11:10:33]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101348609' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:10:34]

column:20 ; row:1  [2015-10-26 11:10:34]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='库存查询'   [2015-10-26 11:10:38]

column:1 ; row:1  [2015-10-26 11:10:38]

select ii.WAREHOUSE_CODE 仓库编码,bw.WAREHOUSE_NAME 仓库名称,ii.STORER_CODE 货主编码,bs.STORER_NAME 货主名称,ii.LOCATION_CODE 库位编码,ii.CONTAINER_CODE 箱号,ii.ITEM_CODE 商品编码,bi.ITEM_BAR_CODE 商品条码,bi.ITEM_NAME 商品名称,bi.ITEM_SPEC 商品规格,ii.ON_HAND_QTY 库存总数,ii.ALLOCATED_QTY 已分配数量,ii.PICKED_QTY 已拣货数量,ii.INACTIVE_QTY 冻结数量,biu.unit_name 单位,ii.lot_no 批次号,il.LOTTABLE01 批次属性1,il.LOTTABLE02 批次属性2,il.LOTTABLE03 批次属性3,il.LOTTABLE04 批次属性4,il.LOTTABLE05 批次属性5,il.LOTTABLE06 批次属性6,il.LOTTABLE07 批次属性7,il.LOTTABLE08 批次属性8,il.LOTTABLE09 批次属性9,il.LOTTABLE10 批次属性10 ,ii.`STATUS` 库存状态,ii.QUALITY 库存质量,ii.INV_INVENTORY_ID 库存ID  from inv_inventory ii inner join bas_location bl on ii.LOCATION_CODE=bl.LOCATION_CODE and ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE inner join bas_item bi on ii.ITEM_CODE=bi.ITEM_CODE and ii.STORER_CODE=bi.STORER_CODE inner join bas_item_unit biu on bi.UNIT_CODE = biu.unit_code inner join inv_lot il on ii.LOT_NO=il.LOT_NO inner join bas_storer bs on ii.STORER_CODE=bs.STORER_CODE inner join bas_warehouse bw on ii.WAREHOUSE_CODE=bw.WAREHOUSE_CODE where 1=1 and ii.warehouse_code='hz'  and 1<>1   [2015-10-26 11:10:38]

column:29 ; row:0  [2015-10-26 11:10:38]

select ii.WAREHOUSE_CODE 仓库编码,bw.WAREHOUSE_NAME 仓库名称,ii.STORER_CODE 货主编码,bs.STORER_NAME 货主名称,ii.LOCATION_CODE 库位编码,ii.CONTAINER_CODE 箱号,ii.ITEM_CODE 商品编码,bi.ITEM_BAR_CODE 商品条码,bi.ITEM_NAME 商品名称,bi.ITEM_SPEC 商品规格,ii.ON_HAND_QTY 库存总数,ii.ALLOCATED_QTY 已分配数量,ii.PICKED_QTY 已拣货数量,ii.INACTIVE_QTY 冻结数量,biu.unit_name 单位,ii.lot_no 批次号,il.LOTTABLE01 批次属性1,il.LOTTABLE02 批次属性2,il.LOTTABLE03 批次属性3,il.LOTTABLE04 批次属性4,il.LOTTABLE05 批次属性5,il.LOTTABLE06 批次属性6,il.LOTTABLE07 批次属性7,il.LOTTABLE08 批次属性8,il.LOTTABLE09 批次属性9,il.LOTTABLE10 批次属性10 ,ii.`STATUS` 库存状态,ii.QUALITY 库存质量,ii.INV_INVENTORY_ID 库存ID  from inv_inventory ii inner join bas_location bl on ii.LOCATION_CODE=bl.LOCATION_CODE and ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE inner join bas_item bi on ii.ITEM_CODE=bi.ITEM_CODE and ii.STORER_CODE=bi.STORER_CODE inner join bas_item_unit biu on bi.UNIT_CODE = biu.unit_code inner join inv_lot il on ii.LOT_NO=il.LOT_NO inner join bas_storer bs on ii.STORER_CODE=bs.STORER_CODE inner join bas_warehouse bw on ii.WAREHOUSE_CODE=bw.WAREHOUSE_CODE where 1=1 and ii.warehouse_code='hz'   [2015-10-26 11:10:41]

column:29 ; row:349  [2015-10-26 11:10:41]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:10:46]

column:1 ; row:1  [2015-10-26 11:10:46]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:10:46]

column:23 ; row:0  [2015-10-26 11:10:47]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:10:57]

updated row:0  [2015-10-26 11:10:57]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:10:57]

column:23 ; row:2  [2015-10-26 11:10:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:10:57]

column:18 ; row:2  [2015-10-26 11:10:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:10:58]

column:18 ; row:2  [2015-10-26 11:10:58]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:00]

column:18 ; row:2  [2015-10-26 11:11:00]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:01]

column:18 ; row:2  [2015-10-26 11:11:01]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:01]

column:18 ; row:2  [2015-10-26 11:11:01]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000170') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:08]

column:9 ; row:2  [2015-10-26 11:11:08]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:11:08]

updated row:1  [2015-10-26 11:11:08]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:11:08]

updated row:1  [2015-10-26 11:11:09]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:11:09]

updated row:1  [2015-10-26 11:11:09]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:11:09]

updated row:0  [2015-10-26 11:11:09]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:09]

updated row:1  [2015-10-26 11:11:09]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:11:09]

updated row:1  [2015-10-26 11:11:09]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:11:09]

updated row:1  [2015-10-26 11:11:09]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:11:09]

updated row:1  [2015-10-26 11:11:10]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:11:10]

updated row:1  [2015-10-26 11:11:10]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:10]

updated row:0  [2015-10-26 11:11:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:12]

column:18 ; row:2  [2015-10-26 11:11:12]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000169') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:13]

column:9 ; row:2  [2015-10-26 11:11:13]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:11:13]

updated row:1  [2015-10-26 11:11:13]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:11:13]

updated row:1  [2015-10-26 11:11:14]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:11:14]

updated row:1  [2015-10-26 11:11:14]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:11:14]

updated row:0  [2015-10-26 11:11:14]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:14]

updated row:1  [2015-10-26 11:11:14]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:11:14]

updated row:1  [2015-10-26 11:11:14]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:11:14]

updated row:1  [2015-10-26 11:11:14]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:11:14]

updated row:1  [2015-10-26 11:11:14]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:11:14]

updated row:1  [2015-10-26 11:11:14]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:14]

updated row:0  [2015-10-26 11:11:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:17]

column:18 ; row:2  [2015-10-26 11:11:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:18]

column:18 ; row:2  [2015-10-26 11:11:18]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:11:22]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:11:23]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000171','Normal Wave','hz','admin',now()  [2015-10-26 11:11:23]

updated row:1  [2015-10-26 11:11:23]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000171'),'W000000171','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:11:23]

updated row:1  [2015-10-26 11:11:23]

update oub_shipment_header set status='150', wave_no='W000000171' where shipment_no='NAMA2015102329279'   [2015-10-26 11:11:23]

updated row:1  [2015-10-26 11:11:23]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:11:23]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:11:23]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000171','0000003816',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:23]

updated row:1  [2015-10-26 11:11:23]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:11:23]

column:15 ; row:2  [2015-10-26 11:11:23]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:11:24]

column:10 ; row:1  [2015-10-26 11:11:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:11:24]

updated row:1  [2015-10-26 11:11:24]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003816'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003816',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:11:24]

updated row:1  [2015-10-26 11:11:24]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:11:24]

updated row:1  [2015-10-26 11:11:24]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:11:24]

column:10 ; row:4  [2015-10-26 11:11:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:11:24]

updated row:1  [2015-10-26 11:11:24]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003816'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003816',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:11:24]

updated row:1  [2015-10-26 11:11:24]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:11:24]

updated row:1  [2015-10-26 11:11:24]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000171'),'W000000171','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:11:25]

updated row:1  [2015-10-26 11:11:25]

update oub_shipment_header set status='150', wave_no='W000000171' where shipment_no='NAMA2015102345659'   [2015-10-26 11:11:25]

updated row:1  [2015-10-26 11:11:25]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:11:25]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:11:25]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000171','0000003817',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:25]

updated row:1  [2015-10-26 11:11:25]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:11:25]

column:15 ; row:2  [2015-10-26 11:11:25]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:11:25]

column:10 ; row:1  [2015-10-26 11:11:25]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:11:25]

updated row:1  [2015-10-26 11:11:25]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003817'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003817',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:11:25]

updated row:1  [2015-10-26 11:11:25]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:11:25]

updated row:1  [2015-10-26 11:11:26]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:11:26]

column:10 ; row:2  [2015-10-26 11:11:26]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:11:26]

updated row:1  [2015-10-26 11:11:26]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003817'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003817',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:11:26]

updated row:1  [2015-10-26 11:11:26]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:11:26]

updated row:1  [2015-10-26 11:11:26]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:11:26]

column:2 ; row:2  [2015-10-26 11:11:26]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:11:26]

updated row:1  [2015-10-26 11:11:26]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:26]

updated row:0  [2015-10-26 11:11:26]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:26]

updated row:0  [2015-10-26 11:11:27]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:11:27]

column:23 ; row:2  [2015-10-26 11:11:27]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:27]

column:18 ; row:2  [2015-10-26 11:11:27]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:11:27]

column:2 ; row:2  [2015-10-26 11:11:27]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:11:27]

updated row:1  [2015-10-26 11:11:27]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:27]

updated row:0  [2015-10-26 11:11:27]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:27]

updated row:0  [2015-10-26 11:11:27]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cselect osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:00]
nt_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:28]

column:18 ; row:2  [2015-10-26 11:11:28]

select * from sys_process_history where 1<>1  [2015-10-26 11:11:28]

column:48 ; row:0  [2015-10-26 11:11:28]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000171','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:11:28]

updated row:1  [2015-10-26 11:11:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:52]

column:18 ; row:2  [2015-10-26 11:11:52]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000171') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:54]

column:9 ; row:2  [2015-10-26 11:11:54]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:11:54]

updated row:1  [2015-10-26 11:11:54]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:11:54]

updated row:1  [2015-10-26 11:11:54]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:11:54]

updated row:1  [2015-10-26 11:11:54]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:11:54]

updated row:0  [2015-10-26 11:11:54]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:54]

updated row:1  [2015-10-26 11:11:54]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:11:54]

updated row:1  [2015-10-26 11:11:55]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:11:55]

updated row:1  [2015-10-26 11:11:55]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:11:55]

updated row:1  [2015-10-26 11:11:55]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:11:55]

updated row:1  [2015-10-26 11:11:55]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:11:55]

updated row:0  [2015-10-26 11:11:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:11:57]

column:18 ; row:2  [2015-10-26 11:11:57]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000171') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:11:59]

column:9 ; row:2  [2015-10-26 11:11:59]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:11:59]

updated row:1  [2015-10-26 11:11:59]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:11:59]

updated row:1  [2015-10-26 11:12:00]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:12:00]

updated row:1  [2015-10-26 11:12:00]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:12:00]

updated row:0  [2015-10-26 11:12:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:12:00]

updated row:1  [2015-10-26 11:12:00]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:12:00]

updated row:1  [2015-10-26 11:12:00]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:12:00]

updated row:1  [2015-10-26 11:12:00]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:12:00]

updated row:1  [2015-10-26 11:12:00]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:12:00]

updated row:1  [2015-10-26 11:12:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:12:00]

updated row:0  [2015-10-26 11:12:01]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:03]

column:18 ; row:2  [2015-10-26 11:12:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:03]

column:18 ; row:2  [2015-10-26 11:12:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:05]

column:18 ; row:2  [2015-10-26 11:12:05]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:05]

column:18 ; row:2  [2015-10-26 11:12:05]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:12:11]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:12:11]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000172','Normal Wave','hz','admin',now()  [2015-10-26 11:12:11]

updated row:1  [2015-10-26 11:12:12]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000172'),'W000000172','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:12:12]

updated row:1  [2015-10-26 11:12:12]

update oub_shipment_header set status='150', wave_no='W000000172' where shipment_no='NAMA2015102329279'   [2015-10-26 11:12:12]

updated row:1  [2015-10-26 11:12:12]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:12:12]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:12:12]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000172','0000003818',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:12:12]

updated row:1  [2015-10-26 11:12:12]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:12:12]

column:15 ; row:2  [2015-10-26 11:12:12]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:12:12]

column:10 ; row:1  [2015-10-26 11:12:12]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:12:12]

updated row:1  [2015-10-26 11:12:13]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003818'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003818',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:13]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:12:13]

column:10 ; row:4  [2015-10-26 11:12:13]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:13]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003818'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003818',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:13]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000172'),'W000000172','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:13]

update oub_shipment_header set status='150', wave_no='W000000172' where shipment_no='NAMA2015102345659'   [2015-10-26 11:12:13]

updated row:1  [2015-10-26 11:12:14]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:12:14]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:12:14]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000172','0000003819',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:12:14]

updated row:1  [2015-10-26 11:12:14]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:12:14]

column:15 ; row:2  [2015-10-26 11:12:14]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:12:14]

column:10 ; row:1  [2015-10-26 11:12:14]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:12:14]

updated row:1  [2015-10-26 11:12:14]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003819'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003819',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:12:14]

updated row:1  [2015-10-26 11:12:14]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:12:15]

updated row:1  [2015-10-26 11:12:15]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:12:15]

column:10 ; row:2  [2015-10-26 11:12:15]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:12:15]

updated row:1  [2015-10-26 11:12:15]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003819'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003819',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:12:15]

updated row:1  [2015-10-26 11:12:15]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:12:15]

updated row:1  [2015-10-26 11:12:15]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:12:15]

column:2 ; row:2  [2015-10-26 11:12:15]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:12:15]

updated row:1  [2015-10-26 11:12:16]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:12:16]

updated row:0  [2015-10-26 11:12:16]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:12:16]

updated row:0  [2015-10-26 11:12:16]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:12:16]

column:23 ; row:2  [2015-10-26 11:12:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:16]

column:18 ; row:2  [2015-10-26 11:12:16]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:12:16]

column:2 ; row:2  [2015-10-26 11:12:16]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:12:16]

updated row:1  [2015-10-26 11:12:16]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:12:16]

updated row:0  [2015-10-26 11:12:17]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:12:17]

updated row:0  [2015-10-26 11:12:17]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:12:17]

column:23 ; row:2  [2015-10-26 11:12:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:17]

column:18 ; row:2  [2015-10-26 11:12:17]

select * from sys_process_history where 1<>1  [2015-10-26 11:12:17]

column:48 ; row:0  [2015-10-26 11:12:17]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000172','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:12:17]

updated row:1  [2015-10-26 11:12:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:12:21]

column:18 ; row:2  [2015-10-26 11:12:21]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:13:41]

column:2 ; row:1  [2015-10-26 11:13:41]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:13:44]

column:6 ; row:1  [2015-10-26 11:13:44]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:13:46]

column:1 ; row:1  [2015-10-26 11:13:46]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:13:46]

column:23 ; row:0  [2015-10-26 11:13:46]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:13:49]

updated row:0  [2015-10-26 11:13:50]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:13:50]

column:23 ; row:2  [2015-10-26 11:13:50]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:13:50]

column:18 ; row:2  [2015-10-26 11:13:50]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000172') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:13:56]

column:9 ; row:2  [2015-10-26 11:13:56]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:13:56]

updated row:1  [2015-10-26 11:13:56]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:13:56]

updated row:1  [2015-10-26 11:13:56]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:13:56]

updated row:1  [2015-10-26 11:13:56]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:13:56]

updated row:0  [2015-10-26 11:13:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:13:57]

updated row:1  [2015-10-26 11:13:57]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:13:57]

updated row:1  [2015-10-26 11:13:57]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:13:57]

updated row:1  [2015-10-26 11:13:57]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:13:57]

updated row:1  [2015-10-26 11:13:57]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:13:57]

updated row:1  [2015-10-26 11:13:57]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:13:57]

updated row:0  [2015-10-26 11:13:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:13:59]

column:18 ; row:2  [2015-10-26 11:13:59]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000172') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:14:01]

column:9 ; row:2  [2015-10-26 11:14:01]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:14:01]

updated row:1  [2015-10-26 11:14:01]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:14:01]

updated row:1  [2015-10-26 11:14:01]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:14:01]

updated row:1  [2015-10-26 11:14:01]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:14:01]

updated row:0  [2015-10-26 11:14:01]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:14:01]

updated row:1  [2015-10-26 11:14:01]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:14:01]

updated row:1  [2015-10-26 11:14:02]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:14:02]

updated row:1  [2015-10-26 11:14:02]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:14:02]

updated row:1  [2015-10-26 11:14:02]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:14:02]

updated row:1  [2015-10-26 11:14:02]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:14:02]

updated row:0  [2015-10-26 11:14:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:14:04]

column:18 ; row:2  [2015-10-26 11:14:04]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:14:05]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:14:05]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000173','Normal Wave','hz','admin',now()  [2015-10-26 11:14:05]

updated row:1  [2015-10-26 11:14:05]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000173'),'W000000173','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:14:05]

updated row:1  [2015-10-26 11:14:06]

update oub_shipment_header set status='150', wave_no='W000000173' where shipment_no='NAMA2015102329279'   [2015-10-26 11:14:06]

updated row:1  [2015-10-26 11:14:06]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:14:06]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:14:06]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000173','0000003820',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:14:06]

updated row:1  [2015-10-26 11:14:06]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:14:06]

column:15 ; row:2  [2015-10-26 11:14:06]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:14:06]

column:10 ; row:1  [2015-10-26 11:14:06]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:14:06]

updated row:1  [2015-10-26 11:14:06]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003820'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003820',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:14:06]

updated row:1  [2015-10-26 11:14:06]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:14:06]

updated row:1  [2015-10-26 11:14:07]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:14:07]

column:10 ; row:4  [2015-10-26 11:14:07]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:14:07]

updated row:1  [2015-10-26 11:14:07]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003820'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003820',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:14:07]

updated row:1  [2015-10-26 11:14:07]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:14:07]

updated row:1  [2015-10-26 11:14:07]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000173'),'W000000173','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:14:07]

updated row:1  [2015-10-26 11:14:07]

update oub_shipment_header set status='150', wave_no='W000000173' where shipment_no='NAMA2015102345659'   [2015-10-26 11:14:07]

updated row:1  [2015-10-26 11:14:07]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:14:07]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:14:07]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000173','0000003821',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:14:08]

updated row:1  [2015-10-26 11:14:08]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:14:08]

column:15 ; row:2  [2015-10-26 11:14:08]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:14:08]

column:10 ; row:1  [2015-10-26 11:14:08]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:14:08]

updated row:1  [2015-10-26 11:14:08]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003821'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003821',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:14:08]

updated row:1  [2015-10-26 11:14:08]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:14:08]

updated row:1  [2015-10-26 11:14:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:14:09]

column:10 ; row:2  [2015-10-26 11:14:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:14:09]

updated row:1  [2015-10-26 11:14:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003821'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003821',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:14:09]

updated row:1  [2015-10-26 11:14:09]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:14:09]

updated row:1  [2015-10-26 11:14:09]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:14:09]

column:2 ; row:2  [2015-10-26 11:14:09]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:14:09]

updated row:1  [2015-10-26 11:14:09]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:14:09]

updated row:0  [2015-10-26 11:14:09]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:14:09]

updated row:0  [2015-10-26 11:14:10]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:14:10]

column:23 ; row:2  [2015-10-26 11:14:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:14:10]

column:18 ; row:2  [2015-10-26 11:14:10]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:14:10]

column:2 ; row:2  [2015-10-26 11:14:10]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:14:10]

updated row:1  [2015-10-26 11:14:10]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:14:10]

updated row:0  [2015-10-26 11:14:10]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:14:10]

updated row:0  [2015-10-26 11:14:10]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:14:10]

column:23 ; row:2  [2015-10-26 11:14:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:14:11]

column:18 ; row:2  [2015-10-26 11:14:11]

select * from sys_process_history where 1<>1  [2015-10-26 11:14:11]

column:48 ; row:0  [2015-10-26 11:14:11]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000173','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:14:11]

updated row:1  [2015-10-26 11:14:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:14:14]

column:18 ; row:2  [2015-10-26 11:14:14]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:15:06]

column:2 ; row:1  [2015-10-26 11:15:06]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:15:09]

column:6 ; row:1  [2015-10-26 11:15:09]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:15:12]

column:1 ; row:1  [2015-10-26 11:15:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:15:12]

column:23 ; row:0  [2015-10-26 11:15:12]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:15:13]

updated row:0  [2015-10-26 11:15:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:15:13]

column:23 ; row:2  [2015-10-26 11:15:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:15:14]

column:18 ; row:2  [2015-10-26 11:15:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:15:17]

column:18 ; row:2  [2015-10-26 11:15:17]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000173') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:15:18]

column:9 ; row:2  [2015-10-26 11:15:18]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:15:18]

updated row:1  [2015-10-26 11:15:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:19]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:19]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:15:19]

updated row:0  [2015-10-26 11:15:19]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:19]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:19]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:19]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:19]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:15:19]

updated row:1  [2015-10-26 11:15:20]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:15:20]

updated row:0  [2015-10-26 11:15:20]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:15:21]

column:18 ; row:2  [2015-10-26 11:15:21]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000173') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:15:23]

column:9 ; row:2  [2015-10-26 11:15:23]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:15:23]

updated row:1  [2015-10-26 11:15:23]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:15:23]

updated row:1  [2015-10-26 11:15:23]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:15:23]

updated row:1  [2015-10-26 11:15:23]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:15:23]

updated row:0  [2015-10-26 11:15:24]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:15:24]

updated row:1  [2015-10-26 11:15:24]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:15:24]

updated row:1  [2015-10-26 11:15:24]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:15:24]

updated row:1  [2015-10-26 11:15:24]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:15:24]

updated row:1  [2015-10-26 11:15:24]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:15:24]

updated row:1  [2015-10-26 11:15:24]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:15:24]

updated row:0  [2015-10-26 11:15:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:15:31]

column:18 ; row:2  [2015-10-26 11:15:31]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:15:32]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:15:32]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000174','Normal Wave','hz','admin',now()  [2015-10-26 11:15:32]

updated row:1  [2015-10-26 11:15:32]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000174'),'W000000174','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:15:32]

updated row:1  [2015-10-26 11:15:33]

update oub_shipment_header set status='150', wave_no='W000000174' where shipment_no='NAMA2015102329279'   [2015-10-26 11:15:33]

updated row:1  [2015-10-26 11:15:33]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:15:33]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:15:33]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000174','0000003822',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:15:33]

updated row:1  [2015-10-26 11:15:33]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:15:33]

column:15 ; row:2  [2015-10-26 11:15:33]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:15:33]

column:10 ; row:1  [2015-10-26 11:15:33]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:15:33]

updated row:1  [2015-10-26 11:15:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003822'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003822',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:15:33]

updated row:1  [2015-10-26 11:15:34]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:15:34]

updated row:1  [2015-10-26 11:15:34]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:15:34]

column:10 ; row:4  [2015-10-26 11:15:34]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:15:34]

updated row:1  [2015-10-26 11:15:34]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003822'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WA

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:36:25]
', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:15:34]

updated row:1  [2015-10-26 11:15:34]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:15:34]

updated row:1  [2015-10-26 11:15:34]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000174'),'W000000174','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:15:34]

updated row:1  [2015-10-26 11:15:34]

update oub_shipment_header set status='150', wave_no='W000000174' where shipment_no='NAMA2015102345659'   [2015-10-26 11:15:34]

updated row:1  [2015-10-26 11:15:34]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:15:34]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:15:35]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000174','0000003823',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:15:35]

updated row:1  [2015-10-26 11:15:35]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:15:35]

column:15 ; row:2  [2015-10-26 11:15:35]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:15:35]

column:10 ; row:1  [2015-10-26 11:15:35]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:15:35]

updated row:1  [2015-10-26 11:15:35]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003823'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003823',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:15:35]

updated row:1  [2015-10-26 11:15:35]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:15:35]

updated row:1  [2015-10-26 11:15:35]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:15:35]

column:10 ; row:2  [2015-10-26 11:15:35]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:15:35]

updated row:1  [2015-10-26 11:15:36]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003823'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003823',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:15:36]

updated row:1  [2015-10-26 11:15:36]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:15:36]

updated row:1  [2015-10-26 11:15:36]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:15:36]

column:2 ; row:2  [2015-10-26 11:15:36]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:15:36]

updated row:1  [2015-10-26 11:15:36]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:15:36]

updated row:0  [2015-10-26 11:15:36]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:15:36]

updated row:0  [2015-10-26 11:15:36]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:15:36]

column:23 ; row:2  [2015-10-26 11:15:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:15:37]

column:18 ; row:2  [2015-10-26 11:15:37]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:15:37]

column:2 ; row:2  [2015-10-26 11:15:37]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:15:37]

updated row:1  [2015-10-26 11:15:37]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:15:37]

updated row:0  [2015-10-26 11:15:37]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:15:37]

updated row:0  [2015-10-26 11:15:37]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:15:37]

column:23 ; row:2  [2015-10-26 11:15:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:15:37]

column:18 ; row:2  [2015-10-26 11:15:38]

select * from sys_process_history where 1<>1  [2015-10-26 11:15:38]

column:48 ; row:0  [2015-10-26 11:15:38]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000174','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:15:38]

updated row:1  [2015-10-26 11:15:38]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:16:37]

column:2 ; row:1  [2015-10-26 11:16:37]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:16:42]

column:6 ; row:1  [2015-10-26 11:16:42]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:16:45]

column:1 ; row:1  [2015-10-26 11:16:45]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:16:45]

column:23 ; row:0  [2015-10-26 11:16:45]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:16:47]

updated row:0  [2015-10-26 11:16:47]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:16:47]

column:23 ; row:2  [2015-10-26 11:16:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:16:47]

column:18 ; row:2  [2015-10-26 11:16:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:16:48]

column:18 ; row:2  [2015-10-26 11:16:48]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000174') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:16:50]

column:9 ; row:2  [2015-10-26 11:16:50]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:16:50]

updated row:1  [2015-10-26 11:16:50]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:16:50]

updated row:1  [2015-10-26 11:16:50]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:16:51]

updated row:1  [2015-10-26 11:16:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:16:51]

updated row:0  [2015-10-26 11:16:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:16:51]

updated row:1  [2015-10-26 11:16:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:16:51]

updated row:1  [2015-10-26 11:16:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:16:51]

updated row:1  [2015-10-26 11:16:51]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:16:51]

updated row:1  [2015-10-26 11:16:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:16:51]

updated row:1  [2015-10-26 11:16:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:16:52]

updated row:0  [2015-10-26 11:16:52]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:16:53]

column:18 ; row:2  [2015-10-26 11:16:53]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000174') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:16:55]

column:9 ; row:2  [2015-10-26 11:16:55]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:16:55]

updated row:1  [2015-10-26 11:16:55]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:16:55]

updated row:1  [2015-10-26 11:16:56]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:16:56]

updated row:1  [2015-10-26 11:16:56]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:16:56]

updated row:0  [2015-10-26 11:16:56]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:16:56]

updated row:1  [2015-10-26 11:16:56]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:16:56]

updated row:1  [2015-10-26 11:16:56]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:16:56]

updated row:1  [2015-10-26 11:16:56]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:16:56]

updated row:1  [2015-10-26 11:16:56]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:16:56]

updated row:1  [2015-10-26 11:16:56]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:16:56]

updated row:0  [2015-10-26 11:16:56]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:16:59]

column:18 ; row:2  [2015-10-26 11:16:59]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:16:59]

column:18 ; row:2  [2015-10-26 11:16:59]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:17:07]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:17:08]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000175','Normal Wave','hz','admin',now()  [2015-10-26 11:17:08]

updated row:1  [2015-10-26 11:17:08]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000175'),'W000000175','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:17:08]

updated row:1  [2015-10-26 11:17:08]

update oub_shipment_header set status='150', wave_no='W000000175' where shipment_no='NAMA2015102329279'   [2015-10-26 11:17:08]

updated row:1  [2015-10-26 11:17:08]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:17:08]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:17:08]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000175','0000003824',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:08]

updated row:1  [2015-10-26 11:17:08]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:17:08]

column:15 ; row:2  [2015-10-26 11:17:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:09]

column:10 ; row:1  [2015-10-26 11:17:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:17:09]

updated row:1  [2015-10-26 11:17:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003824'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003824',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:17:09]

updated row:1  [2015-10-26 11:17:09]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:17:09]

updated row:1  [2015-10-26 11:17:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:09]

column:10 ; row:4  [2015-10-26 11:17:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:17:09]

updated row:1  [2015-10-26 11:17:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003824'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003824',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:17:09]

updated row:1  [2015-10-26 11:17:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:17:10]

updated row:1  [2015-10-26 11:17:10]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000175'),'W000000175','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:17:10]

updated row:1  [2015-10-26 11:17:10]

update oub_shipment_header set status='150', wave_no='W000000175' where shipment_no='NAMA2015102345659'   [2015-10-26 11:17:10]

updated row:1  [2015-10-26 11:17:10]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:17:10]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:17:10]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000175','0000003825',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:10]

updated row:1  [2015-10-26 11:17:10]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:17:10]

column:15 ; row:2  [2015-10-26 11:17:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:10]

column:10 ; row:1  [2015-10-26 11:17:11]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:17:11]

updated row:1  [2015-10-26 11:17:11]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003825'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003825',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:17:11]

updated row:1  [2015-10-26 11:17:11]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:17:11]

updated row:1  [2015-10-26 11:17:11]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:11]

column:10 ; row:2  [2015-10-26 11:17:11]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:17:11]

updated row:1  [2015-10-26 11:17:11]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003825'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003825',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:17:11]

updated row:1  [2015-10-26 11:17:11]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:17:11]

updated row:1  [2015-10-26 11:17:11]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:17:11]

column:2 ; row:2  [2015-10-26 11:17:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:17:12]

updated row:1  [2015-10-26 11:17:12]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:12]

updated row:0  [2015-10-26 11:17:12]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:12]

updated row:0  [2015-10-26 11:17:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:17:12]

column:23 ; row:2  [2015-10-26 11:17:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:12]

column:18 ; row:2  [2015-10-26 11:17:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:17:12]

column:2 ; row:2  [2015-10-26 11:17:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:17:12]

updated row:1  [2015-10-26 11:17:12]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:13]

updated row:0  [2015-10-26 11:17:13]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:13]

updated row:0  [2015-10-26 11:17:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:17:13]

column:23 ; row:2  [2015-10-26 11:17:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:13]

column:18 ; row:2  [2015-10-26 11:17:13]

select * from sys_process_history where 1<>1  [2015-10-26 11:17:13]

column:48 ; row:0  [2015-10-26 11:17:13]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000175','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:17:13]

updated row:1  [2015-10-26 11:17:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:21]

column:18 ; row:2  [2015-10-26 11:17:21]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000175') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:22]

column:9 ; row:2  [2015-10-26 11:17:23]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:17:23]

updated row:1  [2015-10-26 11:17:23]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:17:23]

updated row:1  [2015-10-26 11:17:23]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:17:23]

updated row:1  [2015-10-26 11:17:23]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:17:23]

updated row:0  [2015-10-26 11:17:23]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:23]

updated row:1  [2015-10-26 11:17:23]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:17:23]

updated row:1  [2015-10-26 11:17:24]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:17:24]

updated row:1  [2015-10-26 11:17:24]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:17:24]

updated row:1  [2015-10-26 11:17:24]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:17:24]

updated row:1  [2015-10-26 11:17:24]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:24]

updated row:0  [2015-10-26 11:17:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:26]

column:18 ; row:2  [2015-10-26 11:17:26]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000175') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:28]

column:9 ; row:2  [2015-10-26 11:17:28]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:17:29]

updated row:1  [2015-10-26 11:17:29]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:17:29]

updated row:1  [2015-10-26 11:17:29]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:17:29]

updated row:1  [2015-10-26 11:17:29]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:17:29]

updated row:0  [2015-10-26 11:17:29]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:29]

updated row:1  [2015-10-26 11:17:29]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:17:29]

updated row:1  [2015-10-26 11:17:29]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:17:29]

updated row:1  [2015-10-26 11:17:29]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:17:30]

updated row:1  [2015-10-26 11:17:30]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:17:30]

updated row:1  [2015-10-26 11:17:30]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:30]

updated row:0  [2015-10-26 11:17:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:32]

column:18 ; row:2  [2015-10-26 11:17:32]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:17:33]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:17:33]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000176','Normal Wave','hz','admin',now()  [2015-10-26 11:17:34]

updated row:1  [2015-10-26 11:17:34]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000176'),'W000000176','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:17:34]

updated row:1  [2015-10-26 11:17:34]

update oub_shipment_header set status='150', wave_no='W000000176' where shipment_no='NAMA2015102345659'   [2015-10-26 11:17:34]

updated row:1  [2015-10-26 11:17:34]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:17:34]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:17:34]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000176','0000003826',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:34]

updated row:1  [2015-10-26 11:17:34]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:17:34]

column:15 ; row:2  [2015-10-26 11:17:34]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:34]

column:10 ; row:1  [2015-10-26 11:17:35]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:17:35]

updated row:1  [2015-10-26 11:17:35]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003826'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003826',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:17:35]

updated row:1  [2015-10-26 11:17:35]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:17:35]

updated row:1  [2015-10-26 11:17:35]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:35]

column:10 ; row:2  [2015-10-26 11:17:35]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:17:35]

updated row:1  [2015-10-26 11:17:35]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003826'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003826',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:17:35]

updated row:1  [2015-10-26 11:17:35]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:17:35]

updated row:1  [2015-10-26 11:17:36]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000176'),'W000000176','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:17:36]

updated row:1  [2015-10-26 11:17:36]

update oub_shipment_header set status='150', wave_no='W000000176' where shipment_no='NAMA2015102329279'   [2015-10-26 11:17:36]

updated row:1  [2015-10-26 11:17:36]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:17:36]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:17:36]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000176','0000003827',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:36]

updated row:1  [2015-10-26 11:17:36]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:17:36]

column:15 ; row:2  [2015-10-26 11:17:36]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:36]

column:10 ; row:1  [2015-10-26 11:17:36]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:17:37]

updated row:1  [2015-10-26 11:17:37]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003827'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003827',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:17:37]

updated row:1  [2015-10-26 11:17:37]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:17:37]

updated row:1  [2015-10-26 11:17:37]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:17:37]

column:10 ; row:4  [2015-10-26 11:17:37]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:17:37]

updated row:1  [2015-10-26 11:17:37]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003827'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003827',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:17:37]

updated row:1  [2015-10-26 11:17:37]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:17:37]

updated row:1  [2015-10-26 11:17:38]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:17:38]

column:2 ; row:2  [2015-10-26 11:17:38]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:17:38]

updated row:1  [2015-10-26 11:17:38]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:38]

updated row:0  [2015-10-26 11:17:38]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:17:38]

updated row:0  [2015-10-26 11:17:38]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:17:38]

column:23 ; row:2  [2015-10-26 11:17:38]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:38]

column:18 ; row:2  [2015-10-26 11:17:38]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:17:39]

column:2 ; row:2  [2015-10-26 11:17:39]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:17:39]

updated row:1  [2015-10-26 11:17:39]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:39]

updated row:0  [2015-10-26 11:17:39]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:17:39]

updated row:0  [2015-10-26 11:17:39]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:17:39]

column:23 ; row:2  [2015-10-26 11:17:39]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:17:39]

column:18 ; row:2  [2015-10-26 11:17:39]

select * from sys_process_history where 1<>1  [2015-10-26 11:17:39]

column:48 ; row:0  [2015-10-26 11:17:40]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000176','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:17:40]

updated row:1  [2015-10-26 11:17:40]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:21:47]

column:2 ; row:1  [2015-10-26 11:21:47]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:21:51]

column:6 ; row:1  [2015-10-26 11:21:51]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:21:53]

column:1 ; row:1  [2015-10-26 11:21:53]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:21:53]

column:23 ; row:0  [2015-10-26 11:21:53]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:21:55]

updated row:0  [2015-10-26 11:21:55]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:21:55]

column:23 ; row:2  [2015-10-26 11:21:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:21:55]

column:18 ; row:2  [2015-10-26 11:21:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:21:56]

column:18 ; row:2  [2015-10-26 11:21:56]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000176') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:21:58]

column:9 ; row:2  [2015-10-26 11:21:58]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:21:58]

updated row:1  [2015-10-26 11:21:58]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:21:58]

updated row:1  [2015-10-26 11:21:59]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:21:59]

updated row:1  [2015-10-26 11:21:59]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:21:59]

updated row:0  [2015-10-26 11:21:59]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:21:59]

updated row:1  [2015-10-26 11:21:59]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:21:59]

updated row:1  [2015-10-26 11:21:59]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:21:59]

updated row:1  [2015-10-26 11:21:59]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:21:59]

updated row:1  [2015-10-26 11:21:59]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:21:59]

updated row:1  [2015-10-26 11:22:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:22:00]

updated row:0  [2015-10-26 11:22:00]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:22:02]

column:18 ; row:2  [2015-10-26 11:22:02]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000176') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:22:03]

column:9 ; row:2  [2015-10-26 11:22:03]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:22:03]

updated row:1  [2015-10-26 11:22:04]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:22:04]

updated row:1  [2015-10-26 11:22:04]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:22:04]

updated row:1  [2015-10-26 11:22:04]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:22:04]

updated row:0  [2015-10-26 11:22:04]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:22:04]

updated row:1  [2015-10-26 11:22:04]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:22:04]

updated row:1  [2015-10-26 11:22:04]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:22:04]

updated row:1  [2015-10-26 11:22:04]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:22:04]

updated row:1  [2015-10-26 11:22:05]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:22:05]

updated row:1  [2015-10-26 11:22:05]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:22:05]

updated row:0  [2015-10-26 11:22:05]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:22:06]

column:18 ; row:2  [2015-10-26 11:22:07]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:22:07]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:22:08]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000177','Normal Wave','hz','admin',now()  [2015-10-26 11:22:08]

updated row:1  [2015-10-26 11:22:08]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000177'),'W000000177','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:22:08]

updated row:1  [2015-10-26 11:22:08]

update oub_shipment_header set status='150', wave_no='W000000177' where shipment_no='NAMA2015102329279'   [2015-10-26 11:22:08]

updated row:1  [2015-10-26 11:22:08]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:22:08]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:22:08]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000177','0000003828',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:22:08]

updated row:1  [2015-10-26 11:22:08]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:22:08]

column:15 ; row:2  [2015-10-26 11:22:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:22:09]

column:10 ; row:1  [2015-10-26 11:22:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:22:09]

updated row:1  [2015-10-26 11:22:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003828'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003828',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:22:09]

updated row:1  [2015-10-26 11:22:09]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:22:09]

updated row:1  [2015-10-26 11:22:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:22:09]

column:10 ; row:4  [2015-10-26 11:22:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:22:09]

updated row:1  [2015-10-26 11:22:09]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003828'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003828',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:22:09]

updated row:1  [2015-10-26 11:22:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:22:10]

updated row:1  [2015-10-26 11:22:10]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:22:10]

column:2 ; row:0  [2015-10-26 11:22:10]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:10]

updated row:1  [2015-10-26 11:22:10]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:10]

updated row:2  [2015-10-26 11:22:10]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:10]

updated row:0  [2015-10-26 11:22:10]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:10]

updated row:0  [2015-10-26 11:22:10]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:10]

updated row:15  [2015-10-26 11:22:11]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 11:22:11]

updated row:2  [2015-10-26 11:22:11]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:22:11]

column:2 ; row:0  [2015-10-26 11:22:11]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:11]

updated row:1  [2015-10-26 11:22:11]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:11]

updated row:2  [2015-10-26 11:22:11]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:11]

updated row:0  [2015-10-26 11:22:11]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:11]

updated row:0  [2015-10-26 11:22:11]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:22:11]

updated row:0  [2015-10-26 11:22:11]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 11:22:12]

updated row:0  [2015-10-26 11:22:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:22:15]

column:18 ; row:2  [2015-10-26 11:22:15]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:22:15]

column:18 ; row:2  [2015-10-26 11:22:16]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:30:09]

column:2 ; row:1  [2015-10-26 11:30:10]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:33:03]

column:6 ; row:1  [2015-10-26 11:33:03]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:33:05]

column:1 ; row:1  [2015-10-26 11:33:05]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:33:06]

column:23 ; row:0  [2015-10-26 11:33:06]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:33:08]

updated row:0  [2015-10-26 11:33:08]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:33:08]

column:23 ; row:2  [2015-10-26 11:33:08]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:08]

column:18 ; row:2  [2015-10-26 11:33:08]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:09]

column:18 ; row:2  [2015-10-26 11:33:09]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:33:13]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:33:14]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000178','Normal Wave','hz','admin',now()  [2015-10-26 11:33:14]

updated row:1  [2015-10-26 11:33:14]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000178'),'W000000178','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:33:14]

updated row:1  [2015-10-26 11:33:14]

update oub_shipment_header set status='150', wave_no='W000000178' where shipment_no='NAMA2015102345659'   [2015-10-26 11:33:14]

updated row:1  [2015-10-26 11:33:14]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:33:14]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:33:14]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000178','0000003829',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:33:14]

updated row:1  [2015-10-26 11:33:14]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:33:14]

column:15 ; row:2  [2015-10-26 11:33:15]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:33:15]

column:10 ; row:1  [2015-10-26 11:33:15]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:33:15]

updated row:1  [2015-10-26 11:33:15]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003829'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003829',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:33:15]

updated row:1  [2015-10-26 11:33:15]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:33:15]

updated row:1  [2015-10-26 11:33:15]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:33:15]

column:10 ; row:2  [2015-10-26 11:33:15]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:33:15]

updated row:1  [2015-10-26 11:33:15]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003829'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003829',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:33:15]

updated row:1  [2015-10-26 11:33:16]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:33:16]

updated row:1  [2015-10-26 11:33:16]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:33:16]

column:2 ; row:2  [2015-10-26 11:33:16]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:33:16]

updated row:1  [2015-10-26 11:33:16]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:33:16]

updated row:0  [2015-10-26 11:33:16]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:33:16]

updated row:0  [2015-10-26 11:33:16]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:33:16]

column:23 ; row:2  [2015-10-26 11:33:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:16]

column:18 ; row:2  [2015-10-26 11:33:17]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:33:17]

column:2 ; row:2  [2015-10-26 11:33:17]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:33:17]

updated row:1  [2015-10-26 11:33:17]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:33:17]

updated row:0  [2015-10-26 11:33:17]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:33:17]

updated row:0  [2015-10-26 11:33:17]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:33:17]

column:23 ; row:2  [2015-10-26 11:33:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:17]

column:18 ; row:2  [2015-10-26 11:33:17]

select * from sys_process_history where 1<>1  [2015-10-26 11:33:18]

column:48 ; row:0  [2015-10-26 11:33:18]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000178','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:33:18]

updated row:1  [2015-10-26 11:33:18]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:33:22]

updated row:0  [2015-10-26 11:33:22]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:33:22]

column:23 ; row:2  [2015-10-26 11:33:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:22]

column:18 ; row:2  [2015-10-26 11:33:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:24]

column:18 ; row:2  [2015-10-26 11:33:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:24]

column:18 ; row:2  [2015-10-26 11:33:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:28]

column:18 ; row:2  [2015-10-26 11:33:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:29]

column:18 ; row:2  [2015-10-26 11:33:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:33]

column:18 ; row:2  [2015-10-26 11:33:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:33]

column:18 ; row:2  [2015-10-26 11:33:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:34]

column:18 ; row:2  [2015-10-26 11:33:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:36]

column:18 ; row:2  [2015-10-26 11:33:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:36]

column:18 ; row:2  [2015-10-26 11:33:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:37]

column:18 ; row:2  [2015-10-26 11:33:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:42]

column:18 ; row:2  [2015-10-26 11:33:42]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:33:42]

column:18 ; row:2  [2015-10-26 11:33:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:35:08]

column:18 ; row:2  [2015-10-26 11:35:08]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:35:57]

column:2 ; row:1  [2015-10-26 11:35:58]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:36:01]

column:6 ; row:1  [2015-10-26 11:36:01]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:36:04]

column:1 ; row:1  [2015-10-26 11:36:04]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:36:04]

column:23 ; row:0  [2015-10-26 11:36:04]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:36:06]

updated row:0  [2015-10-26 11:36:06]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:36:06]

column:23 ; row:2  [2015-10-26 11:36:06]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:06]

column:18 ; row:2  [2015-10-26 11:36:06]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000177') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:36:09]

column:9 ; row:2  [2015-10-26 11:36:09]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:36:09]

updated row:1  [2015-10-26 11:36:09]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:36:09]

updated row:1  [2015-10-26 11:36:10]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:36:10]

updated row:1  [2015-10-26 11:36:11]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:36:11]

updated row:0  [2015-10-26 11:36:11]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:36:11]

updated row:1  [2015-10-26 11:36:11]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:36:11]

updated row:1  [2015-10-26 11:36:11]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:36:11]

updated row:1  [2015-10-26 11:36:11]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:36:11]

updated row:1  [2015-10-26 11:36:12]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:36:12]

updated row:1  [2015-10-26 11:36:12]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:36:12]

updated row:0  [2015-10-26 11:36:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:14]

column:18 ; row:2  [2015-10-26 11:36:14]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000178') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:36:16]

column:9 ; row:2  [2015-10-26 11:36:16]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:36:16]

updated row:1  [2015-10-26 11:36:16]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:36:16]

updated row:1  [2015-10-26 11:36:16]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:36:16]

updated row:1  [2015-10-26 11:36:16]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:36:16]

updated row:0  [2015-10-26 11:36:16]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:36:16]

updated row:1  [2015-10-26 11:36:17]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:36:17]

updated row:1  [2015-10-26 11:36:17]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:36:17]

updated row:1  [2015-10-26 11:36:17]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:36:17]

updated row:1  [2015-10-26 11:36:17]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:36:17]

updated row:1  [2015-10-26 11:36:17]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:36:17]

updated row:0  [2015-10-26 11:36:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:20]

column:18 ; row:2  [2015-10-26 11:36:20]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:20]

column:18 ; row:2  [2015-10-26 11:36:21]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:36:22]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:36:22]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000179','Normal Wave','hz','admin',now()  [2015-10-26 11:36:22]

updated row:1  [2015-10-26 11:36:22]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000179'),'W000000179','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:36:22]

updated row:1  [2015-10-26 11:36:23]

update oub_shipment_header set status='150', wave_no='W000000179' where shipment_no='NAMA2015102329279'   [2015-10-26 11:36:23]

updated row:1  [2015-10-26 11:36:23]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:36:23]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:36:23]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000179','0000003830',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:36:23]

updated row:1  [2015-10-26 11:36:23]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:36:23]

column:15 ; row:2  [2015-10-26 11:36:23]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:36:23]

column:10 ; row:1  [2015-10-26 11:36:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:36:24]

updated row:1  [2015-10-26 11:36:24]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003830'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003830',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:36:24]

updated row:1  [2015-10-26 11:36:24]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:36:24]

updated row:1  [2015-10-26 11:36:24]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:36:24]

column:10 ; row:4  [2015-10-26 11:36:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:36:24]

updated row:1  [2015-10-26 11:36:25]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003830'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003830',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:36:25]

updated row:1  [2015-10-26 11:36:25]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:36:25]

updated row:1  [2015-10-26 11:36:25]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:36:25]

column:2 ; row:0  [2015-10-26 11:36:25]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:36:25]

updated row:1  [2015-10-26 11:36:25]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:25]

updated row:2  [2015-10-26 11:36:26]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:36:26]

updated row:0  [2015-10-26 11:36:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:26]

updated row:0  [2015-10-26 11:36:26]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:36:26]

updated row:1  [2015-10-26 11:36:26]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 11:36:26]

updated row:1  [2015-10-26 11:36:27]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:36:27]

column:2 ; row:2  [2015-10-26 11:36:27]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:36:27]

updated row:1  [2015-10-26 11:36:27]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:36:27]

updated row:0  [2015-10-26 11:36:27]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:36:27]

updated row:0  [2015-10-26 11:36:27]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:36:27]

column:23 ; row:2  [2015-10-26 11:36:27]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:36:27]

column:18 ; row:2  [2015-10-26 11:36:27]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:36:55]

column:2 ; row:1  [2015-10-26 11:36:55]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:37:21]

column:6 ; row:1  [2015-10-26 11:37:21]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:37:23]

column:1 ; row:1  [2015-10-26 11:37:23]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:37:23]

column:23 ; row:0  [2015-10-26 11:37:23]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.

column:18 ; row:2  [2015-10-26 13:10:18]
onsignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:37:25]

updated row:0  [2015-10-26 11:37:25]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:37:25]

column:23 ; row:2  [2015-10-26 11:37:25]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:37:25]

column:18 ; row:2  [2015-10-26 11:37:25]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000179') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:37:28]

column:9 ; row:2  [2015-10-26 11:37:28]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:37:28]

updated row:1  [2015-10-26 11:37:28]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:37:28]

updated row:1  [2015-10-26 11:37:28]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:37:28]

updated row:1  [2015-10-26 11:37:29]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:37:29]

updated row:0  [2015-10-26 11:37:29]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:37:29]

updated row:1  [2015-10-26 11:37:29]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:37:29]

updated row:1  [2015-10-26 11:37:29]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:37:29]

updated row:1  [2015-10-26 11:37:29]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:37:29]

updated row:1  [2015-10-26 11:37:29]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:37:29]

updated row:1  [2015-10-26 11:37:30]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:37:30]

updated row:0  [2015-10-26 11:37:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:37:32]

column:18 ; row:2  [2015-10-26 11:37:32]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:37:35]

column:18 ; row:2  [2015-10-26 11:37:35]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:37:37]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:37:37]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000180','Normal Wave','hz','admin',now()  [2015-10-26 11:37:37]

updated row:1  [2015-10-26 11:37:37]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000180'),'W000000180','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:37:37]

updated row:1  [2015-10-26 11:37:37]

update oub_shipment_header set status='150', wave_no='W000000180' where shipment_no='NAMA2015102329279'   [2015-10-26 11:37:37]

updated row:1  [2015-10-26 11:37:37]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:37:37]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:37:37]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000180','0000003831',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:37:37]

updated row:1  [2015-10-26 11:37:37]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:37:38]

column:15 ; row:2  [2015-10-26 11:37:38]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:37:38]

column:10 ; row:1  [2015-10-26 11:37:38]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:37:38]

updated row:1  [2015-10-26 11:37:38]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003831'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003831',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:37:38]

updated row:1  [2015-10-26 11:37:38]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:37:38]

updated row:1  [2015-10-26 11:37:38]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:37:38]

column:10 ; row:4  [2015-10-26 11:37:38]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:37:38]

updated row:1  [2015-10-26 11:37:39]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003831'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003831',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:37:39]

updated row:1  [2015-10-26 11:37:39]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:37:39]

updated row:1  [2015-10-26 11:37:39]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000180'),'W000000180','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:37:39]

updated row:1  [2015-10-26 11:37:39]

update oub_shipment_header set status='150', wave_no='W000000180' where shipment_no='NAMA2015102345659'   [2015-10-26 11:37:39]

updated row:1  [2015-10-26 11:37:39]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:37:39]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:37:40]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000180','0000003832',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:37:40]

updated row:1  [2015-10-26 11:37:40]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:37:40]

column:15 ; row:2  [2015-10-26 11:37:40]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:37:40]

column:10 ; row:1  [2015-10-26 11:37:40]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:37:40]

updated row:1  [2015-10-26 11:37:41]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003832'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003832',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:37:41]

updated row:1  [2015-10-26 11:37:41]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:37:41]

updated row:1  [2015-10-26 11:37:41]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:37:41]

column:10 ; row:2  [2015-10-26 11:37:42]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:37:42]

updated row:1  [2015-10-26 11:37:42]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003832'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003832',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:37:42]

updated row:1  [2015-10-26 11:37:42]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:37:42]

updated row:1  [2015-10-26 11:37:42]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:37:42]

column:2 ; row:2  [2015-10-26 11:37:42]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:37:42]

updated row:1  [2015-10-26 11:37:42]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:37:42]

updated row:0  [2015-10-26 11:37:43]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:37:43]

updated row:0  [2015-10-26 11:37:43]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:37:43]

column:23 ; row:2  [2015-10-26 11:37:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:37:43]

column:18 ; row:2  [2015-10-26 11:37:43]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:37:43]

column:2 ; row:2  [2015-10-26 11:37:43]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:37:43]

updated row:1  [2015-10-26 11:37:44]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:37:44]

updated row:0  [2015-10-26 11:37:44]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:37:44]

updated row:0  [2015-10-26 11:37:44]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:37:44]

column:23 ; row:2  [2015-10-26 11:37:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:37:44]

column:18 ; row:2  [2015-10-26 11:37:44]

select * from sys_process_history where 1<>1  [2015-10-26 11:37:44]

column:48 ; row:0  [2015-10-26 11:37:44]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000180','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:37:44]

updated row:1  [2015-10-26 11:37:44]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:38:08]

updated row:0  [2015-10-26 11:38:09]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:38:09]

column:23 ; row:2  [2015-10-26 11:38:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:10]

column:18 ; row:2  [2015-10-26 11:38:15]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:15]

column:18 ; row:2  [2015-10-26 11:38:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:16]

column:18 ; row:2  [2015-10-26 11:38:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:21]

column:18 ; row:2  [2015-10-26 11:38:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:21]

column:18 ; row:2  [2015-10-26 11:38:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:22]

column:18 ; row:2  [2015-10-26 11:38:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:22]

column:18 ; row:2  [2015-10-26 11:38:23]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000180') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:38:24]

column:9 ; row:2  [2015-10-26 11:38:24]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:38:24]

updated row:1  [2015-10-26 11:38:25]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:38:25]

updated row:1  [2015-10-26 11:38:25]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:38:25]

updated row:1  [2015-10-26 11:38:25]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:38:25]

updated row:0  [2015-10-26 11:38:25]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:38:25]

updated row:1  [2015-10-26 11:38:25]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:38:25]

updated row:1  [2015-10-26 11:38:25]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:38:25]

updated row:1  [2015-10-26 11:38:26]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:38:26]

updated row:1  [2015-10-26 11:38:26]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:38:26]

updated row:1  [2015-10-26 11:38:26]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:38:26]

updated row:0  [2015-10-26 11:38:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:28]

column:18 ; row:2  [2015-10-26 11:38:28]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000180') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:38:30]

column:9 ; row:2  [2015-10-26 11:38:30]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:38:30]

updated row:1  [2015-10-26 11:38:30]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:38:30]

updated row:1  [2015-10-26 11:38:31]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:38:31]

updated row:1  [2015-10-26 11:38:31]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:38:31]

updated row:0  [2015-10-26 11:38:31]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:38:31]

updated row:1  [2015-10-26 11:38:32]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:38:32]

updated row:1  [2015-10-26 11:38:32]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:38:32]

updated row:1  [2015-10-26 11:38:32]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:38:32]

updated row:1  [2015-10-26 11:38:32]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:38:32]

updated row:1  [2015-10-26 11:38:32]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:38:32]

updated row:0  [2015-10-26 11:38:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:37]

column:18 ; row:2  [2015-10-26 11:38:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:38]

column:18 ; row:2  [2015-10-26 11:38:38]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:38:39]

column:18 ; row:2  [2015-10-26 11:38:39]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:42:14]

column:2 ; row:1  [2015-10-26 11:42:14]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:42:17]

column:6 ; row:1  [2015-10-26 11:42:17]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:42:20]

column:1 ; row:1  [2015-10-26 11:42:20]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:42:20]

column:23 ; row:0  [2015-10-26 11:42:20]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:42:22]

updated row:0  [2015-10-26 11:42:22]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:42:22]

column:23 ; row:2  [2015-10-26 11:42:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:42:22]

column:18 ; row:2  [2015-10-26 11:42:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:42:24]

column:18 ; row:2  [2015-10-26 11:42:24]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:42:25]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:42:25]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000181','Normal Wave','hz','admin',now()  [2015-10-26 11:42:26]

updated row:1  [2015-10-26 11:42:26]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000181'),'W000000181','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:42:26]

updated row:1  [2015-10-26 11:42:26]

update oub_shipment_header set status='150', wave_no='W000000181' where shipment_no='NAMA2015102329279'   [2015-10-26 11:42:26]

updated row:1  [2015-10-26 11:42:26]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:42:26]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:42:26]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000181','0000003833',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:42:26]

updated row:1  [2015-10-26 11:42:26]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:42:26]

column:15 ; row:2  [2015-10-26 11:42:26]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:42:27]

column:10 ; row:1  [2015-10-26 11:42:27]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:42:27]

updated row:1  [2015-10-26 11:42:27]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003833'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003833',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:42:27]

updated row:1  [2015-10-26 11:42:27]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:42:27]

updated row:1  [2015-10-26 11:42:27]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:42:27]

column:10 ; row:4  [2015-10-26 11:42:27]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:42:27]

updated row:1  [2015-10-26 11:42:27]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003833'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003833',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:42:27]

updated row:1  [2015-10-26 11:42:27]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:42:27]

updated row:1  [2015-10-26 11:42:28]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:42:28]

column:2 ; row:2  [2015-10-26 11:42:28]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:42:28]

updated row:1  [2015-10-26 11:42:28]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:42:28]

updated row:0  [2015-10-26 11:42:28]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:42:28]

updated row:0  [2015-10-26 11:42:28]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:42:28]

column:23 ; row:2  [2015-10-26 11:42:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:42:28]

column:18 ; row:2  [2015-10-26 11:42:28]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:42:29]

column:2 ; row:0  [2015-10-26 11:42:29]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:42:29]

updated row:1  [2015-10-26 11:42:29]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:42:29]

updated row:2  [2015-10-26 11:42:29]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:42:29]

updated row:0  [2015-10-26 11:42:29]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:42:29]

updated row:0  [2015-10-26 11:42:29]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:42:29]

updated row:1  [2015-10-26 11:42:29]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 11:42:29]

updated row:0  [2015-10-26 11:42:30]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:46:31]

column:2 ; row:1  [2015-10-26 11:46:31]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='9c1ad00a16a7c67e2727b471ac969e96'   [2015-10-26 11:46:36]

column:6 ; row:0  [2015-10-26 11:46:36]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:46:41]

column:6 ; row:1  [2015-10-26 11:46:41]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:46:47]

column:1 ; row:1  [2015-10-26 11:46:47]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:46:47]

column:23 ; row:0  [2015-10-26 11:46:47]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:46:49]

updated row:0  [2015-10-26 11:46:49]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:46:49]

column:23 ; row:2  [2015-10-26 11:46:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:46:49]

column:18 ; row:2  [2015-10-26 11:46:49]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000181') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:46:53]

column:9 ; row:2  [2015-10-26 11:46:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:46:53]

updated row:1  [2015-10-26 11:46:53]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:46:53]

updated row:1  [2015-10-26 11:46:53]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:46:53]

updated row:1  [2015-10-26 11:46:53]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:46:53]

updated row:0  [2015-10-26 11:46:53]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:46:53]

updated row:1  [2015-10-26 11:46:53]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:46:53]

updated row:1  [2015-10-26 11:46:54]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:46:54]

updated row:1  [2015-10-26 11:46:54]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:46:54]

updated row:1  [2015-10-26 11:46:54]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:46:54]

updated row:1  [2015-10-26 11:46:54]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:46:54]

updated row:0  [2015-10-26 11:46:54]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:47:12]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:47:12]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000182','Normal Wave','hz','admin',now()  [2015-10-26 11:47:12]

updated row:1  [2015-10-26 11:47:12]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000182'),'W000000182','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:47:12]

updated row:1  [2015-10-26 11:47:12]

update oub_shipment_header set status='150', wave_no='W000000182' where shipment_no='NAMA2015102345659'   [2015-10-26 11:47:12]

updated row:1  [2015-10-26 11:47:13]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:47:13]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:47:13]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000182','0000003834',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:47:13]

updated row:1  [2015-10-26 11:47:13]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:47:13]

column:15 ; row:2  [2015-10-26 11:47:13]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:47:13]

column:10 ; row:1  [2015-10-26 11:47:13]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:47:13]

updated row:1  [2015-10-26 11:47:13]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003834'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003834',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:47:13]

updated row:1  [2015-10-26 11:47:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:47:14]

updated row:1  [2015-10-26 11:47:14]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:47:14]

column:10 ; row:2  [2015-10-26 11:47:14]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:47:14]

updated row:1  [2015-10-26 11:47:14]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003834'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003834',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:47:14]

updated row:1  [2015-10-26 11:47:14]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:47:14]

updated row:1  [2015-10-26 11:47:14]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:47:14]

column:2 ; row:0  [2015-10-26 11:47:14]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:47:14]

updated row:1  [2015-10-26 11:47:14]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:47:15]

updated row:2  [2015-10-26 11:47:15]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:47:15]

updated row:0  [2015-10-26 11:47:15]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:47:15]

updated row:0  [2015-10-26 11:47:15]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:47:15]

updated row:34  [2015-10-26 11:47:15]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 11:47:15]

updated row:34  [2015-10-26 11:47:15]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:47:15]

column:2 ; row:2  [2015-10-26 11:47:15]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:47:15]

updated row:1  [2015-10-26 11:47:15]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:47:15]

updated row:0  [2015-10-26 11:47:16]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:47:16]

updated row:0  [2015-10-26 11:47:16]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:47:16]

column:23 ; row:2  [2015-10-26 11:47:16]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:47:16]

column:18 ; row:2  [2015-10-26 11:47:16]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:51:33]

column:2 ; row:1  [2015-10-26 11:51:33]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:51:37]

column:6 ; row:1  [2015-10-26 11:51:37]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:51:39]

column:1 ; row:1  [2015-10-26 11:51:39]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:51:39]

column:23 ; row:0  [2015-10-26 11:51:39]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:51:45]

updated row:0  [2015-10-26 11:51:46]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:51:46]

column:23 ; row:2  [2015-10-26 11:51:46]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:51:46]

column:18 ; row:2  [2015-10-26 11:51:46]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:51:59]

column:18 ; row:2  [2015-10-26 11:52:00]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000182') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:52:01]

column:9 ; row:2  [2015-10-26 11:52:02]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:52:02]

updated row:1  [2015-10-26 11:52:02]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:52:02]

updated row:1  [2015-10-26 11:52:02]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:52:02]

updated row:1  [2015-10-26 11:52:02]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:52:02]

updated row:0  [2015-10-26 11:52:02]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:52:02]

updated row:1  [2015-10-26 11:52:02]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:52:02]

updated row:1  [2015-10-26 11:52:02]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:52:03]

updated row:1  [2015-10-26 11:52:03]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:52:03]

updated row:1  [2015-10-26 11:52:03]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:52:03]

updated row:1  [2015-10-26 11:52:03]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:52:03]

updated row:0  [2015-10-26 11:52:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:52:07]

column:18 ; row:2  [2015-10-26 11:52:07]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:52:08]

column:18 ; row:2  [2015-10-26 11:52:08]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:52:10]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:52:10]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000183','Normal Wave','hz','admin',now()  [2015-10-26 11:52:10]

updated row:1  [2015-10-26 11:52:10]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000183'),'W000000183','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:52:10]

updated row:1  [2015-10-26 11:52:10]

update oub_shipment_header set status='150', wave_no='W000000183' where shipment_no='NAMA2015102329279'   [2015-10-26 11:52:10]

updated row:1  [2015-10-26 11:52:11]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:52:11]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:52:11]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000183','0000003835',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:52:11]

updated row:1  [2015-10-26 11:52:11]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:52:11]

column:15 ; row:2  [2015-10-26 11:52:11]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:52:11]

column:10 ; row:1  [2015-10-26 11:52:11]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:52:11]

updated row:1  [2015-10-26 11:52:11]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003835'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003835',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:52:11]

updated row:1  [2015-10-26 11:52:12]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:52:12]

updated row:1  [2015-10-26 11:52:12]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:52:12]

column:10 ; row:4  [2015-10-26 11:52:12]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:52:12]

updated row:1  [2015-10-26 11:52:12]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003835'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003835',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:52:12]

updated row:1  [2015-10-26 11:52:12]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:52:12]

updated row:1  [2015-10-26 11:52:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:52:12]

column:2 ; row:2  [2015-10-26 11:52:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:52:12]

updated row:1  [2015-10-26 11:52:13]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:52:13]

updated row:0  [2015-10-26 11:52:13]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:52:13]

updated row:0  [2015-10-26 11:52:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:52:13]

column:23 ; row:2  [2015-10-26 11:52:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:52:13]

column:18 ; row:2  [2015-10-26 11:52:13]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:52:13]

column:2 ; row:0  [2015-10-26 11:52:13]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:52:13]

updated row:1  [2015-10-26 11:52:13]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:52:13]

updated row:2  [2015-10-26 11:52:14]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:52:14]

updated row:0  [2015-10-26 11:52:14]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:52:14]

updated row:0  [2015-10-26 11:52:14]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:52:14]

updated row:1  [2015-10-26 11:52:14]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 11:52:14]

updated row:1  [2015-10-26 11:52:14]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:54:24]

column:2 ; row:1  [2015-10-26 11:54:24]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:54:32]

column:2 ; row:1  [2015-10-26 11:54:32]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:54:36]

column:6 ; row:1  [2015-10-26 11:54:36]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:54:38]

column:1 ; row:1  [2015-10-26 11:54:39]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:54:39]

column:23 ; row:0  [2015-10-26 11:54:39]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:54:41]

updated row:0  [2015-10-26 11:54:41]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:54:41]

column:23 ; row:2  [2015-10-26 11:54:41]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:54:41]

column:18 ; row:2  [2015-10-26 11:54:42]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000183') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:54:45]

column:9 ; row:2  [2015-10-26 11:54:45]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:54:46]

updated row:1  [2015-10-26 11:54:46]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:54:46]

updated row:1  [2015-10-26 11:54:46]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:54:46]

updated row:1  [2015-10-26 11:54:46]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:54:46]

updated row:0  [2015-10-26 11:54:46]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:54:46]

updated row:1  [2015-10-26 11:54:46]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:54:46]

updated row:1  [2015-10-26 11:54:47]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:54:47]

updated row:1  [2015-10-26 11:54:47]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:54:47]

updated row:1  [2015-10-26 11:54:47]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:54:47]

updated row:1  [2015-10-26 11:54:47]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:54:47]

updated row:0  [2015-10-26 11:54:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:54:49]

column:18 ; row:2  [2015-10-26 11:54:49]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:54:50]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:54:50]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000184','Normal Wave','hz','admin',now()  [2015-10-26 11:54:50]

updated row:1  [2015-10-26 11:54:50]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000184'),'W000000184','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:54:50]

updated row:1  [2015-10-26 11:54:50]

update oub_shipment_header set status='150', wave_no='W000000184' where shipment_no='NAMA2015102329279'   [2015-10-26 11:54:50]

updated row:1  [2015-10-26 11:54:50]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:54:50]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:54:51]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000184','0000003836',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:54:51]

updated row:1  [2015-10-26 11:54:51]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:54:51]

column:15 ; row:2  [2015-10-26 11:54:51]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:54:51]

column:10 ; row:1  [2015-10-26 11:54:51]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:54:51]

updated row:1  [2015-10-26 11:54:51]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003836'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003836',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:54:51]

updated row:1  [2015-10-26 11:54:51]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:54:51]

updated row:1  [2015-10-26 11:54:52]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:54:52]

column:10 ; row:4  [2015-10-26 11:54:52]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:54:52]

updated row:1  [2015-10-26 11:54:52]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003836'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003836',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:54:52]

updated row:1  [2015-10-26 11:54:52]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:54:52]

updated row:1  [2015-10-26 11:54:52]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000184'),'W000000184','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:54:52]

updated row:1  [2015-10-26 11:54:52]

update oub_shipment_header set status='150', wave_no='W000000184' where shipment_no='NAMA2015102345659'   [2015-10-26 11:54:52]

updated row:1  [2015-10-26 11:54:52]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:54:53]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:54:53]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000184','0000003837',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:54:53]

updated row:1  [2015-10-26 11:54:53]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:54:53]

column:15 ; row:2  [2015-10-26 11:54:53]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:54:53]

column:10 ; row:1  [2015-10-26 11:54:53]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:54:53]

updated row:1  [2015-10-26 11:54:53]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003837'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003837',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:54:53]

updated row:1  [2015-10-26 11:54:53]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:54:54]

updated row:1  [2015-10-26 11:54:54]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:54:54]

column:10 ; row:2  [2015-10-26 11:54:54]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:54:54]

updated row:1  [2015-10-26 11:54:54]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003837'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003837',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:54:54]

updated row:1  [2015-10-26 11:54:54]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:54:54]

updated row:1  [2015-10-26 11:54:54]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:54:54]

column:2 ; row:2  [2015-10-26 11:54:54]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:54:54]

updated row:1  [2015-10-26 11:54:55]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:54:55]

updated row:0  [2015-10-26 11:54:55]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:54:55]

updated row:0  [2015-10-26 11:54:55]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:54:55]

column:23 ; row:2  [2015-10-26 11:54:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:54:55]

column:18 ; row:2  [2015-10-26 11:54:55]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:54:55]

column:2 ; row:2  [2015-10-26 11:54:55]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:54:55]

updated row:1  [2015-10-26 11:54:56]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:54:56]

updated row:0  [2015-10-26 11:54:56]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:54:56]

updated row:0  [2015-10-26 11:54:56]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:54:56]

column:23 ; row:2  [2015-10-26 11:54:56]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:54:56]

column:18 ; row:2  [2015-10-26 11:54:56]

select * from sys_process_history where 1<>1  [2015-10-26 11:54:56]

column:48 ; row:0  [2015-10-26 11:54:56]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000184','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:54:56]

updated row:1  [2015-10-26 11:54:57]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:57:11]

column:2 ; row:1  [2015-10-26 11:57:11]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:57:14]

column:6 ; row:1  [2015-10-26 11:57:14]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:57:15]

column:1 ; row:1  [2015-10-26 11:57:16]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:57:16]

column:23 ; row:0  [2015-10-26 11:57:16]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:57:23]

updated row:0  [2015-10-26 11:57:23]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:57:23]

column:23 ; row:2  [2015-10-26 11:57:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:23]

column:18 ; row:2  [2015-10-26 11:57:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:24]

column:18 ; row:2  [2015-10-26 11:57:24]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:25]

column:18 ; row:2  [2015-10-26 11:57:25]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000184') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:57:26]

column:9 ; row:2  [2015-10-26 11:57:26]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:57:26]

updated row:1  [2015-10-26 11:57:27]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:57:27]

updated row:1  [2015-10-26 11:57:27]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:57:27]

updated row:1  [2015-10-26 11:57:27]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:57:27]

updated row:0  [2015-10-26 11:57:27]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:57:27]

updated row:1  [2015-10-26 11:57:27]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:57:27]

updated row:1  [2015-10-26 11:57:27]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:57:28]

updated row:1  [2015-10-26 11:57:28]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:57:28]

updated row:1  [2015-10-26 11:57:28]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:57:28]

updated row:1  [2015-10-26 11:57:28]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:57:28]

updated row:0  [2015-10-26 11:57:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:30]

column:18 ; row:2  [2015-10-26 11:57:30]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000184') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:57:32]

column:9 ; row:2  [2015-10-26 11:57:32]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:57:32]

updated row:1  [2015-10-26 11:57:32]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:57:32]

updated row:1  [2015-10-26 11:57:32]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:57:32]

updated row:1  [2015-10-26 11:57:32]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:57:32]

updated row:0  [2015-10-26 11:57:32]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:57:32]

updated row:1  [2015-10-26 11:57:33]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:57:33]

updated row:1  [2015-10-26 11:57:33]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:57:33]

updated row:1  [2015-10-26 11:57:33]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:57:33]

updated row:1  [2015-10-26 11:57:33]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:57:33]

updated row:1  [2015-10-26 11:57:33]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:57:33]

updated row:0  [2015-10-26 11:57:33]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 11:57:45]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 11:57:45]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000185','Normal Wave','hz','admin',now()  [2015-10-26 11:57:45]

updated row:1  [2015-10-26 11:57:45]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000185'),'W000000185','hz','NAMA2015102329279','admin',now()   [2015-10-26 11:57:45]

updated row:1  [2015-10-26 11:57:45]

update oub_shipment_header set status='150', wave_no='W000000185' where shipment_no='NAMA2015102329279'   [2015-10-26 11:57:45]

updated row:1  [2015-10-26 11:57:46]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:57:46]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:57:46]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000185','0000003838',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:57:46]

updated row:1  [2015-10-26 11:57:46]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 11:57:46]

column:15 ; row:2  [2015-10-26 11:57:46]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:57:46]

column:10 ; row:1  [2015-10-26 11:57:46]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 11:57:46]

updated row:1  [2015-10-26 11:57:46]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003838'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003838',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:57:47]

updated row:1  [2015-10-26 11:57:47]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:57:47]

updated row:1  [2015-10-26 11:57:47]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:57:47]

column:10 ; row:4  [2015-10-26 11:57:47]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 11:57:47]

updated row:1  [2015-10-26 11:57:47]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003838'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003838',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:57:47]

updated row:1  [2015-10-26 11:57:47]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:57:47]

updated row:1  [2015-10-26 11:57:47]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000185'),'W000000185','hz','NAMA2015102345659','admin',now()   [2015-10-26 11:57:47]

updated row:1  [2015-10-26 11:57:48]

update oub_shipment_header set status='150', wave_no='W000000185' where shipment_no='NAMA2015102345659'   [2015-10-26 11:57:48]

updated row:1  [2015-10-26 11:57:48]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 11:57:48]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 11:57:48]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000185','0000003839',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:57:48]

updated row:1  [2015-10-26 11:57:48]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 11:57:48]

column:15 ; row:2  [2015-10-26 11:57:48]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:57:48]

column:10 ; row:1  [2015-10-26 11:57:49]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 11:57:49]

updated row:1  [2015-10-26 11:57:49]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003839'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003839',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 11:57:49]

updated row:1  [2015-10-26 11:57:49]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:57:49]

updated row:1  [2015-10-26 11:57:49]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 11:57:49]

column:10 ; row:2  [2015-10-26 11:57:49]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 11:57:49]

updated row:1  [2015-10-26 11:57:49]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003839'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003839',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 11:57:49]

updated row:1  [2015-10-26 11:57:49]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:57:49]

updated row:1  [2015-10-26 11:57:50]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 11:57:50]

column:2 ; row:2  [2015-10-26 11:57:50]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 11:57:50]

updated row:1  [2015-10-26 11:57:50]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:57:50]

updated row:0  [2015-10-26 11:57:50]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:57:50]

updated row:0  [2015-10-26 11:57:50]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:57:50]

column:23 ; row:2  [2015-10-26 11:57:50]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:50]

column:18 ; row:2  [2015-10-26 11:57:51]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 11:57:51]

column:2 ; row:2  [2015-10-26 11:57:51]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 11:57:51]

updated row:1  [2015-10-26 11:57:51]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:57:51]

updated row:0  [2015-10-26 11:57:51]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:57:51]

updated row:0  [2015-10-26 11:57:51]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:57:51]

column:23 ; row:2  [2015-10-26 11:57:51]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:51]

column:18 ; row:2  [2015-10-26 11:57:52]

select * from sys_process_history where 1<>1  [2015-10-26 11:57:52]

column:48 ; row:0  [2015-10-26 11:57:52]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000185','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 11:57:52]

updated row:1  [2015-10-26 11:57:52]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:57:55]

updated row:0  [2015-10-26 11:57:55]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:57:55]

column:23 ; row:2  [2015-10-26 11:57:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:55]

column:18 ; row:2  [2015-10-26 11:57:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:56]

column:18 ; row:2  [2015-10-26 11:57:56]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:57:57]

column:18 ; row:2  [2015-10-26 11:57:57]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 11:58:22]

column:2 ; row:1  [2015-10-26 11:58:22]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 11:58:26]

column:6 ; row:1  [2015-10-26 11:58:26]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 11:58:27]

column:1 ; row:1  [2015-10-26 11:58:27]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 11:58:28]

column:23 ; row:0  [2015-10-26 11:58:28]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 11:58:30]

updated row:0  [2015-10-26 11:58:30]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 11:58:30]

column:23 ; row:2  [2015-10-26 11:58:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:58:31]

column:18 ; row:2  [2015-10-26 11:58:31]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000185') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:58:33]

column:9 ; row:2  [2015-10-26 11:58:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:58:34]

updated row:1  [2015-10-26 11:58:34]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:58:34]

updated row:1  [2015-10-26 11:58:34]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 11:58:34]

updated row:1  [2015-10-26 11:58:34]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:58:34]

updated row:0  [2015-10-26 11:58:34]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:58:34]

updated row:1  [2015-10-26 11:58:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:58:34]

updated row:1  [2015-10-26 11:58:35]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:58:35]

updated row:1  [2015-10-26 11:58:35]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 11:58:35]

updated row:1  [2015-10-26 11:58:35]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 11:58:35]

updated row:1  [2015-10-26 11:58:35]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 11:58:35]

updated row:0  [2015-10-26 11:58:35]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:58:37]

column:18 ; row:2  [2015-10-26 11:58:37]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000185') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:58:38]

column:9 ; row:2  [2015-10-26 11:58:38]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:58:38]

updated row:1  [2015-10-26 11:58:39]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 11:58:39]

updated row:1  [2015-10-26 11:58:39]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 11:58:39]

updated row:1  [2015-10-26 11:58:39]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:58:39]

updated row:0  [2015-10-26 11:58:39]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:58:39]

updated row:1  [2015-10-26 11:58:39]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:58:39]

updated row:1  [2015-10-26 11:58:39]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 11:58:39]

updated row:1  [2015-10-26 11:58:39]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 11:58:39]

updated row:1  [2015-10-26 11:58:40]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 11:58:40]

updated row:1  [2015-10-26 11:58:40]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 11:58:40]

updated row:0  [2015-10-26 11:58:40]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 11:58:42]

column:18 ; row:2  [2015-10-26 11:58:42]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 12:00:05]

column:2 ; row:1  [2015-10-26 12:00:05]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 12:00:10]

column:6 ; row:1  [2015-10-26 12:00:10]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 12:00:12]

column:1 ; row:1  [2015-10-26 12:00:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 12:00:12]

column:23 ; row:0  [2015-10-26 12:00:12]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:00:20]

updated row:0  [2015-10-26 12:00:21]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:00:21]

column:23 ; row:2  [2015-10-26 12:00:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:00:21]

column:18 ; row:2  [2015-10-26 12:00:21]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:00:22]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:00:22]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000186','Normal Wave','hz','admin',now()  [2015-10-26 12:00:22]

updated row:1  [2015-10-26 12:00:23]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000186'),'W000000186','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:00:23]

updated row:1  [2015-10-26 12:00:23]

update oub_shipment_header set status='150', wave_no='W000000186' where shipment_no='NAMA2015102329279'   [2015-10-26 12:00:23]

updated row:1  [2015-10-26 12:00:23]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:00:23]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:00:23]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000186','0000003840',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:23]

updated row:1  [2015-10-26 12:00:23]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:00:23]

column:15 ; row:2  [2015-10-26 12:00:23]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:00:23]

column:10 ; row:1  [2015-10-26 12:00:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:00:24]

updated row:1  [2015-10-26 12:00:24]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003840'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003840',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:00:24]

updated row:1  [2015-10-26 12:00:24]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:00:24]

updated row:1  [2015-10-26 12:00:24]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:00:24]

column:10 ; row:4  [2015-10-26 12:00:24]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:00:24]

updated row:1  [2015-10-26 12:00:24]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003840'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003840',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:00:24]

updated row:1  [2015-10-26 12:00:24]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:00:25]

updated row:1  [2015-10-26 12:00:25]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000186'),'W000000186','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:00:25]

updated row:1  [2015-10-26 12:00:25]

update oub_shipment_header set status='150', wave_no='W000000186' where shipment_no='NAMA2015102345659'   [2015-10-26 12:00:25]

updated row:1  [2015-10-26 12:00:25]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:00:25]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:00:25]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000186','0000003841',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:00:25]

updated row:1  [2015-10-26 12:00:25]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:00:25]

column:15 ; row:2  [2015-10-26 12:00:25]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:00:26]

column:10 ; row:1  [2015-10-26 12:00:26]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:00:26]

updated row:1  [2015-10-26 12:00:26]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003841'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003841',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:00:26]

updated row:1  [2015-10-26 12:00:26]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:00:26]

updated row:1  [2015-10-26 12:00:26]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:00:26]

column:10 ; row:2  [2015-10-26 12:00:26]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:00:26]

updated row:1  [2015-10-26 12:00:26]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003841'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003841',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:00:26]

updated row:1  [2015-10-26 12:00:27]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:00:27]

updated row:1  [2015-10-26 12:00:27]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:00:27]

column:2 ; row:2  [2015-10-26 12:00:27]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:00:27]

updated row:1  [2015-10-26 12:00:27]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:27]

updated row:0  [2015-10-26 12:00:27]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:27]

updated row:0  [2015-10-26 12:00:27]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:00:27]

column:23 ; row:2  [2015-10-26 12:00:27]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:00:27]

column:18 ; row:2  [2015-10-26 12:00:28]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:00:28]

column:2 ; row:2  [2015-10-26 12:00:28]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:00:28]

updated row:1  [2015-10-26 12:00:28]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:00:28]

updated row:0  [2015-10-26 12:00:28]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:00:28]

updated row:0  [2015-10-26 12:00:28]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:00:28]

column:23 ; row:2  [2015-10-26 12:00:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:00:28]

column:18 ; row:2  [2015-10-26 12:00:29]

select * from sys_process_history where 1<>1  [2015-10-26 12:00:29]

column:48 ; row:0  [2015-10-26 12:00:29]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000186','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 12:00:29]

updated row:1  [2015-10-26 12:00:29]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000186') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:44]

column:9 ; row:2  [2015-10-26 12:00:44]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:00:44]

updated row:1  [2015-10-26 12:00:44]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:00:44]

updated row:1  [2015-10-26 12:00:44]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:00:44]

updated row:1  [2015-10-26 12:00:44]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:00:44]

updated row:0  [2015-10-26 12:00:44]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:45]

updated row:1  [2015-10-26 12:00:45]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:00:45]

updated row:1  [2015-10-26 12:00:45]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:00:45]

updated row:1  [2015-10-26 12:00:45]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:00:45]

updated row:1  [2015-10-26 12:00:45]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:00:45]

updated row:1  [2015-10-26 12:00:45]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:46]

updated row:0  [2015-10-26 12:00:46]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:00:48]

column:18 ; row:2  [2015-10-26 12:00:48]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000186') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:00:50]

column:9 ; row:2  [2015-10-26 12:00:50]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:00:50]

updated row:1  [2015-10-26 12:00:50]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:00:50]

updated row:1  [2015-10-26 12:00:50]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:00:50]

updated row:1  [2015-10-26 12:00:50]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:00:50]

updated row:0  [2015-10-26 12:00:50]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:00:50]

updated row:1  [2015-10-26 12:00:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:00:51]

updated row:1  [2015-10-26 12:00:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:00:51]

updated row:1  [2015-10-26 12:00:51]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:00:51]

updated row:1  [2015-10-26 12:00:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:00:51]

updated row:1  [2015-10-26 12:00:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:00:51]

updated row:0  [2015-10-26 12:00:52]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:00:56]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:00:57]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000187','Normal Wave','hz','admin',now()  [2015-10-26 12:00:57]

updated row:1  [2015-10-26 12:00:57]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000187'),'W000000187','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:00:57]

updated row:1  [2015-10-26 12:00:57]

update oub_shipment_header set status='150', wave_no='W000000187' where shipment_no='NAMA2015102329279'   [2015-10-26 12:00:57]

updated row:1  [2015-10-26 12:00:57]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:00:57]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:00:57]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000187','0000003842',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:00:57]

updated row:1  [2015-10-26 12:00:58]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:00:58]

column:15 ; row:2  [2015-10-26 12:00:58]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:00:58]

column:10 ; row:1  [2015-10-26 12:00:58]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:00:58]

updated row:1  [2015-10-26 12:00:58]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003842'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003842',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:00:58]

updated row:1  [2015-10-26 12:00:58]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:00:58]

updated row:1  [2015-10-26 12:00:58]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:00:59]

column:10 ; row:4  [2015-10-26 12:00:59]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:00:59]

updated row:1  [2015-10-26 12:00:59]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003842'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003842',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:00:59]

updated row:1  [2015-10-26 12:00:59]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:00:59]

updated row:1  [2015-10-26 12:00:59]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:00:59]

column:2 ; row:0  [2015-10-26 12:00:59]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:00:59]

updated row:1  [2015-10-26 12:01:00]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:00]

updated row:2  [2015-10-26 12:01:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:00]

updated row:0  [2015-10-26 12:01:00]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:00]

updated row:0  [2015-10-26 12:01:00]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:00]

updated row:3  [2015-10-26 12:01:00]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:01:00]

updated row:0  [2015-10-26 12:01:01]
1]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:01:01]

column:2 ; row:0  [2015-10-26 12:01:01]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:01]

updated row:1  [2015-10-26 12:01:01]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:01]

updated row:2  [2015-10-26 12:01:01]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:01]

updated row:0  [2015-10-26 12:01:01]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:01]

updated row:0  [2015-10-26 12:01:02]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:02]

updated row:0  [2015-10-26 12:01:02]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:01:02]

updated row:0  [2015-10-26 12:01:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:19]

column:18 ; row:2  [2015-10-26 12:01:19]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:01:27]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:01:28]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000188','Normal Wave','hz','admin',now()  [2015-10-26 12:01:28]

updated row:1  [2015-10-26 12:01:28]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000188'),'W000000188','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:01:28]

updated row:1  [2015-10-26 12:01:28]

update oub_shipment_

updated row:1  [2015-10-26 12:53:54]
88' where shipment_no='NAMA2015102345659'   [2015-10-26 12:01:28]

updated row:1  [2015-10-26 12:01:28]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:01:28]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:01:28]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000188','0000003843',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:01:28]

updated row:1  [2015-10-26 12:01:29]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:01:29]

column:15 ; row:2  [2015-10-26 12:01:29]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:01:29]

column:10 ; row:1  [2015-10-26 12:01:29]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:01:29]

updated row:1  [2015-10-26 12:01:29]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003843'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003843',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:01:29]

updated row:1  [2015-10-26 12:01:29]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:01:29]

updated row:1  [2015-10-26 12:01:29]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:01:30]

column:10 ; row:2  [2015-10-26 12:01:30]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:01:30]

updated row:1  [2015-10-26 12:01:30]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003843'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003843',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:01:30]

updated row:1  [2015-10-26 12:01:30]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:01:30]

updated row:1  [2015-10-26 12:01:30]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000188'),'W000000188','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:01:30]

updated row:1  [2015-10-26 12:01:30]

update oub_shipment_header set status='150', wave_no='W000000188' where shipment_no='NAMA2015102329279'   [2015-10-26 12:01:31]

updated row:1  [2015-10-26 12:01:31]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:01:31]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:01:31]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000188','0000003844',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:31]

updated row:1  [2015-10-26 12:01:31]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:01:31]

column:15 ; row:2  [2015-10-26 12:01:31]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:01:32]

column:10 ; row:1  [2015-10-26 12:01:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='column:18 ; row:2  [2015-10-26 12:04:02]
 LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:01:32]

updated row:1  [2015-10-26 12:01:32]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003844'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003844',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:01:32]

updated row:1  [2015-10-26 12:01:32]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:01:32]

updated row:1  [2015-10-26 12:01:32]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:01:32]

column:10 ; row:4  [2015-10-26 12:01:32]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:01:33]

updated row:1  [2015-10-26 12:01:33]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003844'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003844',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:01:33]

updated row:1  [2015-10-26 12:01:33]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:01:33]

updated row:1  [2015-10-26 12:01:33]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:01:33]

column:2 ; row:2  [2015-10-26 12:01:33]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:33]

updated row:1  [2015-10-26 12:01:33]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:01:33]

updated row:0  [2015-10-26 12:01:34]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:01:34]

updated row:0  [2015-10-26 12:01:34]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:01:34]

column:23 ; row:2  [2015-10-26 12:01:34]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:34]

column:18 ; row:2  [2015-10-26 12:01:34]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:01:34]

column:2 ; row:4  [2015-10-26 12:01:34]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:01:34]

updated row:1  [2015-10-26 12:01:35]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:35]

updated row:0  [2015-10-26 12:01:35]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:35]

updated row:2  [2015-10-26 12:01:35]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:01:35]

column:23 ; row:2  [2015-10-26 12:01:35]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:35]

column:18 ; row:2  [2015-10-26 12:01:35]

select * from sys_process_history where 1<>1  [2015-10-26 12:01:35]

column:48 ; row:0  [2015-10-26 12:01:35]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000188','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 12:01:36]

updated row:1  [2015-10-26 12:01:36]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:01:40]

updated row:0  [2015-10-26 12:01:40]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:01:40]

column:23 ; row:2  [2015-10-26 12:01:40]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:40]

column:18 ; row:2  [2015-10-26 12:01:41]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:41]

column:18 ; row:2  [2015-10-26 12:01:41]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000188') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:01:43]

column:9 ; row:2  [2015-10-26 12:01:43]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:01:43]

updated row:1  [2015-10-26 12:01:43]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:01:43]

updated row:1  [2015-10-26 12:01:43]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:01:43]

updated row:1  [2015-10-26 12:01:44]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:01:44]

updated row:0  [2015-10-26 12:01:44]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:01:44]

updated row:1  [2015-10-26 12:01:44]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:01:44]

updated row:1  [2015-10-26 12:01:44]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:01:44]

updated row:1  [2015-10-26 12:01:44]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:01:44]

updated row:1  [2015-10-26 12:01:44]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:01:45]

updated row:1  [2015-10-26 12:01:45]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:01:45]

updated row:0  [2015-10-26 12:01:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:47]

column:18 ; row:2  [2015-10-26 12:01:47]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000188') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:48]

column:9 ; row:4  [2015-10-26 12:01:49]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:01:49]

updated row:1  [2015-10-26 12:01:49]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:01:49]

updated row:2  [2015-10-26 12:01:49]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:01:49]

updated row:1  [2015-10-26 12:01:49]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:01:49]

updated row:0  [2015-10-26 12:01:49]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:49]

updated row:2  [2015-10-26 12:01:49]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:01:49]

updated row:1  [2015-10-26 12:01:50]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:01:50]

updated row:2  [2015-10-26 12:01:50]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:01:50]

updated row:1  [2015-10-26 12:01:50]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:01:50]

updated row:1  [2015-10-26 12:01:50]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:50]

updated row:0  [2015-10-26 12:01:50]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:01:50]

updated row:1  [2015-10-26 12:01:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:01:51]

updated row:0  [2015-10-26 12:01:51]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:01:51]

updated row:1  [2015-10-26 12:01:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:01:51]

updated row:1  [2015-10-26 12:01:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:51]

updated row:0  [2015-10-26 12:01:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:01:51]

updated row:1  [2015-10-26 12:01:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:01:52]

updated row:0  [2015-10-26 12:01:52]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:01:52]

updated row:1  [2015-10-26 12:01:52]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:01:52]

updated row:1  [2015-10-26 12:01:52]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:01:52]

updated row:0  [2015-10-26 12:01:52]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:01:54]

column:18 ; row:2  [2015-10-26 12:01:55]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:02:05]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:02:05]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000189','Normal Wave','hz','admin',now()  [2015-10-26 12:02:05]

updated row:1  [2015-10-26 12:02:05]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000189'),'W000000189','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:02:05]

updated row:1  [2015-10-26 12:02:05]

update oub_shipment_header set status='150', wave_no='W000000189' where shipment_no='NAMA2015102345659'   [2015-10-26 12:02:06]

updated row:1  [2015-10-26 12:02:06]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:02:06]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:02:06]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000189','0000003845',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:02:06]

updated row:1  [2015-10-26 12:02:06]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:02:06]

column:15 ; row:2  [2015-10-26 12:02:06]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:02:06]

column:10 ; row:1  [2015-10-26 12:02:07]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:02:07]

updated row:1  [2015-10-26 12:02:07]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003845'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003845',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:02:07]

updated row:1  [2015-10-26 12:02:07]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:02:07]

updated row:1  [2015-10-26 12:02:07]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:02:07]

column:10 ; row:2  [2015-10-26 12:02:07]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:02:07]

updated row:1  [2015-10-26 12:02:08]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003845'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003845',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:02:08]

updated row:1  [2015-10-26 12:02:08]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:02:08]

updated row:1  [2015-10-26 12:02:08]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000189'),'W000000189','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:02:08]

updated row:1  [2015-10-26 12:02:08]

update oub_shipment_header set status='150', wave_no='W000000189' where shipment_no='NAMA2015102329279'   [2015-10-26 12:02:08]

updated row:1  [2015-10-26 12:02:09]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:02:09]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:02:09]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000189','0000003846',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:02:09]

updated row:1  [2015-10-26 12:02:09]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:02:09]

column:15 ; row:2  [2015-10-26 12:02:09]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:02:09]

column:10 ; row:1  [2015-10-26 12:02:09]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:02:09]

updated row:1  [2015-10-26 12:02:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003846'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003846',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:02:10]

updated row:1  [2015-10-26 12:02:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:02:10]

updated row:1  [2015-10-26 12:02:10]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:02:10]

column:10 ; row:4  [2015-10-26 12:02:10]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:02:10]

updated row:1  [2015-10-26 12:02:10]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003846'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003846',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:02:10]

updated row:1  [2015-10-26 12:02:10]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:02:11]

updated row:1  [2015-10-26 12:02:11]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:02:11]

column:2 ; row:2  [2015-10-26 12:02:11]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:02:11]

updated row:1  [2015-10-26 12:02:11]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:02:11]

updated row:0  [2015-10-26 12:02:11]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:02:11]

updated row:0  [2015-10-26 12:02:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:02:12]

column:23 ; row:2  [2015-10-26 12:02:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:12]

column:18 ; row:2  [2015-10-26 12:02:12]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:02:12]

column:2 ; row:2  [2015-10-26 12:02:12]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:02:12]

updated row:1  [2015-10-26 12:02:12]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:02:12]

updated row:0  [2015-10-26 12:02:13]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:02:13]

updated row:0  [2015-10-26 12:02:13]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:02:13]

column:23 ; row:2  [2015-10-26 12:02:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:13]

column:18 ; row:2  [2015-10-26 12:02:13]

select * from sys_process_history where 1<>1  [2015-10-26 12:02:13]

column:48 ; row:0  [2015-10-26 12:02:13]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000189','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 12:02:14]

updated row:1  [2015-10-26 12:02:14]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:02:32]

updated row:0  [2015-10-26 12:02:32]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:02:32]

column:23 ; row:2  [2015-10-26 12:02:32]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:32]

column:18 ; row:2  [2015-10-26 12:02:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:33]

column:18 ; row:2  [2015-10-26 12:02:33]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000189') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:02:35]

column:9 ; row:2  [2015-10-26 12:02:35]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:02:35]

updated row:1  [2015-10-26 12:02:35]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:02:35]

updated row:1  [2015-10-26 12:02:36]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:02:36]

updated row:1  [2015-10-26 12:02:36]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:02:36]

updated row:0  [2015-10-26 12:02:36]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:02:36]

updated row:1  [2015-10-26 12:02:36]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:02:36]

updated row:1  [2015-10-26 12:02:36]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:02:36]

updated row:1  [2015-10-26 12:02:37]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:02:37]

updated row:1  [2015-10-26 12:02:37]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:02:37]

updated row:1  [2015-10-26 12:02:37]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:02:37]

updated row:0  [2015-10-26 12:02:37]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:39]

column:18 ; row:2  [2015-10-26 12:02:39]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000189') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:02:41]

column:9 ; row:2  [2015-10-26 12:02:41]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:02:41]

updated row:1  [2015-10-26 12:02:41]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:02:41]

updated row:1  [2015-10-26 12:02:41]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:02:42]

updated row:1  [2015-10-26 12:02:42]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:02:42]

updated row:0  [2015-10-26 12:02:42]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:02:42]

updated row:1  [2015-10-26 12:02:42]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:02:42]

updated row:1  [2015-10-26 12:02:42]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:02:43]

updated row:1  [2015-10-26 12:02:43]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:02:43]

updated row:1  [2015-10-26 12:02:43]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:02:43]

updated row:1  [2015-10-26 12:02:43]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:02:43]

updated row:0  [2015-10-26 12:02:43]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:45]

column:18 ; row:2  [2015-10-26 12:02:45]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:49]

column:18 ; row:2  [2015-10-26 12:02:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:49]

column:18 ; row:2  [2015-10-26 12:02:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:50]

column:18 ; row:2  [2015-10-26 12:02:50]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:52]

column:18 ; row:2  [2015-10-26 12:02:52]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:52]

column:18 ; row:2  [2015-10-26 12:02:52]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:02:54]

column:18 ; row:2  [2015-10-26 12:02:54]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:03:12]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:03:12]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000190','Normal Wave','hz','admin',now()  [2015-10-26 12:03:12]

updated row:1  [2015-10-26 12:03:12]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000190'),'W000000190','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:03:12]

updated row:1  [2015-10-26 12:03:12]

update oub_shipment_header set status='150', wave_no='W000000190' where shipment_no='NAMA2015102345659'   [2015-10-26 12:03:13]

updated row:1  [2015-10-26 12:03:13]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:03:13]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:03:13]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000190','0000003847',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:03:13]

updated row:1  [2015-10-26 12:03:13]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:03:13]

column:15 ; row:2  [2015-10-26 12:03:13]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:03:13]

column:10 ; row:1  [2015-10-26 12:03:14]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:03:14]

updated row:1  [2015-10-26 12:03:14]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003847'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003847',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:03:14]

updated row:1  [2015-10-26 12:03:14]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:03:14]

updated row:1  [2015-10-26 12:03:14]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:03:14]

column:10 ; row:2  [2015-10-26 12:03:14]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:03:14]

updated row:1  [2015-10-26 12:03:14]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003847'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003847',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:03:15]

updated row:1  [2015-10-26 12:03:15]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:03:15]

updated row:1  [2015-10-26 12:03:15]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000190'),'W000000190','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:03:15]

updated row:1  [2015-10-26 12:03:15]

update oub_shipment_header set status='150', wave_no='W000000190' where shipment_no='NAMA2015102329279'   [2015-10-26 12:03:15]

updated row:1  [2015-10-26 12:03:15]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:03:15]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:03:15]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000190','0000003848',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:03:16]

updated row:1  [2015-10-26 12:03:16]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:03:16]

column:15 ; row:2  [2015-10-26 12:03:16]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:03:16]

column:10 ; row:1  [2015-10-26 12:03:16]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:03:16]

updated row:1  [2015-10-26 12:03:16]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003848'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003848',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:03:16]

updated row:1  [2015-10-26 12:03:17]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:03:17]

updated row:1  [2015-10-26 12:03:17]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:03:17]

column:10 ; row:4  [2015-10-26 12:03:17]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:03:17]

updated row:1  [2015-10-26 12:03:17]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003848'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003848',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:03:17]

updated row:1  [2015-10-26 12:03:17]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:03:17]

updated row:1  [2015-10-26 12:03:18]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:03:18]

column:2 ; row:2  [2015-10-26 12:03:18]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:03:18]

updated row:1  [2015-10-26 12:03:18]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<

updated row:1  [2015-10-26 12:51:38]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:51:38]

updated row:1  [2015-10-26 12:51:38]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:51:42]

updated row:0  [2015-10-26 12:51:42]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:51:42]

column:23 ; row:2  [2015-10-26 12:51:42]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:51:44]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:51:44]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000204','Normal Wave','hz','admin',now()  [2015-10-26 12:51:44]

updated row:1  [2015-10-26 12:51:44]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000204'),'W000000204','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:51:44]

updated row:1  [2015-10-26 12:51:44]

update oub_shipment_header set status='150', wave_no='W000000204' where shipment_no='NAMA2015102329279'   [2015-10-26 12:51:44]

updated row:1  [2015-10-26 12:51:44]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:52:11]

updated row:0  [2015-10-26 12:52:11]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:52:11]

column:23 ; row:2  [2015-10-26 12:52:12]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:52:13]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:52:13]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000205','Normal Wave','hz','admin',now()  [2015-10-26 12:52:13]

updated row:1  [2015-10-26 12:52:13]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000205'),'W000000205','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:52:13]

updated row:1  [2015-10-26 12:52:13]

update oub_shipment_header set status='150', wave_no='W000000205' where shipment_no='NAMA2015102345659'   [2015-10-26 12:52:13]

updated row:1  [2015-10-26 12:52:13]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 12:52:52]

column:2 ; row:1  [2015-10-26 12:52:52]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 12:52:55]

column:6 ; row:1  [2015-10-26 12:52:56]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 12:52:57]

column:1 ; row:1  [2015-10-26 12:52:58]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 12:52:58]

column:23 ; row:0  [2015-10-26 12:52:58]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:53:00]

updated row:0  [2015-10-26 12:53:00]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:53:00]

column:23 ; row:2  [2015-10-26 12:53:00]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:00]

column:18 ; row:2  [2015-10-26 12:53:00]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:53:03]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:53:03]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000206','Normal Wave','hz','admin',now()  [2015-10-26 12:53:03]

updated row:1  [2015-10-26 12:53:03]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:53:03]

column:2 ; row:0  [2015-10-26 12:53:03]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:03]

updated row:1  [2015-10-26 12:53:04]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:04]

updated row:2  [2015-10-26 12:53:04]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:04]

updated row:0  [2015-10-26 12:53:04]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:04]

updated row:0  [2015-10-26 12:53:04]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:04]

updated row:1  [2015-10-26 12:53:04]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:53:04]

updated row:2  [2015-10-26 12:53:04]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:53:04]

column:2 ; row:0  [2015-10-26 12:53:05]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:05]

updated row:1  [2015-10-26 12:53:05]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:05]

updated row:2  [2015-10-26 12:53:05]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:05]

updated row:0  [2015-10-26 12:53:05]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:05]

updated row:0  [2015-10-26 12:53:05]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:05]

updated row:1  [2015-10-26 12:53:05]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:53:05]

updated row:1  [2015-10-26 12:53:06]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:53:09]

updated row:0  [2015-10-26 12:53:09]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:53:09]

column:23 ; row:2  [2015-10-26 12:53:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:10]

column:18 ; row:2  [2015-10-26 12:53:10]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:53:11]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:53:11]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000207','Normal Wave','hz','admin',now()  [2015-10-26 12:53:11]

updated row:1  [2015-10-26 12:53:11]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000207'),'W000000207','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:53:11]

updated row:1  [2015-10-26 12:53:11]

update oub_shipment_header set status='150', wave_no='W000000207' where shipment_no='NAMA2015102329279'   [2015-10-26 12:53:11]

updated row:1  [2015-10-26 12:53:12]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:53:12]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:53:12]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000207','0000003853',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:12]

updated row:1  [2015-10-26 12:53:12]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:53:12]

column:15 ; row:2  [2015-10-26 12:53:12]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:12]

column:10 ; row:1  [2015-10-26 12:53:12]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:53:12]

updated row:1  [2015-10-26 12:53:12]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003853'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003853',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:53:13]

updated row:1  [2015-10-26 12:53:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:53:13]

updated row:1  [2015-10-26 12:53:13]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:13]

column:10 ; row:4  [2015-10-26 12:53:13]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:53:13]

updated row:1  [2015-10-26 12:53:13]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003853'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003853',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:53:13]

updated row:1  [2015-10-26 12:53:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:53:13]

updated row:1  [2015-10-26 12:53:14]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000207'),'W000000207','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:53:14]

updated row:1  [2015-10-26 12:53:14]

update oub_shipment_header set status='150', wave_no='W000000207' where shipment_no='NAMA2015102345659'   [2015-10-26 12:53:14]

updated row:1  [2015-10-26 12:53:14]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:53:14]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:53:14]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000207','0000003854',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:14]

updated row:1  [2015-10-26 12:53:14]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:53:14]

column:15 ; row:2  [2015-10-26 12:53:14]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:15]

column:10 ; row:1  [2015-10-26 12:53:15]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:53:15]

updated row:1  [2015-10-26 12:53:15]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003854'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003854',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:53:15]

updated row:1  [2015-10-26 12:53:15]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:53:15]

updated row:1  [2015-10-26 12:53:15]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:15]

column:10 ; row:2  [2015-10-26 12:53:15]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:53:15]

updated row:1  [2015-10-26 12:53:16]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003854'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003854',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:53:16]

updated row:1  [2015-10-26 12:53:16]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:53:16]

updated row:1  [2015-10-26 12:53:16]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:53:16]

column:2 ; row:2  [2015-10-26 12:53:16]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:16]

updated row:1  [2015-10-26 12:53:16]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:16]

updated row:0  [2015-10-26 12:53:16]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:16]

updated row:0  [2015-10-26 12:53:17]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:53:17]

column:23 ; row:2  [2015-10-26 12:53:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:17]

column:18 ; row:2  [2015-10-26 12:53:17]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:53:17]

column:2 ; row:2  [2015-10-26 12:53:17]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:17]

updated row:1  [2015-10-26 12:53:17]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:17]

updated row:0  [2015-10-26 12:53:17]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:18]

updated row:0  [2015-10-26 12:53:18]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:53:18]

column:23 ; row:2  [2015-10-26 12:53:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:18]

column:18 ; row:2  [2015-10-26 12:53:18]

select * from sys_process_history where 1<>1  [2015-10-26 12:53:18]

column:48 ; row:0  [2015-10-26 12:53:18]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000207','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 12:53:18]

updated row:1  [2015-10-26 12:53:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:27]

column:18 ; row:2  [2015-10-26 12:53:27]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:29]

column:18 ; row:2  [2015-10-26 12:53:29]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000207') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:31]

column:9 ; row:2  [2015-10-26 12:53:31]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:53:31]

updated row:1  [2015-10-26 12:53:31]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:53:31]

updated row:1  [2015-10-26 12:53:31]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:53:31]

updated row:1  [2015-10-26 12:53:32]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:53:32]

updated row:0  [2015-10-26 12:53:32]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:32]

updated row:1  [2015-10-26 12:53:32]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:53:32]

updated row:1  [2015-10-26 12:53:32]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:53:32]

updated row:1  [2015-10-26 12:53:32]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:53:32]

updated row:1  [2015-10-26 12:53:32]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:53:32]

updated row:1  [2015-10-26 12:53:33]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:33]

updated row:0  [2015-10-26 12:53:33]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:35]

column:18 ; row:2  [2015-10-26 12:53:35]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000207') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:37]

column:9 ; row:2  [2015-10-26 12:53:37]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:53:37]

updated row:1  [2015-10-26 12:53:37]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:53:37]

updated row:1  [2015-10-26 12:53:38]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:53:38]

updated row:1  [2015-10-26 12:53:38]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:53:38]

updated row:0  [2015-10-26 12:53:38]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:38]

updated row:1  [2015-10-26 12:53:38]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:53:38]

updated row:1  [2015-10-26 12:53:38]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:53:38]

updated row:1  [2015-10-26 12:53:39]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:53:39]

updated row:1  [2015-10-26 12:53:39]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:53:39]

updated row:1  [2015-10-26 12:53:39]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:39]

updated row:0  [2015-10-26 12:53:39]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:53:51]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:53:51]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000208','Normal Wave','hz','admin',now()  [2015-10-26 12:53:51]

updated row:1  [2015-10-26 12:53:51]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000208'),'W000000208','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:53:51]

updated row:1  [2015-10-26 12:53:51]

update oub_shipment_header set status='150', wave_no='W000000208' where shipment_no='NAMA2015102329279'   [2015-10-26 12:53:51]

updated row:1  [2015-10-26 12:53:52]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:53:52]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:53:52]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000208','0000003855',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:52]

updated row:1  [2015-10-26 12:53:52]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:53:52]

column:15 ; row:2  [2015-10-26 12:53:52]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:52]

column:10 ; row:1  [2015-10-26 12:53:52]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:53:52]

updated row:1  [2015-10-26 12:53:53]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003855'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003855',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:53:53]

updated row:1  [2015-10-26 12:53:53]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:53:53]

updated row:1  [2015-10-26 12:53:53]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:53]

column:10 ; row:4  [2015-10-26 12:53:53]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:53:53]

updated row:1  [2015-10-26 12:53:53]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003855'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003855',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:53:53]

updated row:1  [2015-10-26 12:53:53]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:53:54]

updated row:1  [2015-10-26 12:53:54]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000208'),'W000000208','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:53:54]

updated row:1  [2015-10-26 12:53:54]

update oub_shipment_header set status='150', wave_no='W000000208' where shipment_no='NAMA2015102345659'   [2015-10-26 12:53:54]

updated row:1  [2015-10-26 12:53:54]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:53:54]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:53:54]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000208','0000003856',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:54]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:54]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:53:55]

column:15 ; row:2  [2015-10-26 12:53:55]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:55]

column:10 ; row:1  [2015-10-26 12:53:55]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:53:55]

updated row:1  [2015-10-26 12:53:55]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003856'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003856',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:53:55]

updated row:1  [2015-10-26 12:53:55]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:53:55]

updated row:1  [2015-10-26 12:53:55]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:53:55]

column:10 ; row:2  [2015-10-26 12:53:56]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:53:56]

updated row:1  [2015-10-26 12:53:56]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003856'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003856',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:53:56]

updated row:1  [2015-10-26 12:53:56]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:53:56]

updated row:1  [2015-10-26 12:53:56]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:53:56]

column:2 ; row:2  [2015-10-26 12:53:56]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:56]

updated row:1  [2015-10-26 12:53:56]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:57]

updated row:0  [2015-10-26 12:53:57]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:53:57]

updated row:0  [2015-10-26 12:53:57]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:53:57]

column:23 ; row:2  [2015-10-26 12:53:57]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:57]

column:18 ; row:2  [2015-10-26 12:53:57]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:53:57]

column:2 ; row:2  [2015-10-26 12:53:57]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:53:58]

updated row:1  [2015-10-26 12:53:58]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:58]

updated row:0  [2015-10-26 12:53:58]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:53:58]

updated row:0  [2015-10-26 12:53:58]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:53:58]

column:23 ; row:2  [2015-10-26 12:53:58]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:53:58]

column:18 ; row:2  [2015-10-26 12:53:58]

select * from sys_process_history where 1<>1  [2015-10-26 12:53:58]

column:48 ; row:0  [2015-10-26 12:53:59]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000208','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 12:53:59]

updated row:1  [2015-10-26 12:53:59]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:54:03]

updated row:0  [2015-10-26 12:54:03]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:54:03]

column:23 ; row:2  [2015-10-26 12:54:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:54:03]

column:18 ; row:2  [2015-10-26 12:54:04]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:55:44]

updated row:0  [2015-10-26 12:55:44]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:55:44]

column:23 ; row:2  [2015-10-26 12:55:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:55:44]

column:18 ; row:2  [2015-10-26 12:55:45]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 12:55:54]

column:2 ; row:1  [2015-10-26 12:55:54]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 12:55:57]

column:6 ; row:1  [2015-10-26 12:55:57]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 12:55:59]

column:1 ; row:1  [2015-10-26 12:55:59]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 12:55:59]

column:23 ; row:0  [2015-10-26 12:56:00]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:56:02]

updated row:0  [2015-10-26 12:56:02]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:56:02]

column:23 ; row:2  [2015-10-26 12:56:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:56:02]

column:18 ; row:2  [2015-10-26 12:56:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是column:18 ; row:2  [2015-10-26 13:27:44]
e 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:56:35]

column:18 ; row:2  [2015-10-26 12:56:36]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000208') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:56:38]

column:9 ; row:2  [2015-10-26 12:56:38]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:56:38]

updated row:1  [2015-10-26 12:56:38]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:56:38]

updated row:1  [2015-10-26 12:56:38]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:56:38]

updated row:1  [2015-10-26 12:56:38]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:56:38]

updated row:0  [2015-10-26 12:56:39]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:56:39]

updated row:1  [2015-10-26 12:56:39]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:56:39]

updated row:1  [2015-10-26 12:56:39]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:56:39]

updated row:1  [2015-10-26 12:56:39]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:56:39]

updated row:1  [2015-10-26 12:56:39]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:56:40]

updated row:1  [2015-10-26 12:56:40]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:56:40]

updated row:0  [2015-10-26 12:56:40]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:56:48]

column:18 ; row:2  [2015-10-26 12:56:48]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000208') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:56:49]

column:9 ; row:2  [2015-10-26 12:56:50]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:56:50]

updated row:1  [2015-10-26 12:56:50]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:56:50]

updated row:1  [2015-10-26 12:56:50]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:56:50]

updated row:1  [2015-10-26 12:56:50]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:56:50]

updated row:0  [2015-10-26 12:56:50]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:56:50]

updated row:1  [2015-10-26 12:56:51]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:56:51]

updated row:1  [2015-10-26 12:56:51]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:56:51]

updated row:1  [2015-10-26 12:56:51]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:56:51]

updated row:1  [2015-10-26 12:56:51]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 12:56:51]

updated row:1  [2015-10-26 12:56:51]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:56:52]

updated row:0  [2015-10-26 12:56:52]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:56:54]

updated row:0  [2015-10-26 12:56:54]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:56:54]

column:23 ; row:2  [2015-10-26 12:56:54]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:56:54]

column:18 ; row:2  [2015-10-26 12:56:54]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:56:56]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:56:56]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000209','Normal Wave','hz','admin',now()  [2015-10-26 12:56:56]

updated row:1  [2015-10-26 12:56:57]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000209'),'W000000209','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:56:57]

updated row:1  [2015-10-26 12:56:57]

update oub_shipment_header set status='150', wave_no='W000000209' where shipment_no='NAMA2015102345659'   [2015-10-26 12:56:57]

updated row:1  [2015-10-26 12:56:57]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:56:57]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:56:57]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000209','0000003857',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:56:57]

updated row:1  [2015-10-26 12:56:57]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:56:58]

column:15 ; row:2  [2015-10-26 12:56:58]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:56:58]

column:10 ; row:1  [2015-10-26 12:56:58]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:56:58]

updated row:1  [2015-10-26 12:56:58]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003857'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003857',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:56:58]

updated row:1  [2015-10-26 12:56:58]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:56:58]

updated row:1  [2015-10-26 12:56:59]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:56:59]

column:10 ; row:2  [2015-10-26 12:56:59]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:56:59]

updated row:1  [2015-10-26 12:56:59]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003857'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003857',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:56:59]

updated row:1  [2015-10-26 12:56:59]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:56:59]

updated row:1  [2015-10-26 12:56:59]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:56:59]

column:2 ; row:2  [2015-10-26 12:57:00]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:57:00]

updated row:1  [2015-10-26 12:57:00]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:57:00]

updated row:0  [2015-10-26 12:57:00]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:57:00]

updated row:0  [2015-10-26 12:57:00]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:57:00]

column:23 ; row:2  [2015-10-26 12:57:00]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:57:01]

column:18 ; row:2  [2015-10-26 12:57:01]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:57:01]

column:2 ; row:2  [2015-10-26 12:57:01]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:57:01]

updated row:1  [2015-10-26 12:57:01]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:57:01]

updated row:0  [2015-10-26 12:57:01]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:57:01]

updated row:0  [2015-10-26 12:57:01]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:57:02]

column:23 ; row:2  [2015-10-26 12:57:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:57:02]

column:18 ; row:2  [2015-10-26 12:57:02]

select * from sys_process_history where 1<>1  [2015-10-26 12:57:02]

column:48 ; row:0  [2015-10-26 12:57:02]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000209','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 12:57:02]

updated row:1  [2015-10-26 12:57:02]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 12:58:00]

column:2 ; row:1  [2015-10-26 12:58:00]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 12:58:04]

column:6 ; row:1  [2015-10-26 12:58:04]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 12:58:06]

column:1 ; row:1  [2015-10-26 12:58:06]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 12:58:06]

column:23 ; row:0  [2015-10-26 12:58:06]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:58:08]

updated row:0  [2015-10-26 12:58:08]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:58:09]

column:23 ; row:2  [2015-10-26 12:58:09]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:58:09]

column:18 ; row:2  [2015-10-26 12:58:09]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:58:32]

column:18 ; row:2  [2015-10-26 12:58:33]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000209') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:34]

column:9 ; row:2  [2015-10-26 12:58:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:58:34]

updated row:1  [2015-10-26 12:58:35]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:58:35]

updated row:1  [2015-10-26 12:58:35]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:58:35]

updated row:1  [2015-10-26 12:58:35]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:58:35]

updated row:0  [2015-10-26 12:58:35]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:35]

updated row:1  [2015-10-26 12:58:35]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:58:36]

updated row:1  [2015-10-26 12:58:36]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:58:36]

updated row:1  [2015-10-26 12:58:36]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:58:36]

updated row:1  [2015-10-26 12:58:36]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:58:36]

updated row:1  [2015-10-26 12:58:36]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:36]

updated row:0  [2015-10-26 12:58:36]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:58:39]

updated row:0  [2015-10-26 12:58:39]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:58:39]

column:23 ; row:2  [2015-10-26 12:58:39]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:58:39]

column:18 ; row:2  [2015-10-26 12:58:39]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:58:40]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:58:41]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000210','Normal Wave','hz','admin',now()  [2015-10-26 12:58:41]

updated row:1  [2015-10-26 12:58:41]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000210'),'W000000210','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:58:41]

updated row:1  [2015-10-26 12:58:41]

update oub_shipment_header set status='150', wave_no='W000000210' where shipment_no='NAMA2015102345659'   [2015-10-26 12:58:41]

updated row:1  [2015-10-26 12:58:41]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:58:41]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:58:41]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000210','0000003858',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:42]

updated row:1  [2015-10-26 12:58:42]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:58:42]

column:15 ; row:2  [2015-10-26 12:58:42]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:58:42]

column:10 ; row:1  [2015-10-26 12:58:42]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:58:42]

updated row:1  [2015-10-26 12:58:42]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003858'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003858',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:58:42]

updated row:1  [2015-10-26 12:58:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:58:43]

updated row:1  [2015-10-26 12:58:43]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:58:43]

column:10 ; row:2  [2015-10-26 12:58:43]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:58:43]

updated row:1  [2015-10-26 12:58:43]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003858'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003858',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:58:43]

updated row:1  [2015-10-26 12:58:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:58:43]

updated row:1  [2015-10-26 12:58:44]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000210'),'W000000210','hz','NAMA2015102345659','admin',now()   [2015-10-26 12:58:44]

updated row:1  [2015-10-26 12:58:44]

update oub_shipment_header set status='150', wave_no='W000000210' where shipment_no='NAMA2015102345659'   [2015-10-26 12:58:44]

updated row:1  [2015-10-26 12:58:44]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:58:44]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:58:44]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000210','0000003859',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:44]

updated row:1  [2015-10-26 12:58:45]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 12:58:45]

column:15 ; row:2  [2015-10-26 12:58:45]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:58:45]

column:10 ; row:1  [2015-10-26 12:58:45]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 12:58:45]

updated row:1  [2015-10-26 12:58:45]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003859'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003859',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:58:45]

updated row:1  [2015-10-26 12:58:45]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:58:45]

updated row:1  [2015-10-26 12:58:46]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:58:46]

column:10 ; row:2  [2015-10-26 12:58:46]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 12:58:46]

updated row:1  [2015-10-26 12:58:46]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003859'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003859',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:58:46]

updated row:1  [2015-10-26 12:58:46]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:58:46]

updated row:1  [2015-10-26 12:58:46]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 12:58:46]

column:2 ; row:0  [2015-10-26 12:58:47]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:58:47]

updated row:1  [2015-10-26 12:58:47]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:58:47]

updated row:2  [2015-10-26 12:58:47]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:58:47]

updated row:0  [2015-10-26 12:58:47]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:58:47]

updated row:0  [2015-10-26 12:58:47]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 12:58:48]

updated row:2  [2015-10-26 12:58:48]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:58:48]

updated row:0  [2015-10-26 12:58:48]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:58:48]

column:2 ; row:4  [2015-10-26 12:58:48]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:58:48]

updated row:1  [2015-10-26 12:58:48]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:48]

updated row:0  [2015-10-26 12:58:49]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:58:49]

updated row:2  [2015-10-26 12:58:49]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:58:49]

column:23 ; row:2  [2015-10-26 12:58:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:58:49]

column:18 ; row:2  [2015-10-26 12:58:49]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 12:59:17]

column:2 ; row:1  [2015-10-26 12:59:17]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 12:59:21]

column:6 ; row:1  [2015-10-26 12:59:21]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 12:59:23]

column:1 ; row:1  [2015-10-26 12:59:23]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 12:59:23]

column:23 ; row:0  [2015-10-26 12:59:24]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:59:26]

updated row:0  [2015-10-26 12:59:26]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:59:26]

column:23 ; row:2  [2015-10-26 12:59:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:59:26]

column:18 ; row:2  [2015-10-26 12:59:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:59:31]

column:18 ; row:2  [2015-10-26 12:59:31]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000210') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:59:32]

column:9 ; row:4  [2015-10-26 12:59:32]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:59:33]

updated row:1  [2015-10-26 12:59:33]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:59:33]

updated row:2  [2015-10-26 12:59:33]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:59:33]

updated row:1  [2015-10-26 12:59:33]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:59:33]

updated row:0  [2015-10-26 12:59:33]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:59:33]

updated row:2  [2015-10-26 12:59:33]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:59:33]

updated row:1  [2015-10-26 12:59:34]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:59:34]

updated row:2  [2015-10-26 12:59:34]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:59:34]

updated row:1  [2015-10-26 12:59:34]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:59:34]

updated row:1  [2015-10-26 12:59:34]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:59:34]

updated row:0  [2015-10-26 12:59:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:59:34]

updated row:1  [2015-10-26 12:59:35]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 12:59:35]

updated row:0  [2015-10-26 12:59:35]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 12:59:35]

updated row:1  [2015-10-26 12:59:35]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:59:35]

updated row:1  [2015-10-26 12:59:35]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:59:35]

updated row:0  [2015-10-26 12:59:35]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:59:35]

updated row:1  [2015-10-26 12:59:35]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 12:59:36]

updated row:0  [2015-10-26 12:59:36]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 12:59:36]

updated row:1  [2015-10-26 12:59:36]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 12:59:36]

updated row:1  [2015-10-26 12:59:36]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 12:59:36]

updated row:0  [2015-10-26 12:59:36]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:59:38]

updated row:0  [2015-10-26 12:59:39]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:59:39]

column:23 ; row:2  [2015-10-26 12:59:39]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:59:39]

column:18 ; row:2  [2015-10-26 12:59:39]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 12:59:40]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 12:59:40]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000211','Normal Wave','hz','admin',now()  [2015-10-26 12:59:40]

updated row:1  [2015-10-26 12:59:40]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000211'),'W000000211','hz','NAMA2015102329279','admin',now()   [2015-10-26 12:59:40]

updated row:1  [2015-10-26 12:59:41]

update oub_shipment_header set status='150', wave_no='W000000211' where shipment_no='NAMA2015102329279'   [2015-10-26 12:59:41]

updated row:1  [2015-10-26 12:59:41]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 12:59:41]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 12:59:41]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000211','0000003860',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 12:59:41]

updated row:1  [2015-10-26 12:59:41]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 12:59:41]

column:15 ; row:2  [2015-10-26 12:59:41]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:59:41]

column:10 ; row:1  [2015-10-26 12:59:42]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 12:59:42]

updated row:1  [2015-10-26 12:59:42]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003860'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003860',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 12:59:42]

updated row:1  [2015-10-26 12:59:42]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 12:59:42]

updated row:1  [2015-10-26 12:59:42]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 12:59:42]

column:10 ; row:4  [2015-10-26 12:59:42]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 12:59:42]

updated row:1  [2015-10-26 12:59:43]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003860'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003860',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 12:59:43]

updated row:1  [2015-10-26 12:59:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 12:59:43]

updated row:1  [2015-10-26 12:59:43]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:59:43]

column:2 ; row:0  [2015-10-26 12:59:43]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:43]

updated row:1  [2015-10-26 12:59:43]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:43]

updated row:2  [2015-10-26 12:59:44]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:44]

updated row:0  [2015-10-26 12:59:44]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:44]

updated row:0  [2015-10-26 12:59:44]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:44]

updated row:5  [2015-10-26 12:59:44]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:59:44]

updated row:4  [2015-10-26 12:59:44]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 12:59:44]

column:2 ; row:0  [2015-10-26 12:59:44]

update oub_shipment_header set WAVE_NO='',status='100' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:45]

updated row:1  [2015-10-26 12:59:45]

update oub_shipment_detail set status='100',ALLOCATED_QTY=0 where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:45]

updated row:2  [2015-10-26 12:59:45]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:45]

updated row:0  [2015-10-26 12:59:45]

delete from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:45]

updated row:0  [2015-10-26 12:59:45]

delete from oub_wave_detail where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 12:59:45]

updated row:0  [2015-10-26 12:59:46]

delete from oub_wave_header where wave_no not in (select wave_no from oub_wave_detail where oub_wave_header.WAVE_NO=oub_wave_detail.WAVE_NO)  [2015-10-26 12:59:46]

updated row:0  [2015-10-26 12:59:46]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 12:59:52]

updated row:0  [2015-10-26 12:59:52]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 12:59:52]

column:23 ; row:2  [2015-10-26 12:59:52]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 12:59:53]

column:18 ; row:2  [2015-10-26 12:59:53]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 13:00:38]

column:2 ; row:1  [2015-10-26 13:00:38]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 13:00:42]

column:6 ; row:1  [2015-10-26 13:00:42]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 13:00:45]

column:1 ; row:1  [2015-10-26 13:00:45]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 13:00:45]

column:23 ; row:0  [2015-10-26 13:00:45]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:00:55]

updated row:0  [2015-10-26 13:00:55]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:00:55]

column:23 ; row:2  [2015-10-26 13:00:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:00:55]

column:18 ; row:2  [2015-10-26 13:00:55]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:00:58]

column:18 ; row:2  [2015-10-26 13:00:58]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 13:00:59]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 13:00:59]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000212','Normal Wave','hz','admin',now()  [2015-10-26 13:00:59]

updated row:1  [2015-10-26 13:00:59]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000212'),'W000000212','hz','NAMA2015102345659','admin',now()   [2015-10-26 13:00:59]

updated row:1  [2015-10-26 13:01:00]

update oub_shipment_header set status='150', wave_no='W000000212' where shipment_no='NAMA2015102345659'   [2015-10-26 13:01:00]

updated row:1  [2015-10-26 13:01:00]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 13:01:00]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 13:01:00]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000212','0000003861',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:01:00]

updated row:1  [2015-10-26 13:01:00]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 13:01:00]

column:15 ; row:2  [2015-10-26 13:01:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:01:01]

column:10 ; row:1  [2015-10-26 13:01:01]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 13:01:01]

updated row:1  [2015-10-26 13:01:01]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003861'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003861',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 13:01:01]

updated row:1  [2015-10-26 13:01:01]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:01:01]

updated row:1  [2015-10-26 13:01:01]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:01:01]

column:10 ; row:2  [2015-10-26 13:01:02]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 13:01:02]

updated row:1  [2015-10-26 13:01:02]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003861'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003861',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 13:01:02]

updated row:1  [2015-10-26 13:01:02]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:01:02]

updated row:1  [2015-10-26 13:01:02]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 13:01:02]

column:2 ; row:2  [2015-10-26 13:01:02]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 13:01:02]

updated row:1  [2015-10-26 13:01:02]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:01:03]

updated row:0  [2015-10-26 13:01:03]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:01:03]

updated row:0  [2015-10-26 13:01:03]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:01:03]

column:23 ; row:2  [2015-10-26 13:01:03]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:03]

column:18 ; row:2  [2015-10-26 13:01:03]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 13:01:03]

column:2 ; row:2  [2015-10-26 13:01:04]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 13:01:04]

updated row:1  [2015-10-26 13:01:04]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:01:04]

updated row:0  [2015-10-26 13:01:04]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:01:04]

updated row:0  [2015-10-26 13:01:04]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:01:04]

column:23 ; row:2  [2015-10-26 13:01:04]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:04]

column:18 ; row:2  [2015-10-26 13:01:05]

select * from sys_process_history where 1<>1  [2015-10-26 13:01:05]

column:48 ; row:0  [2015-10-26 13:01:05]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000212','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 13:01:05]

updated row:1  [2015-10-26 13:01:05]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:09]

column:18 ; row:2  [2015-10-26 13:01:09]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:09]

column:18 ; row:2  [2015-10-26 13:01:10]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:11]

column:18 ; row:2  [2015-10-26 13:01:11]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:12]

column:18 ; row:2  [2015-10-26 13:01:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:12]

column:18 ; row:2  [2015-10-26 13:01:12]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:13]

column:18 ; row:2  [2015-10-26 13:01:13]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:13]

column:18 ; row:2  [2015-10-26 13:01:13]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:01:18]

updated row:0  [2015-10-26 13:01:18]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:01:18]

column:23 ; row:2  [2015-10-26 13:01:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:01:18]

column:18 ; row:2  [2015-10-26 13:01:18]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 13:02:23]

column:2 ; row:1  [2015-10-26 13:02:23]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 13:02:26]

column:6 ; row:1  [2015-10-26 13:02:26]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 13:02:29]

column:1 ; row:1  [2015-10-26 13:02:29]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 13:02:29]

column:23 ; row:0  [2015-10-26 13:02:29]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:02:44]

updated row:0  [2015-10-26 13:02:44]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:02:44]

column:23 ; row:2  [2015-10-26 13:02:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:02:44]

column:18 ; row:2  [2015-10-26 13:02:44]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:02:50]

column:18 ; row:2  [2015-10-26 13:02:50]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:02:51]

column:18 ; row:2  [2015-10-26 13:02:51]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 13:05:06]

column:2 ; row:1  [2015-10-26 13:05:07]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 13:05:10]

column:6 ; row:1  [2015-10-26 13:05:10]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 13:05:12]

column:1 ; row:1  [2015-10-26 13:05:12]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 13:05:12]

column:23 ; row:0  [2015-10-26 13:05:12]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:05:14]

updated row:0  [2015-10-26 13:05:14]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:05:14]

column:23 ; row:2  [2015-10-26 13:05:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:14]

column:18 ; row:2  [2015-10-26 13:05:14]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:17]

column:18 ; row:2  [2015-10-26 13:05:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:17]

column:18 ; row:2  [2015-10-26 13:05:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:17]

column:18 ; row:2  [2015-10-26 13:05:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:17]

column:18 ; row:2  [2015-10-26 13:05:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:18]

column:18 ; row:2  [2015-10-26 13:05:19]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:19]

column:18 ; row:2  [2015-10-26 13:05:19]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:20]

column:18 ; row:2  [2015-10-26 13:05:20]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:05:21]

updated row:0  [2015-10-26 13:05:21]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:05:21]

column:23 ; row:2  [2015-10-26 13:05:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:21]

column:18 ; row:2  [2015-10-26 13:05:21]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 13:05:23]

column:1 ; row:1  [2015-10-26 13:05:23]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 13:05:23]

column:23 ; row:0  [2015-10-26 13:05:23]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:05:26]

updated row:0  [2015-10-26 13:05:26]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:05:26]

column:23 ; row:2  [2015-10-26 13:05:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:26]

column:18 ; row:2  [2015-10-26 13:05:26]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:28]

column:18 ; row:2  [2015-10-26 13:05:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:29]

column:18 ; row:2  [2015-10-26 13:05:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:29]

column:18 ; row:2  [2015-10-26 13:05:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:30]

column:18 ; row:2  [2015-10-26 13:05:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:30]

column:18 ; row:2  [2015-10-26 13:05:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:30]

column:18 ; row:2  [2015-10-26 13:05:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:31]

column:18 ; row:2  [2015-10-26 13:05:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:05:31]

column:18 ; row:2  [2015-10-26 13:05:31]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 13:09:14]

column:2 ; row:1  [2015-10-26 13:09:14]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 13:09:18]

column:6 ; row:1  [2015-10-26 13:09:18]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 13:09:19]

column:1 ; row:1  [2015-10-26 13:09:19]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 13:09:20]

column:23 ; row:0  [2015-10-26 13:09:20]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:09:22]

updated row:0  [2015-10-26 13:09:22]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:09:22]

column:23 ; row:2  [2015-10-26 13:09:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:22]

column:18 ; row:2  [2015-10-26 13:09:22]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 13:09:27]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 13:09:27]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000213','Normal Wave','hz','admin',now()  [2015-10-26 13:09:27]

updated row:1  [2015-10-26 13:09:28]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 13:09:28]

column:2 ; row:2  [2015-10-26 13:09:28]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 13:09:28]

updated row:1  [2015-10-26 13:09:28]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:09:28]

updated row:0  [2015-10-26 13:09:28]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:09:28]

updated row:0  [2015-10-26 13:09:29]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:09:29]

column:23 ; row:2  [2015-10-26 13:09:29]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:29]

column:18 ; row:2  [2015-10-26 13:09:29]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 13:09:29]

column:2 ; row:2  [2015-10-26 13:09:29]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 13:09:29]

updated row:1  [2015-10-26 13:09:29]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:09:29]

updated row:0  [2015-10-26 13:09:30]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:09:30]

updated row:0  [2015-10-26 13:09:30]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:09:30]

column:23 ; row:2  [2015-10-26 13:09:30]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:30]

column:18 ; row:2  [2015-10-26 13:09:30]

select * from sys_process_history where 1<>1  [2015-10-26 13:09:30]

column:48 ; row:0  [2015-10-26 13:09:31]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000213','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 13:09:31]

updated row:1  [2015-10-26 13:09:31]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:36]

column:18 ; row:2  [2015-10-26 13:09:36]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:37]

column:18 ; row:2  [2015-10-26 13:09:37]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 13:09:46]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 13:09:46]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000214','Normal Wave','hz','admin',now()  [2015-10-26 13:09:46]

updated row:1  [2015-10-26 13:09:46]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 13:09:46]

column:2 ; row:2  [2015-10-26 13:09:46]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 13:09:46]

updated row:1  [2015-10-26 13:09:46]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:09:46]

updated row:0  [2015-10-26 13:09:47]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:09:47]

updated row:0  [2015-10-26 13:09:47]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:09:47]

column:23 ; row:2  [2015-10-26 13:09:47]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:47]

column:18 ; row:2  [2015-10-26 13:09:47]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 13:09:47]

column:2 ; row:2  [2015-10-26 13:09:48]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 13:09:48]

updated row:1  [2015-10-26 13:09:48]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:09:48]

updated row:0  [2015-10-26 13:09:48]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:09:48]

updated row:0  [2015-10-26 13:09:48]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:09:48]

column:23 ; row:2  [2015-10-26 13:09:48]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:48]

column:18 ; row:2  [2015-10-26 13:09:49]

select * from sys_process_history where 1<>1  [2015-10-26 13:09:49]

column:48 ; row:0  [2015-10-26 13:09:49]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000214','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 13:09:49]

updated row:1  [2015-10-26 13:09:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:09:58]

column:18 ; row:2  [2015-10-26 13:09:58]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000212') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:09:59]

column:9 ; row:2  [2015-10-26 13:10:00]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:10:00]

updated row:1  [2015-10-26 13:10:00]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 13:10:00]

updated row:1  [2015-10-26 13:10:00]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:10:00]

updated row:1  [2015-10-26 13:10:00]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 13:10:00]

updated row:0  [2015-10-26 13:10:00]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:10:01]

updated row:1  [2015-10-26 13:10:01]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:10:01]

updated row:1  [2015-10-26 13:10:01]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 13:10:01]

updated row:1  [2015-10-26 13:10:01]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:10:01]

updated row:1  [2015-10-26 13:10:01]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 13:10:01]

updated row:1  [2015-10-26 13:10:01]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:10:01]

updated row:0  [2015-10-26 13:10:02]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:10:04]

column:18 ; row:2  [2015-10-26 13:10:04]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000211') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:10:06]

column:9 ; row:2  [2015-10-26 13:10:06]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 13:10:06]

updated row:1  [2015-10-26 13:10:06]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 13:10:06]

updated row:1  [2015-10-26 13:10:06]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 13:10:06]

updated row:1  [2015-10-26 13:10:06]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 13:10:06]

updated row:0  [2015-10-26 13:10:07]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:10:07]

updated row:1  [2015-10-26 13:10:07]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 13:10:07]

updated row:1  [2015-10-26 13:10:07]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 13:10:07]

updated row:1  [2015-10-26 13:10:07]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 13:10:07]

updated row:1  [2015-10-26 13:10:07]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 13:10:07]

updated row:1  [2015-10-26 13:10:08]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:10:08]

updated row:0  [2015-10-26 13:10:08]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 13:10:10]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 13:10:10]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000215','Normal Wave','hz','admin',now()  [2015-10-26 13:10:10]

updated row:1  [2015-10-26 13:10:11]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000215'),'W000000215','hz','NAMA2015102345659','admin',now()   [2015-10-26 13:10:11]

updated row:1  [2015-10-26 13:10:11]

update oub_shipment_header set status='150', wave_no='W000000215' where shipment_no='NAMA2015102345659'   [2015-10-26 13:10:11]

updated row:1  [2015-10-26 13:10:11]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 13:10:11]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 13:10:11]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000215','0000003862',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:10:11]

updated row:1  [2015-10-26 13:10:11]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 13:10:11]

column:15 ; row:2  [2015-10-26 13:10:12]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:10:12]

column:10 ; row:1  [2015-10-26 13:10:12]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 13:10:12]

updated row:1  [2015-10-26 13:10:12]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003862'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003862',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 13:10:12]

updated row:1  [2015-10-26 13:10:12]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:10:12]

updated row:1  [2015-10-26 13:10:12]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:10:12]

column:10 ; row:2  [2015-10-26 13:10:13]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 13:10:13]

updated row:1  [2015-10-26 13:10:13]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003862'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003862',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 13:10:13]

updated row:1  [2015-10-26 13:10:13]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:10:13]

updated row:1  [2015-10-26 13:10:13]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000215'),'W000000215','hz','NAMA2015102329279','admin',now()   [2015-10-26 13:10:13]

updated row:1  [2015-10-26 13:10:13]

update oub_shipment_header set status='150', wave_no='W000000215' where shipment_no='NAMA2015102329279'   [2015-10-26 13:10:13]

updated row:1  [2015-10-26 13:10:14]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 13:10:14]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 13:10:14]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000215','0000003863',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:10:14]

updated row:1  [2015-10-26 13:10:14]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 13:10:14]

column:15 ; row:2  [2015-10-26 13:10:14]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:10:14]

column:10 ; row:1  [2015-10-26 13:10:14]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 13:10:15]

updated row:1  [2015-10-26 13:10:15]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003863'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003863',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 13:10:15]

updated row:1  [2015-10-26 13:10:15]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 13:10:15]

updated row:1  [2015-10-26 13:10:15]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:10:15]

column:10 ; row:4  [2015-10-26 13:10:15]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 13:10:15]

updated row:1  [2015-10-26 13:10:15]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003863'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003863',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 13:10:15]

updated row:1  [2015-10-26 13:10:16]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 13:10:16]

updated row:1  [2015-10-26 13:10:16]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 13:10:16]

column:2 ; row:2  [2015-10-26 13:10:16]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 13:10:16]

updated row:1  [2015-10-26 13:10:16]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:10:16]

updated row:0  [2015-10-26 13:10:16]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:10:17]

updated row:0  [2015-10-26 13:10:17]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:10:17]

column:23 ; row:2  [2015-10-26 13:10:17]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:10:17]

column:18 ; row:2  [2015-10-26 13:10:17]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 13:10:17]

column:2 ; row:2  [2015-10-26 13:10:17]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 13:10:17]

updated row:1  [2015-10-26 13:10:17]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:10:18]

updated row:0  [2015-10-26 13:10:18]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:10:18]

updated row:0  [2015-10-26 13:10:18]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:10:18]

column:23 ; row:2  [2015-10-26 13:10:18]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:10:18]

column:18 ; row:2  [2015-10-26 13:10:18]

select * from sys_process_history where 1<>1  [2015-10-26 13:10:19]

column:48 ; row:0  [2015-10-26 13:10:19]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000215','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 13:10:19]

updated row:1  [2015-10-26 13:10:19]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='库存查询'   [2015-10-26 13:11:15]

column:1 ; row:1  [2015-10-26 13:11:15]

select ii.WAREHOUSE_CODE 仓库编码,bw.WAREHOUSE_NAME 仓库名称,ii.STORER_CODE 货主编码,bs.STORER_NAME 货主名称,ii.LOCATION_CODE 库位编码,ii.CONTAINER_CODE 箱号,ii.ITEM_CODE 商品编码,bi.ITEM_BAR_CODE 商品条码,bi.ITEM_NAME 商品名称,bi.ITEM_SPEC 商品规格,ii.ON_HAND_QTY 库存总数,ii.ALLOCATED_QTY 已分配数量,ii.PICKED_QTY 已拣货数量,ii.INACTIVE_QTY 冻结数量,biu.unit_name 单位,ii.lot_no 批次号,il.LOTTABLE01 批次属性1,il.LOTTABLE02 批次属性2,il.LOTTABLE03 批次属性3,il.LOTTABLE04 批次属性4,il.LOTTABLE05 批次属性5,il.LOTTABLE06 批次属性6,il.LOTTABLE07 批次属性7,il.LOTTABLE08 批次属性8,il.LOTTABLE09 批次属性9,il.LOTTABLE10 批次属性10 ,ii.`STATUS` 库存状态,ii.QUALITY 库存质量,ii.INV_INVENTORY_ID 库存ID  from inv_inventory ii inner join bas_location bl on ii.LOCATION_CODE=bl.LOCATION_CODE and ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE inner join bas_item bi on ii.ITEM_CODE=bi.ITEM_CODE and ii.STORER_CODE=bi.STORER_CODE inner join bas_item_unit biu on bi.UNIT_CODE = biu.unit_code inner join inv_lot il on ii.LOT_NO=il.LOT_NO inner join bas_storer bs on ii.STORER_CODE=bs.STORER_CODE inner join bas_warehouse bw on ii.WAREHOUSE_CODE=bw.WAREHOUSE_CODE where 1=1 and ii.warehouse_code='hz'  and 1<>1   [2015-10-26 13:11:15]

column:29 ; row:0  [2015-10-26 13:11:15]

select * from tmp_jd_inv  [2015-10-26 13:11:17]

column:19 ; row:659  [2015-10-26 13:11:17]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 13:11:34]

column:1 ; row:1  [2015-10-26 13:11:34]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and 1<>1  order by osh.shipment_no   [2015-10-26 13:11:34]

column:22 ; row:0  [2015-10-26 13:11:34]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 13:11:41]

column:22 ; row:1436  [2015-10-26 13:11:42]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:42]

column:20 ; row:1  [2015-10-26 13:11:42]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101367493' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:49]

column:20 ; row:1  [2015-10-26 13:11:49]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:55]

column:20 ; row:1  [2015-10-26 13:11:56]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101330641' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:57]

column:20 ; row:1  [2015-10-26 13:11:57]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101342765' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:57]

column:20 ; row:1  [2015-10-26 13:11:57]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101355880' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:57]

column:20 ; row:1  [2015-10-26 13:11:58]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101376272' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:11:58]

column:20 ; row:1  [2015-10-26 13:11:58]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100840296' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:28]

column:20 ; row:1  [2015-10-26 13:12:28]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='库存查询'   [2015-10-26 13:12:35]

column:1 ; row:1  [2015-10-26 13:12:35]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='订单查询'   [2015-10-26 13:12:38]

column:1 ; row:1  [2015-10-26 13:12:38]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100836477' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:38]

column:20 ; row:1  [2015-10-26 13:12:39]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='100'  order by osh.shipment_no   [2015-10-26 13:12:40]

column:22 ; row:28  [2015-10-26 13:12:40]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100300573' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:40]

column:20 ; row:1  [2015-10-26 13:12:40]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  and osh.status='500'  order by osh.shipment_no   [2015-10-26 13:12:43]

column:22 ; row:1436  [2015-10-26 13:12:44]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:44]

column:20 ; row:1  [2015-10-26 13:12:44]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101342765' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:46]

column:20 ; row:1  [2015-10-26 13:12:46]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101330641' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:47]

column:20 ; row:1  [2015-10-26 13:12:47]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100324641A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:49]

column:20 ; row:1  [2015-10-26 13:12:49]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100324641A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:49]

column:20 ; row:1  [2015-10-26 13:12:49]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100324014A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:53]

column:20 ; row:2  [2015-10-26 13:12:53]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100325028A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:54]

column:20 ; row:1  [2015-10-26 13:12:54]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100327959A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:54]

column:20 ; row:2  [2015-10-26 13:12:54]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100328902A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:55]

column:20 ; row:1  [2015-10-26 13:12:55]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100328902A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:55]

column:20 ; row:1  [2015-10-26 13:12:56]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100328902A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:56]

column:20 ; row:1  [2015-10-26 13:12:56]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100328902A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:12:56]

column:20 ; row:1  [2015-10-26 13:12:56]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  order by osh.shipment_no   [2015-10-26 13:13:00]

column:22 ; row:2898  [2015-10-26 13:13:01]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:13:01]

column:20 ; row:1  [2015-10-26 13:13:01]

select bw.warehouse_name 仓库,bs.storer_name 货主,osh.TRANSFER_ORDER_NO 运单号,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,case osh.status when '100' then '新建' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.create_order_date 订单创建时间,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where 1=1  order by osh.shipment_no   [2015-10-26 13:13:05]

column:22 ; row:2898  [2015-10-26 13:13:06]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA12015101300730' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:13:06]

column:20 ; row:1  [2015-10-26 13:13:06]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100308464A' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:13:06]

column:20 ; row:1  [2015-10-26 13:13:07]

select osd.shipment_no 出库单号,osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,osd.erp_order_no 外部订单号,osd.warehouse_code 仓库编码,osd.storer_code 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 分配数量,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code where osh.shipment_no='NAMA2015100307941' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:13:07]

column:20 ; row:1  [2015-10-26 13:13:08]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 13:27:11]

column:2 ; row:1  [2015-10-26 13:27:12]

select 'hz' CUR_WAREHOUSE_CODE,WAREHOUSE_CODE,USER_CODE,USER_NAME,ROLE_NAME,ACTIVE from sys_user where (user_code= 'admin' or login_code = 'admin') and password='21232f297a57a5a743894a0e4a801fc3'   [2015-10-26 13:27:17]

column:6 ; row:1  [2015-10-26 13:27:17]

select menu_item from sys_user_role_menu_util where id  in(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20) and menu_item='运单扫描'   [2015-10-26 13:27:19]

column:1 ; row:1  [2015-10-26 13:27:19]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in (0) order by osh.shipment_no   [2015-10-26 13:27:19]

column:23 ; row:0  [2015-10-26 13:27:20]

insert into oub_shipment_header(storer_code,shipment_no,external_order_no,erp_order_no,warehouse_code,create_order_date,TRANSFER_ORDER_NO,ship_to_name,ship_to_contact,ship_to_contact_idcard,ship_to_country,ship_to_province_code,ship_to_city_code,ship_to_region_code,ship_to_street_code,ship_to_address1,ship_to_cell,ship_to_tel,ship_to_email,created_dtm_loc,created_by_user) select distinct o.supplier_id,o.order_sn,o.external_order,o.external_order,'hz',o.created_date,o.invoice_no,o.consignee_name,o.consignee_name,o.consignee_idcard ,o.consignee_country,o.consignee_province,o.consignee_city,o.consignee_district,'',o.consignee_address,o.consignee_mobile,o.consignee_mobile,o.consignee_email,now(),'admin' from sandwich.ag_order o inner join sandwich.ag_order_commodity od on o.order_id=od.order_id where o.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=o.order_sn) union all select distinct eoi.shop_no,eoi.order_sn,eoi.external_order,eoi.external_order,'hz',FROM_UNIXTIME(eoi.add_time,'%Y-%m-%d %H:%i:%S'),eoi.invoice_no,eoi.consignee,eoi.consignee,eu.identity ,'',er.region_name,er2.region_name,er3.region_name,'',eoi.address,eoi.mobile,eoi.tel,eoi.email,now(),'admin' from namacity.ecs_order_info eoi inner join namacity.ecs_order_goods eog on eoi.order_id=eog.order_id left outer join namacity.ecs_users eu on eu.user_id=eoi.user_id left outer join namacity.ecs_region er on eoi.province=er.region_id left outer join namacity.ecs_region er2 on eoi.city=er2.region_id left outer join namacity.ecs_region er3 on eoi.district=er3.region_id where eoi.invoice_no in  ('1128879652506') and not exists(select shipment_no from oub_shipment_header osh where osh.shipment_no=eoi.order_sn)   [2015-10-26 13:27:21]

updated row:0  [2015-10-26 13:27:21]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:27:21]

column:23 ; row:2  [2015-10-26 13:27:21]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:22]

column:18 ; row:2  [2015-10-26 13:27:22]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:23]

column:18 ; row:2  [2015-10-26 13:27:23]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:24]

column:18 ; row:2  [2015-10-26 13:27:24]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000215') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:27:26]

column:9 ; row:2  [2015-10-26 13:27:26]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000158'  and ii.LOCATION_CODE='HZ-H0-A-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00010'   [2015-10-26 13:27:26]

updated row:1  [2015-10-26 13:27:26]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='1'   [2015-10-26 13:27:26]

updated row:1  [2015-10-26 13:27:26]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 13:27:26]

updated row:1  [2015-10-26 13:27:26]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 13:27:26]

updated row:0  [2015-10-26 13:27:26]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:27:27]

updated row:1  [2015-10-26 13:27:27]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (1.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000141'  and ii.LOCATION_CODE='HZ-H0-B-11'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00017'   [2015-10-26 13:27:27]

updated row:1  [2015-10-26 13:27:27]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102329279' and SHIPMENT_LINE_NO='2'   [2015-10-26 13:27:27]

updated row:1  [2015-10-26 13:27:27]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (1.00000) where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 13:27:27]

updated row:1  [2015-10-26 13:27:27]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102329279'   [2015-10-26 13:27:27]

updated row:1  [2015-10-26 13:27:27]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:27:28]

updated row:0  [2015-10-26 13:27:28]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102345659' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:31]

column:18 ; row:2  [2015-10-26 13:27:31]

select opd.SHIPMENT_NO,opd.SHIPMENT_LINE_NO,opd.STORER_CODE,opd.WAREHOUSE_CODE,opd.LOT_NO,opd.FROM_LOCATION_CODE,opd.FROM_CONTAINER_CODE,opd.ITEM_CODE,opd.PICKED_QTY from oub_pick_detail opd where opd.SHIPMENT_NO in (select SHIPMENT_NO from oub_wave_detail where WAVE_NO='W000000215') and opd.PICKED_QTY>0 and opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:27:33]

column:9 ; row:2  [2015-10-26 13:27:33]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000200'  and ii.LOCATION_CODE='HZ-H0-B-7'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:27:33]

updated row:1  [2015-10-26 13:27:33]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='1'   [2015-10-26 13:27:33]

updated row:1  [2015-10-26 13:27:33]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='1' and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:27:33]

updated row:1  [2015-10-26 13:27:33]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 13:27:33]

updated row:0  [2015-10-26 13:27:34]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:27:34]

updated row:1  [2015-10-26 13:27:34]

update inv_inventory ii set ii.ALLOCATED_QTY=ii.ALLOCATED_QTY - (2.00000) where ii.STORER_CODE='1117' and ii.WAREHOUSE_CODE='hz' and ii.LOT_NO='L000000152'  and ii.LOCATION_CODE='HZ-H0-B-8'  and ii.CONTAINER_CODE='*' and ii.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:27:34]

updated row:1  [2015-10-26 13:27:34]

delete from oub_pick_detail where SHIPMENT_NO ='NAMA2015102345659' and SHIPMENT_LINE_NO='2'   [2015-10-26 13:27:34]

updated row:1  [2015-10-26 13:27:34]

update oub_shipment_detail osd set osd.`STATUS`='100',osd.ALLOCATED_QTY=osd.ALLOCATED_QTY - (2.00000) where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO='2' and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:27:34]

updated row:1  [2015-10-26 13:27:34]

update oub_shipment_header osh set osh.`STATUS`='100',osh.WAVE_NO='' where not exists(select osd.SHIPMENT_NO from oub_shipment_detail osd where osh.SHIPMENT_NO=osd.SHIPMENT_NO and osd.`STATUS`>'100') and osh.SHIPMENT_NO = 'NAMA2015102345659'   [2015-10-26 13:27:34]

updated row:1  [2015-10-26 13:27:35]

delete from oub_pick_header where SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:27:35]

updated row:0  [2015-10-26 13:27:35]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:37]

column:18 ; row:2  [2015-10-26 13:27:37]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_wave_header' and field_name='wave_no'   [2015-10-26 13:27:40]

update bas_num_rule set current_id=current_id+1 where table_name='oub_wave_header' and field_name='wave_no'  [2015-10-26 13:27:40]

insert into oub_wave_header(WAVE_NO,WAVE_NAME,WAREHOUSE_CODE,CREATED_BY_USER,CREATED_DTM_LOC) select 'W000000216','Normal Wave','hz','admin',now()  [2015-10-26 13:27:41]

updated row:1  [2015-10-26 13:27:41]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000216'),'W000000216','hz','NAMA2015102329279','admin',now()   [2015-10-26 13:27:41]

updated row:1  [2015-10-26 13:27:41]

update oub_shipment_header set status='150', wave_no='W000000216' where shipment_no='NAMA2015102329279'   [2015-10-26 13:27:41]

updated row:1  [2015-10-26 13:27:41]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 13:27:41]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 13:27:41]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000216','0000003864',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:27:42]

updated row:1  [2015-10-26 13:27:42]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102329279' order by SHIPMENT_LINE_NO   [2015-10-26 13:27:42]

column:15 ; row:2  [2015-10-26 13:27:42]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00010'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:27:42]

column:10 ; row:1  [2015-10-26 13:27:42]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '253' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00010'  and LOCATION_CODE='HZ-H0-A-11' and CONTAINER_CODE='*'   [2015-10-26 13:27:42]

updated row:1  [2015-10-26 13:27:42]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003864'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003864',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000158',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-A-11','*','253', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 13:27:43]

updated row:1  [2015-10-26 13:27:43]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00010'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00010'   [2015-10-26 13:27:43]

updated row:1  [2015-10-26 13:27:43]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00017'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:27:43]

column:10 ; row:4  [2015-10-26 13:27:43]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(1.0) where INV_INVENTORY_ID= '305' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00017'  and LOCATION_CODE='HZ-H0-B-11' and CONTAINER_CODE='*'   [2015-10-26 13:27:43]

updated row:1  [2015-10-26 13:27:43]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003864'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003864',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000141',osd.ITEM_CODE,osd.REQ_QTY,'1.0', 'HZ-H0-B-11','*','305', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 13:27:43]

updated row:1  [2015-10-26 13:27:44]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102329279' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00017'),0)  where osd.SHIPMENT_NO='NAMA2015102329279' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00017'   [2015-10-26 13:27:44]

updated row:1  [2015-10-26 13:27:44]

insert into oub_wave_detail(OUB_WAVE_HEADER_ID,WAVE_NO,WAREHOUSE_CODE,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_WAVE_HEADER_ID from oub_wave_header where WAVE_NO='W000000216'),'W000000216','hz','NAMA2015102345659','admin',now()   [2015-10-26 13:27:44]

updated row:1  [2015-10-26 13:27:44]

update oub_shipment_header set status='150', wave_no='W000000216' where shipment_no='NAMA2015102345659'   [2015-10-26 13:27:44]

updated row:1  [2015-10-26 13:27:44]

select current_id,rule_expr,now() strdate from bas_num_rule where table_name='oub_pick_header' and field_name='pick_no'   [2015-10-26 13:27:44]

update bas_num_rule set current_id=current_id+1 where table_name='oub_pick_header' and field_name='pick_no'  [2015-10-26 13:27:45]

insert into oub_pick_header(WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,CREATED_BY_USER,CREATED_DTM_LOC) select osh.WAREHOUSE_CODE,osh.STORER_CODE,'W000000216','0000003865',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,'admin',now()  from oub_shipment_header osh where osh.SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:27:45]

updated row:1  [2015-10-26 13:27:45]

select WAREHOUSE_CODE,STORER_CODE,SHIPMENT_LINE_NO,ITEM_CODE,REQ_QTY,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10 from oub_shipment_detail where shipment_no='NAMA2015102345659' order by SHIPMENT_LINE_NO   [2015-10-26 13:27:45]

column:15 ; row:2  [2015-10-26 13:27:45]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00023'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:27:45]

column:10 ; row:1  [2015-10-26 13:27:45]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '297' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00023'  and LOCATION_CODE='HZ-H0-B-7' and CONTAINER_CODE='*'   [2015-10-26 13:27:45]

updated row:1  [2015-10-26 13:27:46]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003865'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003865',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000200',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-7','*','297', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 1   [2015-10-26 13:27:46]

updated row:1  [2015-10-26 13:27:46]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=1 and opd.ITEM_CODE='0005-0489-00023'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=1 and osd.ITEM_CODE='0005-0489-00023'   [2015-10-26 13:27:46]

updated row:1  [2015-10-26 13:27:46]

select ii.INV_INVENTORY_ID,ii.WAREHOUSE_CODE,ii.STORER_CODE,ii.ITEM_CODE,ii.INV_LOT_ID,ii.LOT_NO,ii.LOCATION_CODE,ii.CONTAINER_CODE,ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) QTY,0 AllocatedQty  from inv_inventory ii  inner join bas_location bl on ii.WAREHOUSE_CODE=bl.WAREHOUSE_CODE and ii.LOCATION_CODE=bl.LOCATION_CODE  where ii.WAREHOUSE_CODE='hz' and ii.STORER_CODE='1117' and ii.ITEM_CODE='0005-0489-00004'  and bl.LOCATION_TYPE_CODE not in ('Dock','Damage')  and ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY)>0  order by ii.ON_HAND_QTY+(ii.IN_TRANSIT_QTY)-(ii.ALLOCATED_QTY)-(ii.PICKED_QTY)-(ii.INACTIVE_QTY) asc  [2015-10-26 13:27:46]

column:10 ; row:2  [2015-10-26 13:27:46]

update inv_inventory set ALLOCATED_QTY=ifnull(ALLOCATED_QTY,0)+(2.0) where INV_INVENTORY_ID= '301' and WAREHOUSE_CODE='hz' and STORER_CODE='1117' and ITEM_CODE='0005-0489-00004'  and LOCATION_CODE='HZ-H0-B-8' and CONTAINER_CODE='*'   [2015-10-26 13:27:46]

updated row:1  [2015-10-26 13:27:47]

insert into oub_pick_detail(OUB_PICK_HEADER_ID,WAREHOUSE_CODE,STORER_CODE,WAVE_NO,PICK_NO,OUB_SHIPMENT_HEADER_ID,SHIPMENT_NO,SHIPMENT_LINE_NO,LOT_NO,ITEM_CODE,REQ_QTY,PICKED_QTY,FROM_LOCATION_CODE,FROM_CONTAINER_CODE,INV_INVENTORY_ID,CREATED_BY_USER,CREATED_DTM_LOC) select (select OUB_PICK_HEADER_ID from oub_pick_header where pick_no='0000003865'),osd.WAREHOUSE_CODE,osd.STORER_CODE,osh.WAVE_NO,'0000003865',osh.OUB_SHIPMENT_HEADER_ID,osh.SHIPMENT_NO,osd.SHIPMENT_LINE_NO, 'L000000152',osd.ITEM_CODE,osd.REQ_QTY,'2.0', 'HZ-H0-B-8','*','301', 'admin',now()  from oub_shipment_header osh inner join oub_shipment_detail osd on osh.SHIPMENT_NO=osd.SHIPMENT_NO where osh.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO= 2   [2015-10-26 13:27:47]

updated row:1  [2015-10-26 13:27:47]

update oub_shipment_detail osd set status='200',osd.ALLOCATED_QTY=ifnull((select sum(PICKED_QTY) from oub_pick_detail opd where opd.status<>'999' and opd.SHIPMENT_NO='NAMA2015102345659' and opd.SHIPMENT_LINE_NO=2 and opd.ITEM_CODE='0005-0489-00004'),0)  where osd.SHIPMENT_NO='NAMA2015102345659' and osd.SHIPMENT_LINE_NO=2 and osd.ITEM_CODE='0005-0489-00004'   [2015-10-26 13:27:47]

updated row:1  [2015-10-26 13:27:47]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102329279' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102329279' and status<'200')   [2015-10-26 13:27:47]

column:2 ; row:2  [2015-10-26 13:27:47]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102329279' and WAREHOUSE_CODE='hz'   [2015-10-26 13:27:47]

updated row:1  [2015-10-26 13:27:47]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:27:48]

updated row:0  [2015-10-26 13:27:48]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102329279'   [2015-10-26 13:27:48]

updated row:0  [2015-10-26 13:27:48]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:27:48]

column:23 ; row:2  [2015-10-26 13:27:48]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:48]

column:18 ; row:2  [2015-10-26 13:27:48]

select PICK_NO,SHIPMENT_LINE_NO from oub_pick_detail where SHIPMENT_NO='NAMA2015102345659' and status <>'999' and WAREHOUSE_CODE='hz'  and not exists(select shipment_no from oub_shipment_detail where shipment_no='NAMA2015102345659' and status<'200')   [2015-10-26 13:27:48]

column:2 ; row:2  [2015-10-26 13:27:49]

update oub_shipment_header set status='200' where SHIPMENT_NO='NAMA2015102345659' and WAREHOUSE_CODE='hz'   [2015-10-26 13:27:49]

updated row:1  [2015-10-26 13:27:49]

update oub_pick_detail set USER_DEF1 = PICKED_QTY,PICKED_QTY=REQ_QTY where status<>'999' and PICKED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:27:49]

updated row:0  [2015-10-26 13:27:49]

update oub_shipment_detail set USER_DEF1 =ALLOCATED_QTY,ALLOCATED_QTY=REQ_QTY where ALLOCATED_QTY>REQ_QTY and SHIPMENT_NO='NAMA2015102345659'   [2015-10-26 13:27:49]

updated row:0  [2015-10-26 13:27:49]

select bs.storer_name 货主,osh.shipment_no 出库单号,osh.external_order_no 外部订单号,osh.warehouse_code 仓库编码,bw.warehouse_name 仓库名称,osh.create_order_date 订单创建时间,case osh.status when '100' then '新建' when '150' then '库存分配中' when '190' then '部分分配' when '200' then '库存分配完成' when '300' then '拣货中' when '400' then '分拣中' when '500' then '包装中' when '600' then '包装完成' when '700' then '出库复核中' when '800' then '出库复核完成' when '900' then '已出库交接' else osh.status end 状态,osh.TRANSFER_ORDER_NO 运单号,osh.wave_no 波次号,osh.ship_to_name 收货人,osh.ship_to_contact 收货联系人,osh.ship_to_contact_idcard 收货人身份证号,osh.ship_to_country 国家,osh.ship_to_province_code 省,osh.ship_to_city_code 市,osh.ship_to_region_code 区,osh.ship_to_street_code 街道,osh.ship_to_address1 详细地址,osh.ship_to_cell 电话1,osh.ship_to_tel 电话2,osh.ship_to_email 电子邮箱,osh.created_dtm_loc WMS创建时间,osh.created_by_user WMS创建用户  from oub_shipment_header osh  inner join bas_storer bs on osh.storer_code=bs.storer_code  inner join bas_warehouse bw on osh.warehouse_code=bw.warehouse_code  where osh.TRANSFER_ORDER_NO in  ('1128879652506') order by osh.shipment_no   [2015-10-26 13:27:49]

column:23 ; row:2  [2015-10-26 13:27:49]

select osd.shipment_line_no 行号,osd.status 订单状态,osd.create_order_date 订单创建日期,bw.warehouse_name 仓库,bs.storer_name 货主,osd.item_code 商品编码,bi.item_bar_code 条码,bi.item_name 商品名称,osd.req_qty 订单数量,osd.ALLOCATED_QTY 已分配数,biu.unit_name 单位,osd.is_gift 是否礼品,osd.price 价格,osd.item_retail_price 零售价格,osd.tax_rate 税率,osd.tax 税额,osd.created_dtm_loc WMS创建时间,osd.created_by_user WMS创建用户 from oub_shipment_detail osd inner join oub_shipment_header osh on osd.shipment_no=osh.shipment_no left outer join bas_item bi on bi.storer_code=osh.storer_code and bi.item_code=osd.item_code left outer join bas_item_unit biu on bi.unit_code=biu.unit_code left outer join bas_warehouse bw on osd.warehouse_code=bw.warehouse_code left outer join bas_storer bs on osd.storer_code=bs.storer_code where osh.shipment_no='NAMA2015102329279' order by osd.shipment_no,osd.shipment_line_no   [2015-10-26 13:27:50]

column:18 ; row:2  [2015-10-26 13:27:50]

select * from sys_process_history where 1<>1  [2015-10-26 13:27:50]

column:48 ; row:0  [2015-10-26 13:27:50]

insert into sys_process_history(SYS_PROCESS_HISTORY_ID,STORER_CODE,TO_STORER_CODE,WAREHOUSE_CODE,TO_WAREHOUSE_CODE,PROCESS_CODE,PROCESS_NAME,ACTION_CODE,ACTION_NAME,ITEM_CODE,FROM_LOCATION_CODE,TO_LOCATION_CODE,FROM_CONTAINER_CODE,TO_CONTAINER_CODE,QTY,QTY_UM,REFERENCE_NO,REFERENCE_LINE_NO,REFERENCE_TYPE,LOT_NO,LOTTABLE01,LOTTABLE02,LOTTABLE03,LOTTABLE04,LOTTABLE05,LOTTABLE06,LOTTABLE07,LOTTABLE08,LOTTABLE09,LOTTABLE10,PROCESS_USER,PROCESS_TIME,STATUS,IDENTIFIER1,IDENTIFIER2,IDENTIFIER3,IDENTIFIER4,IDENTIFIER5,MESSAGE,CREATED_BY_USER,CREATED_OFFICE,CREATED_DTM_LOC,CREATED_TIME_ZONE,UPDATED_BY_USER,UPDATED_OFFICE,UPDATED_DTM_LOC,UPDATED_TIME_ZONE,RECORD_VERSION) 
 select null,'','','hz','','WAVE','波次库存分配','','','','','','','','','','W000000216','','','','','','','','','','','','','','',now(),'','','','','','','','admin','',now(),'','','',now(),'',''  [2015-10-26 13:27:50]

updated row:1  [2015-10-26 13:27:50]

select SYS_VERSION_CODE,SYS_VERSION_NAME from sys_version where SYS_VERSION_CLIENT='WMS' order by SYS_VERSION_CODE desc limit 1  [2015-10-26 19:52:30]

column:2 ; row:1  [2015-10-26 19:52:31]
